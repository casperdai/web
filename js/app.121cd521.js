(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,s){t.exports=s("56d7")},"01cb":function(t,e,s){"use strict";var a=s("c23c"),i=s.n(a);i.a},"0553":function(t,e,s){"use strict";var a=s("ca86"),i=s.n(a);i.a},"05bc":function(t,e,s){"use strict";var a=s("106e"),i=s.n(a);i.a},"0ee2":function(t,e,s){},"106e":function(t,e,s){},1641:function(t,e,s){},"19ee":function(t,e,s){"use strict";var a=s("dd4a"),i=s.n(a);i.a},"1aa2":function(t,e,s){"use strict";var a=s("9411"),i=s.n(a);i.a},"1deb":function(t,e,s){},"1f08":function(t,e,s){},"204c":function(t,e,s){"use strict";var a=s("c58e"),i=s.n(a);i.a},2137:function(t,e,s){"use strict";var a=s("36f2"),i=s.n(a);i.a},2271:function(t,e,s){"use strict";var a=s("4d02"),i=s.n(a);i.a},2731:function(t,e,s){},"29cf":function(t,e,s){"use strict";var a=s("ad79"),i=s.n(a);i.a},"2a8d":function(t,e,s){"use strict";var a=s("ae35"),i=s.n(a);i.a},"2b11":function(t,e,s){"use strict";var a=s("1f08"),i=s.n(a);i.a},"2b60":function(t,e,s){},"2bb9":function(t,e,s){"use strict";var a=s("3ed5"),i=s.n(a);i.a},"36f2":function(t,e,s){},"3b56":function(t,e,s){"use strict";var a=s("0ee2"),i=s.n(a);i.a},"3ed5":function(t,e,s){},"411c":function(t,e,s){"use strict";var a=s("9abc"),i=s.n(a);i.a},"423e":function(t,e,s){"use strict";var a=s("ab9d"),i=s.n(a);i.a},"44bf":function(t,e,s){},"4d02":function(t,e,s){},"534f":function(t,e,s){"use strict";var a=s("e6e9"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d"),s("1deb"),s("dfa4");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t.showMask?a("div",{staticClass:"requesting_mask"},[a("img",{attrs:{src:s("88a7")}})]):t._e()],1)},n=[],o="REQUESTING",r="REQUEST_FINISHED",c={name:"app",data:function(){return{showMask:!1,maskId:-1}},created:function(){var t=this;this.$eventBus.$on(o,function(e){t.showMask=!0,t.maskId=e}),this.$eventBus.$on(r,function(e){t.maskId===e&&(t.maskId=-1,t.showMask=!1)})}},l=c,d=(s("5c0b"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,null,null);u.options.__file="App.vue";var h=u.exports,p=s("ade3"),m=(s("f751"),s("7514"),s("2f62")),f="LOGIN",v="LOGOUT",g=s("d4ec"),_=s("bee2"),b=s("bc3a"),y=s.n(b),C=(s("3b2b"),s("a481"),s("96eb")),k=s.n(C),w=k.a.Random;k.a.setup({timeout:"200-2000"});var $="/";function S(t,e){window.sessionStorage.setItem(t,JSON.stringify(e))}k.a.mock("".concat($,"area/loadAll"),"post",{code:200,message:"operate successfully","data|4-11":[{"id|+1":0,"areaName|1":["Hong Kong","China","Canada","Macao","Taiwan","Germany","United Kingdom","Angola","Bangladesh","Brazil","Japan"],areaCode:/\d{3}/}]}),k.a.mock("".concat($,"common/smscode/send"),"post",{code:200,message:"operate successfully"}),k.a.mock("".concat($,"common/email/send"),"post",{code:200,message:"operate successfully"}),k.a.mock("".concat($,"staff/preModify"),"post",{code:200,message:"operate successfully",data:{token:"d367eadf588d452ba9367a7567b5f029"}}),k.a.mock("".concat($,"parent/password/modify"),"post",{code:200,message:"operate successfully"}),k.a.mock("".concat($,"staff/password/modify"),"post",{code:200,message:"operate successfully"});var P=window.sessionStorage.getItem("parent");P?P=JSON.parse(P):(P={token:"4ee4437885254799b1baf6fe6bf6497a",isFirstLogin:1,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",firstName:"Albany",middleName:"Wa Iat",lastName:"Tam",mobile:"90984154",email:"Albany@gmail.com"},S("parent",P)),k.a.mock("".concat($,"parent/login"),"post",{code:200,message:"operate successfully",data:JSON.parse(JSON.stringify(P))}),k.a.mock("".concat($,"parent/info"),"post",{code:200,message:"operate successfully",data:JSON.parse(JSON.stringify(P))});var A=window.sessionStorage.getItem("teacher");A?A=JSON.parse(A):(A={token:"d367eadf588d452ba9367a7567b5f029",isFirstLogin:1,id:321,legacyId:"91985",headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/5836cc0dcf204c228f9973670a2ca4e1",userName:"yukiko.wong",roles:3,braceletOfBinding:0,"steps|100-100000":0,mobile:"4555477",email:"yukiko.wong@gmail.com"},S("teacher",A)),k.a.mock("".concat($,"staff/login"),"post",{code:200,message:"operate successfully",data:A}),k.a.mock("".concat($,"staff/info"),"post",{code:200,message:"operate successfully",data:A});var x,T=window.sessionStorage.getItem("kids");function I(t,e){var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[a]:("00"+s[a]).substr((""+s[a]).length)));return t}T?T=JSON.parse(T):(T=[{id:467,studentId:"467",firstName:"Bryan",middleName:"Chun Kit",lastName:"Tam",heartRate:89,"steps|100-100000":0,headTeacherFirstName:"Gregg",headTeacherLastName:"Lee",headTeacherUserName:"gregg.lee",gradeLevel:"Grade 10",classId:"10B",braceletOfBinding:0,relationship:1,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",busId:w.integer(10,500)},{id:1170,studentId:"1401677",firstName:"Cayden",middleName:"Chun Ting",lastName:"Angelia","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:1,relationship:2,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52"},{id:11720,studentId:"1401676",firstName:"Cayden",middleName:"Chun Ting",lastName:"Alisa","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:0,relationship:2,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52"},{id:11730,studentId:"1401675",firstName:"Cayden",middleName:"Chun Ting",lastName:"Jay","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:0,relationship:1,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",busId:w.integer(10,500)},{id:11740,studentId:"1401674",firstName:"Cayden",middleName:"Chun Ting",lastName:"DaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisyDaisy","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:1,relationship:2,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",busId:w.integer(10,500)},{id:11570,studentId:"1401671",firstName:"Cayden",middleName:"Chun Ting",lastName:"June","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:0,relationship:2,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",busId:w.integer(10,500)},{id:11970,studentId:"1401672",firstName:"Cayden",middleName:"Chun Ting",lastName:"Allen","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:0,relationship:1,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52"},{id:12570,studentId:"1401673",firstName:"Cayden",middleName:"Chun Ting",lastName:"Krystal","steps|100-100000":0,headTeacherFirstName:"Alexandra",headTeacherMiddleName:"Michelle Louise",headTeacherLastName:"Rauland",headTeacherUserName:"sasha.rauland",gradeLevel:"Grade 3",classId:"3C",braceletOfBinding:0,relationship:2,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/f2fd310c51684343857c02511d5abb52",busId:w.integer(10,500)}],S("kids",T)),k.a.mock("".concat($,"parent/children"),"post",{code:200,message:"operate successfully",data:JSON.parse(JSON.stringify(T))}),k.a.mock("".concat($,"parent/bracelet/bind"),"post",function(t){var e=w.integer(200,201),s=t.idStudent;if(200===e){var a=T.find(function(t){return t.studentId===s});a&&(a.braceletOfBinding=1,S("kids",T))}return{code:e,message:200===e?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"parent/bracelet/unbind"),"post",function(t){var e=w.integer(200,201),s=t.idStudent;if(200===e){var a=T.find(function(t){return t.studentId===s});a&&(a.braceletOfBinding=0,S("kids",T))}return{code:e,message:200===e?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/bracelet/bind"),"post",function(){var t=w.integer(200,201);return 200===t&&(A.braceletOfBinding=1,S("teacher",A)),{code:t,message:200===t?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/bracelet/unbind"),"post",function(){var t=w.integer(200,201);return 200===t&&(A.braceletOfBinding=0,S("teacher",A)),{code:t,message:200===t?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"parent/child/signinrecord"),"post",function(t){var e=JSON.parse(t.body);1===e.page&&(x=Date.now());var s=e.page-1,a=[];if(s<=5)for(var i,n=e.pageSize,o=1,r=0;r<n;r++)i=new Date(x),i.setHours(i.getHours()-s*n*o-r*o),a.push({checkTimeStr:I("yyyy-MM-dd hh:mm:ss",i),checkTime:i.getTime(),type:w.integer(1,7)});return{code:200,message:"operate successfully",data:a}}),k.a.mock("".concat($,"staff/signinrecord"),"post",function(t){var e=JSON.parse(t.body);1===e.page&&(x=Date.now());var s=e.page-1,a=[];if(s<=5)for(var i,n=e.pageSize,o=1,r=0;r<n;r++)i=new Date(x),i.setHours(i.getHours()-s*n*o-r*o),a.push({checkTimeStr:I("yyyy-MM-dd hh:mm:ss",i),checkTime:i.getTime(),type:w.integer(1,7)});return{code:200,message:"operate successfully",data:a}}),k.a.mock("".concat($,"parent/child/stepstate"),"post",function(t){for(var e,s=JSON.parse(t.body),a=Date.now(),i=[],n=1===s.type?7:(new Date).getDate(),o=24,r=0;r<n;r++)e=new Date(a),e.setHours(e.getHours()-r*o),i.push({sportDateStr:I("yyyy-MM-dd",e),sportDate:e.getTime(),steps:w.integer(100,2e4)});return{code:200,message:"operate successfully",data:i}}),k.a.mock("".concat($,"staff/stepsstat"),"post",function(t){for(var e,s=JSON.parse(t.body),a=Date.now(),i=[],n=1===s.type?7:(new Date).getDate(),o=24,r=0;r<n;r++)e=new Date(a),e.setHours(e.getHours()-r*o),i.push({sportDateStr:I("yyyy-MM-dd",e),sportDate:e.getTime(),steps:w.integer(100,2e4)});return{code:200,message:"operate successfully",data:i}}),k.a.mock("".concat($,"parent/child/sport"),"post",{code:200,message:"operate successfully",data:{"steps|100-20000":6520,heartRate:89}}),k.a.mock("".concat($,"staff/sport"),"post",{code:200,message:"operate successfully",data:{"steps|100-20000":6520,heartRate:89}}),k.a.mock("".concat($,"parent/child/modifyBSSId"),"post",function(t){var e=JSON.parse(t.body),s=w.integer(200,201),a=e.idStudent;if(200===s){var i=T.find(function(t){return t.studentId===a});i&&(i.braceletOfBinding=e.BSSId,S("kids",T))}return{code:s,message:200===s?"operate successfully":"operate failed"}});var O={};k.a.mock("".concat($,"common/attachment/upload"),"post",function(t){var e=200,s=new FileReader,a=window.URL.createObjectURL(t.body);return O[a]={load:!0},s.onload=function(t){O[a].load=!1;var e=t.target||t.srcElement;O[a].child?(O[a].child.headUrl=t.picImgPath,S("kids",T),delete O[a]):O[a].teacher?(O[a].teacher.headUrl=t.picImgPath,S("teacher",A),delete O[a]):O[a].img=e.result},s.readAsDataURL(t.body),{code:e,message:200===e?"operate successfully":"operate failed",data:{attachmentId:w.integer(1,999),realPath:a}}}),k.a.mock("".concat($,"parent/child/modifyPic"),"post",function(t){var e=JSON.parse(t.body),s=200,a=e.idStudent;if(200===s){var i=T.find(function(t){return t.studentId===a});i&&O[e.picImgPath]&&(O[e.picImgPath].load?O[e.picImgPath].child=i:(i.headUrl=O[e.picImgPath].img,S("kids",T),delete O[e.picImgPath]))}return{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/pic/modify"),"post",function(t){var e=JSON.parse(t.body),s=200;return 200===s&&O[e.picImgPath]&&(O[e.picImgPath].load?O[e.picImgPath].teacher=A:(A.headUrl=O[e.picImgPath].img,S("teacher",A),delete O[e.picImgPath])),{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"parent/emali/modify"),"post",function(t){var e=JSON.parse(t.body),s=w.integer(200,201);return 200===s&&(P.email=e.email,S("parent",P)),{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/emali/modify"),"post",function(t){var e=JSON.parse(t.body),s=w.integer(200,201);return 200===s&&(A.email=e.email,S("teacher",A)),{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"parent/mobile/modify"),"post",function(t){var e=JSON.parse(t.body),s=w.integer(200,201);return 200===s&&(P.mobile=e.mobile,S("parent",P)),{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/mobile/modify"),"post",function(t){var e=JSON.parse(t.body),s=w.integer(200,201);return 200===s&&(A.mobile=e.mobile,S("teacher",A)),{code:s,message:200===s?"operate successfully":"operate failed"}}),k.a.mock("".concat($,"staff/mobile/checkvcode"),"post",{code:200,message:"operate successfully",data:{token:"d367eadf588d452ba9367a7567b5f029"}}),k.a.mock("".concat($,"staff/email/checkvcode"),"post",{code:200,message:"operate successfully",data:{token:"d367eadf588d452ba9367a7567b5f029"}}),k.a.mock("".concat($,"admin/dashboard"),"post",{code:200,message:"operate successfully",data:{staffTotal:304,"arrivedStaffTotal|0-304":0,studentTotal:1793,"arrivedStudentTotal|0-1793":0}}),k.a.mock("".concat($,"admin/teacher/attendance"),"post",{code:200,message:"operate successfully",data:{staffTotal:304,"arrivedStaffTotal|0-304":0,staffStat:[{idSchoolLevel:1,schoolLevel:"Middle School",staffSchoolLevelTotal:100,"arrivedStaffSchoolLevelTotal|0-100":0},{idSchoolLevel:2,schoolLevel:"Lower School",staffSchoolLevelTotal:100,"arrivedStaffSchoolLevelTotal|0-100":0},{idSchoolLevel:3,schoolLevel:"High School",staffSchoolLevelTotal:104,"arrivedStaffSchoolLevelTotal|0-104":0}]}}),k.a.mock("".concat($,"admin/student/schoollevel/attendance"),"post",{code:200,message:"operate successfully",data:{studentTotal:1793,"arrivedStudentTotal|0-1793":0,studentStat:[{idSchoolLevel:1,schoolLevel:"Middle School",studentSchoolLevelTotal:600,"arrivedStudentSchoolLevelTotal|0-600":0},{idSchoolLevel:2,schoolLevel:"Lower School",studentSchoolLevelTotal:595,"arrivedStudentSchoolLevelTotal|0-595":0},{idSchoolLevel:3,schoolLevel:"High School",studentSchoolLevelTotal:598,"arrivedStudentSchoolLevelTotal|0-598":0}]}});var M=[{idGrade:1,gradeLevel:"Grade 1",studentGradeTotal:129,"arrivedStudentGradeTotal|0-129":0},{idGrade:2,gradeLevel:"Grade 2",studentGradeTotal:130,"arrivedStudentGradeTotal|0-130":0},{idGrade:3,gradeLevel:"Grade 3",studentGradeTotal:136,"arrivedStudentGradeTotal|0-136":0},{idGrade:4,gradeLevel:"Grade 4",studentGradeTotal:137,"arrivedStudentGradeTotal|0-137":0},{idGrade:5,gradeLevel:"Grade 5",studentGradeTotal:138,"arrivedStudentGradeTotal|0-138":0},{idGrade:5,gradeLevel:"Grade 6",studentGradeTotal:137,"arrivedStudentGradeTotal|0-137":0},{idGrade:13,gradeLevel:"Prep",studentGradeTotal:120,"arrivedStudentGradeTotal|0-120":0},{idGrade:14,gradeLevel:"Rec",studentGradeTotal:128,"arrivedStudentGradeTotal|0-128":0}];k.a.mock("".concat($,"admin/student/grade/attendance"),"post",{code:200,message:"operate successfully",data:{studentSchoolLevelTotal:1055,"arrivedStudentSchoolLevelTotal|0-1055":0,gradeStudentStat:M}});var N=[{idClass:820,classId:"1A",studentClassTotal:24},{idClass:821,classId:"1B",studentClassTotal:23},{idClass:822,classId:"1C",studentClassTotal:24},{idClass:823,classId:"1D",studentClassTotal:24},{idClass:824,classId:"1E",studentClassTotal:24}];k.a.mock("".concat($,"admin/student/class/attendance"),"post",function(t){var e=JSON.parse(t.body),s=M.find(function(t){return t.idGrade===e.idGrade}),a=s?s.gradeLevel:"";return{code:200,message:"operate successfully",data:{studentGradeTotal:119,arrivedStudentGradeTotal:w.integer(0,119),classStudentStat:N.map(function(t){return t.gradeLevel=a,t.arrivedStudentClassTotal=w.integer(0,t.studentClassTotal),t})}}}),k.a.mock("".concat($,"admin/class/studentattendance"),"post",function(t){var e=JSON.parse(t.body),s=N.find(function(t){return t.idClass===e.idClass});return console.log(e,s),{code:200,message:"operate successfully",data:{idClass:s&&s.idClass||-1,classId:s&&s.classId||"1A",gradeLevel:s&&s.gradeLevel||"Grade 1",studentClassTotal:s?s.studentClassTotal:0,arrivedStudentClassTotal:s?void 0!==s.arrivedStudentClassTotal?s.arrivedStudentClassTotal:w.integer(0,s.studentClassTotal):0,studentAttendanceInfo:[{idStudent:11371,firstName:"Tara",middleName:"",lastName:"Mahtani",status:0},{idStudent:11372,firstName:"Joshua",middleName:"",lastName:"Cheung",status:1},{idStudent:11373,firstName:"Uma",middleName:"",lastName:"Chellaram",status:2},{idStudent:11374,firstName:"Maximilian",middleName:"",lastName:"Grout",status:3},{idStudent:11375,firstName:"Aton",middleName:"",lastName:"Mou",status:3}]}}}),k.a.mock("".concat($,"teacher/class/studentattendance"),"post",function(t){var e=JSON.parse(t.body),s=N.find(function(t){return t.idClass===e.idClass});return console.log(e,s),{code:200,message:"operate successfully",data:{idClass:s&&s.idClass||-1,classId:s&&s.classId||"1A",gradeLevel:s&&s.gradeLevel||"Grade 1",studentClassTotal:s?s.studentClassTotal:0,arrivedStudentClassTotal:s?void 0!==s.arrivedStudentClassTotal?s.arrivedStudentClassTotal:w.integer(0,s.studentClassTotal):0,studentAttendanceInfo:[{idStudent:11371,firstName:"Tara",middleName:"",lastName:"Mahtani",status:0},{idStudent:11372,firstName:"Joshua",middleName:"",lastName:"Cheung",status:1},{idStudent:11373,firstName:"Uma",middleName:"",lastName:"Chellaram",status:2},{idStudent:11374,firstName:"Maximilian",middleName:"",lastName:"Grout",status:3},{idStudent:11375,firstName:"Aton",middleName:"",lastName:"Mou",status:3}]}}}),k.a.mock("".concat($,"teacher/class/studentstat"),"post",{code:200,message:"operate successfully",data:{idClass:820,classId:"1A",gradeLevel:"Grade 1",studentClassTotal:24,"arrivedStudentClassTotal|0-24":0}}),k.a.mock("".concat($,"teacher/studentstat"),"post",{code:200,message:"operate successfully",data:{idStudent:1137,headUrl:"http://huayue-ncyx.oss-cn-zhangjiakou.aliyuncs.com/banner/5836cc0dcf204c228f9973670a2ca4e1",firstName:"Tara",middleName:"",lastName:"Mahtani",parentMobile:"66854149",parentEmail:"Dheeraj.Mahtani@cdnis.edu.hk","accReachCount|0-50":0,"accAbsenceCount|0-10":0,classId:"1A",gradeLevel:"Grade 1"}}),k.a.mock("".concat($,"teacher/student/signin"),"post",{"code|200-201":200,message:"operate successfully"}),k.a.mock("".concat($,"teacher/student/signinrecord"),"post",function(t){var e=JSON.parse(t.body);1===e.page&&(x=Date.now());var s=e.page-1,a=[];if(s<=5)for(var i,n=e.pageSize,o=24,r=0;r<n;r++)i=new Date(x),i.setHours(i.getHours()-s*n*o-r*o),a.push({checkTimeStr:I("yyyy-MM-dd hh:mm:ss",i),checkTime:i.getTime(),type:w.integer(1,s<=2?2:3)});return{code:200,message:"operate successfully",data:a}});var E={base_url:$},L=!1;window.jsNative={os:function(){return"android"},isBluetoothOpen:function(){return L},openSysSetting:function(){L=!0},scan:function(){}},window.jsBracelet={isConnected:function(){}};var D={base_url:E.base_url,timeout:2e3},j=new a["a"];a["a"].prototype.$eventBus=j;var U=j;y.a.defaults.baseURL=D.base_url,y.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",y.a.defaults.timeout=D.timeout;var R=1,F={RETRY:0,CYCLE:1,WAIT:100,REQUEST:101,COMPELETED:102,SLEEP:103,DESTROY:999},H=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g["a"])(this,t),this.url=e,this.state=F.WAIT,this.cancelSource=null,this.timer={};var a=s.data,i=void 0===a?null:a,n=s.opts,o=void 0===n?{}:n,r=s.success,c=s.fail,l=s.complet;this.data=i,this.opts=Object.assign({cancel:!0,retry:!1,delay:1e3,sleep:!1,lock:!1,cycle:0},o),this.opts.cycle>0&&(this.opts.retry=!1!==o.retry),this.success=r,this.fail=c,this.complet=l}return Object(_["a"])(t,[{key:"isWait",value:function(){return this.state<=F.WAIT}},{key:"isRequesting",value:function(){return this.state===F.REQUEST}},{key:"isSleep",value:function(){return this.state===F.SLEEP}},{key:"_request",value:function(){var t=this;this.state=F.REQUEST;var e={};this.opts.lock&&(this.opts.lockId=R++,e.lock=!0,e.lockId=this.opts.lockId),this.opts.cancel&&(this.cancelSource=G.cancelSource(),e.cancelToken=this.cancelSource.token),G.post(this.url,this.data,e).then(function(e){t.state!==F.DESTROY&&(t.opts.sleep?t.state=F.SLEEP:t.opts.cycle>0&&(t.state=F.CYCLE,t.timer=setTimeout(function(){return t._request()},t.opts.cycle)),t.state=F.WAIT,t.success&&t.success(e,t.data))},function(e){t.state!==F.DESTROY&&(t.opts.retry?(t.state=F.RETRY,t.timer=setTimeout(function(){return t._request()},t.opts.delay)):t.state=F.WAIT,t.state=F.WAIT,t.fail&&t.fail(e))}).then(function(){t.state!==F.DESTROY&&(t.cancelSource=null,t.complet&&t.complet())})}},{key:"_clearTimer",value:function(){clearTimeout(this.timer)}},{key:"request",value:function(t){return this.isWait()&&(t&&(this.data=t),this._clearTimer(),this._request()),this}},{key:"awaken",value:function(){return this.isSleep()&&(this.state=F.WAIT),this}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"destroy";this.state=F.DESTROY,this.isRequesting()&&(this.opts.lock&&U.$emit(r,this.opts.lockId),this.opts.cancel&&(this.cancelSource.cancel(t),this.cancelSource=null)),this._clearTimer()}}]),t}(),B=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g["a"])(this,t),this.url=e,this.props=s,this.httpPost=null}return Object(_["a"])(t,[{key:"_getHttpPost",value:function(){return this.httpPost||(this.httpPost=new H(this.url,this.props)),this.httpPost}},{key:"_destoryHttpPost",value:function(t){this.isRequesting()&&(this.httpPost.destroy(t),this.httpPost=null)}},{key:"isWait",value:function(){return null===this.httpPost||this.httpPost.isWait()}},{key:"isRequesting",value:function(){return null!==this.httpPost&&this.httpPost.isRequesting()}},{key:"isSleep",value:function(){return null!==this.httpPost&&this.httpPost.isSleep()}},{key:"request",value:function(t){return this._getHttpPost().request(t),this}},{key:"force",value:function(t){return this._destoryHttpPost("force"),this.request(t),this}},{key:"setUrl",value:function(t){return this._destoryHttpPost("url changed"),this.url=t,this.httpPost&&(this.httpPost.url=t),this}},{key:"setOpts",value:function(t){return this.props.opts=Object.assign(this.props.opts,t),this.httpPost&&(this.httpPost.opts=Object.assign(this.httpPost.opts,t)),this}},{key:"awaken",value:function(){return this.isSleep()&&this.httpPost.awaken(),this}},{key:"cancel",value:function(){return this._destoryHttpPost(),this}}]),t}();function q(t){607===t&&console.log("token invalid")}var G={post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log(t,e,s),s.lock&&(s.lockId=s.lockId||R++,U.$emit(o,s.lockId)),new Promise(function(a,i){y.a.post(t,e,s).then(function(t){s.lock&&U.$emit(r,s.lockId);var e=t.data.code;200===e?a(t.data):(q(e),i(t.data))},function(t){s.lock&&U.$emit(r,s.lockId),t.response?i({code:-999,message:"Server error ".concat(t.response.status)}):t.request?i({code:-1e3,message:t.message}):i({code:-1001,message:t.message||"unknown"})})})},cancelSource:function(){return y.a.CancelToken.source()},createPost:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new B(t,e)},uploadFile:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new FormData;return a.append("file",e),s.headers={"Content-Type":"multipart/form-data"},this.post(t,e,s)},createLockId:function(){return R++}};a["a"].prototype.$http=G;var W,z,J=G;a["a"].use(m["a"]);var V=window.localStorage.getItem("smart_campus__user");V&&(V=JSON.parse(V));var Y="SET_RUNTIME_MODE",Z="CLEAR",Q="UPDATE_RELATED_FIGURES",K="UPDATE_USER",X={};function tt(t,e){return X[t]||(X[t]=J.createPost(t,e)),X[t]}function et(){for(var t in X)X[t].cancel();X={}}var st={runtimmeMode:"normal",user:V,isLogined:!!V,figures:[]},at={getFigure:function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.id;switch(e.mode){case"parent":return t.figures.find(function(t){return t.studentId===s});case"staff":return t.figures.find(function(t){return t.token===s});default:return null}}}},it=(W={},Object(p["a"])(W,f,function(t,e){t.user=e,t.isLogined=!0,window.localStorage.setItem("smart_campus__user",JSON.stringify(e))}),Object(p["a"])(W,v,function(t){t.user=null,t.isLogined=!1,window.localStorage.removeItem("smart_campus__user")}),Object(p["a"])(W,Z,function(t){t.figures=[],t.runtimmeMode="normal",et()}),Object(p["a"])(W,Q,function(t,e){t.figures=e}),Object(p["a"])(W,Y,function(t,e){t.runtimmeMode=e}),Object(p["a"])(W,K,function(t,e){console.log(e),t.user&&(Object.assign(t.user,e),window.localStorage.setItem("smart_campus__user",JSON.stringify(t.user)))}),W),nt=(z={},Object(p["a"])(z,f,function(t,e){var s=t.commit,a=t.dispatch;s(Z),s(f,e),a("updateRelatedFigures")}),Object(p["a"])(z,v,function(t){var e=t.commit;e(Z),e(v)}),Object(p["a"])(z,"updateRelatedFigures",function(t){var e=t.state,s=t.commit;if(e.user)switch(e.user.mode){case"parent":tt("parent/children",{data:{token:e.user.token},opts:{retry:!0},success:function(t){return s(Q,t.data)}}).request();break;case"staff":s(Q,[e.user]);break;default:break}}),Object(p["a"])(z,"setRuntimeMode",function(t,e){var s=t.commit;s(Y,e)}),Object(p["a"])(z,"updateUser",function(t){var e=t.commit;if(st.user){var s;switch(st.user.mode){case"parent":s=tt("parent/info",{opts:{retry:!0},success:function(t){return e(K,t.data)}});break;case"staff":s=tt("staff/info",{data:{token:st.user.token},opts:{retry:!0},success:function(t){return e(K,t.data)}});break;default:return}s.request({token:st.user.token})}}),z),ot=new m["a"].Store({state:st,getters:at,mutations:it,actions:nt,modules:{}});ot.state.isLogined&&(ot.dispatch("updateRelatedFigures"),ot.dispatch("updateUser"));var rt=ot,ct=(s("7f7f"),s("8c4f")),lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-login"},[s("div",{staticClass:"l-form",class:{"p-login__logo_wrapper":t.isHomeMode,"p-login__sign_wrapper":!t.isHomeMode}},[t.isHomeMode?s("div",[t._m(0),s("div",{staticClass:"p-login__school"},[t._v("C D N I S")]),s("div",{staticClass:"p-login__tip"},[t._v(t._s(t.$t("welcome")))]),s("router-link",{staticClass:"p-login__button",attrs:{to:{params:{mode:"parent"}},replace:""}},[t._v(t._s(t.$t("login.sign")))])],1):s("div",{staticClass:"t-white"},[s("div",{staticClass:"p-login__header"},[s("router-link",{staticClass:"p-login__back",attrs:{to:{name:"login"},replace:""}},[t._v("X")])],1),s("div",{staticClass:"p-login__nav"},[s("router-link",{staticClass:"o-fixed-tab--white",class:{"is-active":t.isParentMode},attrs:{to:{params:{mode:"parent"}},replace:""}},[t._v(t._s(t.$t("login.parents")))]),s("router-link",{staticClass:"o-fixed-tab--white",class:{"is-active":t.isStaffMode},attrs:{to:{params:{mode:"staff"}},replace:""}},[t._v(t._s(t.$t("login.teachers")))])],1),t.isStaffMode?s("div",[s("form-field",{attrs:{label:t.$t("login.account"),placeholder:t.$t("login.accountPlaceholder")},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),s("form-field",{attrs:{type:"password",label:t.$t("common.pwd")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):s("div",[s("form-field",{staticClass:"c-form-field--select",attrs:{label:t.$t("sms.phone"),placeholder:t.$t("login.phonePlaceholder")},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[s("area-code",{on:{change:t.pick}})],1),t.usePwd?s("form-field",{attrs:{type:"password",label:t.$t("common.pwd")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):s("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode")},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[s("sms",{attrs:{mobile:t.mobile,areaCode:t.areaCode}})],1)],1),s("div",{staticClass:"u-clearfix"},[t.usePwd?s("router-link",{staticClass:"p-login__forget u-underline",attrs:{to:{name:"pre-reset-pwd",params:{mode:t.isParentMode?"parent":"staff"}}}},[t._v(t._s(t.$t("login.forget")))]):t._e(),s("div",{staticClass:"o-button o-button--submit",class:{"is-active":t.isValid},on:{click:t.sign}},[t._v(t._s(t.$t("login.sign")))])],1),s("div",{staticClass:"p-login__error"},[t._v(t._s(t.error))]),!t.isFirst&&t.isParentMode?s("div",{staticClass:"u-align-c p-login__toggle-tip"},[s("div",{staticClass:"u-underline",on:{click:t.toggleLoginMode}},[t._v(t._s(t.toggleTip))])]):t._e()])])])},dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-login__logo"},[s("div",{staticClass:"p-login__logo_icon"})])}],ut=s("be94"),ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.error,"is-active":t.isFocused}},[s("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.label))]),s("div",{staticClass:"c-form-field__input_wrapper"},[s("input",{staticClass:"c-form-field__input",attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1}}}),t._t("default")],2),s("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.text))])])},pt=[],mt={name:"form-field",props:{type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},error:{type:String,default:""},tip:{type:String,default:""},value:{type:String,default:""}},data:function(){return{isFocused:!1}},computed:{text:function(){return this.error||this.tip}}},ft=mt,vt=Object(d["a"])(ft,ht,pt,!1,null,null,null);vt.options.__file="FormField.vue";var gt=vt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-form-field__button",class:{"is-active":t.isShowPicker},on:{click:t.showPicker}},[t._v("\n  "+t._s(t.areaCode)+"\n  "),t.isShowPicker?s("picker",{attrs:{values:t.regins,index:t.pickerIndex,title:t.$t("login.picker")},on:{change:t.pick,cancel:t.cancel,confirm:t.confirm}}):t._e()],1)},bt=[],yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-picker",class:{"is-still":t.isStill},on:{click:t.cancel}},[s("div",{staticClass:"c-picker__wrapper",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"c-picker__choose"},[s("span",{staticClass:"c-picker__cancel",on:{click:t.cancel}},[t._v(t._s(t.cancelTxt))]),s("span",{staticClass:"c-picker__confirm",on:{click:t.confirm}},[t._v(t._s(t.confirmTxt))]),s("div",{staticClass:"c-picker__title",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.title))])]),s("div",{ref:"wrapper",staticClass:"c-picker__wheel_wrapper",style:t.getWrapperStyle},[s("ul",{ref:"wheel",staticClass:"c-picker__wheel",style:t.getWheelStyle},[t._t("default",t._l(t.scrollValues,function(e,a){return s("li",{key:a,staticClass:"c-picker__item",class:{"is-active":t.selectedIndex===a}},[t._v("\n            "+t._s(e.value)+"\n          ")])}))],2),s("div",{staticClass:"c-picker__divider",style:t.getDividerStyle}),s("div",{staticClass:"c-picker__cover",style:t.getCoverStyle})])])])},Ct=[],kt=(s("ac6a"),s("c5f6"),s("1fba")),wt=s("a925"),$t={welcome:"Welcome to the Canadian International School of Hong Kong",picker:{title:"Picker"},common:{next:"Next",save:"Save",cancel:"Cancel",done:"Done",confirm:"Confirm",loading:"loading...",retry:"Abnormal, click Retry",empty:"No Data",pwd:"Password",open:"Open",teacher:"Teacher: "},state:{unbind:"Not Bound",connecting:"",connected:"Connected",unconnected:"Not Connected"},relationship:{son:"Son",daughter:"Daughter"},pullUp:{loading:"Pull Up Loading",more:"Load More",finished:"No More Data"},pwdErr:{error:"Password error",tooLong:"Password requires at most 16 characters",tooShort:"Password requires at lease 8 characters",notMatch:"The password you typed do not match",format:"Format error"},record:{0:"None",1:"Arrived at school",2:"Leave school",3:"On the bus home",4:"get off the bus home",5:"Attend class",6:"Class is over",7:"Toast",bus:"View bus information"},sms:{phone:"Phone Number",vCode:"Enter Verification Code",send:"Send Code",countdown:"Resend({count})"},login:{parents:"PARENTS",teachers:"TEACHERS",account:"User name",accountPlaceholder:"Enter Staff ID",phonePlaceholder:"Enter Phone Number",sign:"Sign in",forget:"Forget Password",usePwd:"Use password to log in",useVCode:"Use SEM verification code to log in",picker:"Choose region"},resetPwd:{title:"Reset Password"},setPwd:{title:"Set Password",tip:"Input 6-18 characters by letters, numbers and symbols",oldPwd:"Old Password",newPwd:"New Password"},bind:{title:"Binding to a Bracelet",tip:"Each bracelet can only bind to one user. Please choose the child to bind.",again:"Please choose anthoer child to bind to.",success:"Bracelet bound successfully!",failure:"Binding failed!",failTip:"Please confirm that hte effective connection distance between the bracelet and the mobile phone is not too far. If it fails several timmes, please contact customer service."},unbind:{title:"Unbind",tip:"You would not receive any data from the bracelet after unbinding."},scan:{title:"Scan Bracelet QR Code",tip:"Please scan the QR code on the bracelet package.",scan:"Scan"},home:{menu:{bracelet:"Bracelet",account:"Account Information",kids:"My Children",password:"Password",setting:"Setting",faq:"FAQ",about:"About",logout:"Exit Login"},toast:{bluetooth:"Please turn on the bluetooth.",bracelet:"No bracelet is bound.",bus:"Click here to associate bus info."},timeline:{title:"Today",empty:"None"},teacher:{level1:"Teacher",level2:"Homeroom Teacher",level3:"Admin",unknown:"Unknown"},attendance:{supplement:"Attendance",arrived:"ARRIVED",belong:"{gradeLevel},{classId}"},parent:{name:"{0} {1} {2}"},staff:{name:"Hi, {name}"},motion:{title:"Motion",tip:"Today's Steps",unit:"Steps"}},history:{title:"Sign -In History",today:"Today",yesterday:"Yesterday"},attendanceType:{teacher:"Teacher",student:"Student"},schoolType:{1:"Lower School",2:"Middle School",3:"Upper School",4:"High School"},attendance:{title:"Attendance",teacher:"Teacher Attendance",student:"Student Attendance",arrived:"ARRIVED",supplement:"Attendance",belong:"{gradeLevel},{classId}",total:"TOTAL",history:"Attendance History"},motion:{title:"Steps",today:"Today",unit:"Step",weekly:"WEEKLY",monthly:"MONTHLY"},bracelet:{bind:"Bind",unbind:"Unbind",retry:"Try Again"},account:{id:"Staff id",relationship:"Relationship",phone:"Phone Number",email:"Email",student:"Student ID",bus:"Bus Student ID"},bus:{tip:"Please fill in bus student ID from the bus company's invoice"},email:{placeholder:"New Email"},setting:{voice:"Voice",notice:"Notice",language:"Language"},mobile:{title:"Phone Number",current:"Current mobile phone number",warning:"When the parents change the phone number, the login account will also change.",tip:"The number can be changed only after unbinding the original mobile phone.",change:"Change",oldPhoneNumber:"Old Phone Number",newPhoneNumber:"New Phone Number",oldEmail:"Old Email",tab:{phone:"PHONE",email:"EMAIL"}},bluetooth:{title:"Connect Bluetooth",tip:"Please turn on Bluetooth on your mobile phone.",iosUp:"Android opens directly,",iosDown:"IOS opens through mobile settings.",how:"How to open it?"},signIn:{title:"Sign-in Information",normal:"Attendance",abnormal:"Absence"},signInType:{1:"Attendance",2:"Manual check-in",3:"On leave"},format:{date:"{week},{month}.{day},{year}",classInfo:"{gradeLevel},{classId}",classInfo2:"{gradeLevel}-{classId}","year-month":"{month}.{year}","month-day":"{month}.{day}"}},St={welcome:"歡迎來到加拿大國際學校。",picker:{title:"拾取器"},common:{next:"下一步",save:"Save",cancel:"取消",done:"完成",confirm:"確認",loading:"加載中...",retry:"發生異常，請點擊重試",empty:"暫無數據",pwd:"密碼",open:"打開",teacher:"老師："},state:{unbind:"未綁定",connecting:"",connected:"已連接",unconnected:"未連接"},relationship:{son:"兒子",daughter:"女兒"},pullUp:{loading:"加載中",more:"加載更多",finished:"無更多數據"},pwdErr:{error:"密碼錯誤",tooLong:"密碼至多輸入16個字符",tooShort:"密碼至少需要8個字符",notMatch:"您輸入的密碼不匹配",format:"格式錯誤"},record:{0:"無",1:"抵達學校",2:"離開學校",3:"坐上放學校車",4:"下了放學校車",5:"Attend class",6:"Class is over",7:"Toast",bus:"查看校車信息"},sms:{phone:"手機號碼",vCode:"輸入驗證碼",send:"發送驗證碼",countdown:"重發({count})"},login:{parents:"家長",teachers:"老師",account:"用戶名",accountPlaceholder:"輸入員工ID",phonePlaceholder:"輸入電話號碼",sign:"登入",forget:"忘記密碼",usePwd:"使用密碼登錄",useVCode:"使用驗證碼登錄",picker:"選擇 地區"},resetPwd:{title:"重設密碼"},setPwd:{title:"設置密碼d",tip:"輸入包含字母，數字和符號的6-18個字符",oldPwd:"舊密碼",newPwd:"新密碼"},bind:{title:"綁定手環",tip:"每個手環只能綁定到一個用戶，請選擇要綁定的孩子。",again:"請選擇另一個要綁定的孩子。",success:"手環綁定成功！",failure:"綁定失敗！",failTip:"請確認手環與手機之間的有效連接距離不是太遠。如果多次失敗，請聯繫客服。"},unbind:{title:"解除綁定",tip:"解除綁定後，您再不會從手環中收到任何數據。"},scan:{title:"掃描手環二維碼",tip:"請掃描手環包裝盒上的二維碼。",scan:"掃描"},home:{menu:{bracelet:"手環",account:"賬戶信息",kids:"我的孩子",password:"密碼",setting:"設置",faq:"常見問題",about:"關於",logout:"退出登錄"},toast:{bluetooth:"請打開手機上的藍牙功能。",bracelet:"沒有手環綁定。",bus:"點擊關聯校車信息。"},timeline:{title:"今日",empty:"無 "},teacher:{level1:"老師",level2:"家庭教師",level3:"管理員",unknown:"未知"},attendance:{supplement:"出席",arrived:"到校",belong:"{gradeLevel},{classId}"},parent:{name:"{0} {1} {2}"},staff:{name:"您好, {name}"},motion:{title:"運動",tip:"今日步數",unit:"步"}},history:{title:"簽到歷史",today:"今日",yesterday:"昨日"},attendanceType:{teacher:"老師",student:"學生"},schoolType:{1:"低年級學校",2:"初中",3:"高中",4:"中學"},attendance:{title:"出席",teacher:"老師出席",student:"學生出席",supplement:"出席",arrived:"到校",total:"總計",history:"出勤历史"},motion:{title:"步數",today:"今日",unit:"步",weekly:"本週",monthly:"本月"},bracelet:{bind:"綁定",unbind:"解除綁定",retry:"再試一次"},account:{id:"員工ID",relationship:"關係",phone:"手機號碼",email:"郵箱",student:"學生ID",bus:"校車學生ID"},bus:{tip:"可從校車公司的單據上找出"},email:{placeholder:"新郵箱"},setting:{voice:"聲音",notice:"通知",language:"語言"},mobile:{title:"手機",current:"當前手機號碼",warning:"當更改手機號碼時，登錄賬戶也將修改。",tip:"只有在取消本來手機的綁定後才能更改該號碼",change:"更改",oldPhoneNumber:"舊手機號碼",newPhoneNumber:"新手機號碼",oldEmail:"舊郵箱",tab:{phone:"手機",email:"郵箱"}},bluetooth:{title:"連接藍牙",tip:"請打開手機上的藍牙。",iosUp:"Android可以直接打開，",iosDown:"IOS可通過移動設置打開。",how:"怎麼打開它？"},signIn:{title:"簽到信息",normal:"出席",abnormal:"缺席",state:"状态"},signInType:{1:"出席",2:"人工簽到",3:"請假"},format:{date:"{week},{month}.{day},{year}",classInfo:"{gradeLevel},{classId}",classInfo2:"{gradeLevel}-{classId}","year-month":"{year}.{month}","month-day":"{month}.{day}"}};a["a"].use(wt["a"]);var Pt={en:{week:{weekday:"short"},month:{month:"short"}},"zh-hk":{week:{weekday:"short"},month:{month:"narrow"}}},At=new wt["a"]({locale:window.localStorage.getItem("locale")||"en",dateTimeFormats:Pt,messages:{en:$t,"zh-hk":St}}),xt=At,Tt=[{key:"en",text:"English"},{key:"zh-hk",text:"繁體中文（香港）"}],It={name:"picker",props:{values:{type:Array,require:!0,default:function(){return[]}},index:{type:Number,default:0},title:{type:String,default:function(){return xt.t("picker.title")}},cancelTxt:{type:String,default:function(){return xt.t("common.cancel")}},confirmTxt:{type:String,default:function(){return xt.t("common.done")}},acceleration:{type:Number,default:-.003},radius:{type:Number,default:100},lineHeight:{type:Number,default:34},cycle:{type:Boolean,default:!1}},data:function(){return{isStill:!0,selectedIndex:0}},computed:{length:function(){return this.values.length},scrollValues:function(){return this.values.map(function(t,e){return{value:t,index:e}})},getWrapperStyle:function(){return{height:"".concat(2*this.radius,"px")}},getWheelStyle:function(){return{marginTop:"".concat(this.radius-Math.round(this.lineHeight/2),"px")}},getCoverStyle:function(){return{backgroundSize:"100% ".concat(this.radius-Math.round(this.lineHeight/2),"px")}},getDividerStyle:function(){return{top:"".concat(this.radius-Math.round(this.lineHeight/2),"px"),height:"".concat(this.lineHeight-2,"px")}}},methods:{initWheel:function(){var t=this;this.length>0&&(this.$wheel=new kt["a"](this.$refs.wrapper,{wheel:{selectedIndex:0,rotate:30,wheelWrapperClass:"c-picker__wheel",wheelItemClass:"c-picker__item"},swipeTime:500,probeType:3}),this.$wheel.wheelTo(this.index),this.$wheel.on("scrollStart",function(){t.isStill=!1}),this.$wheel.on("scrollEnd",function(){t.isStill=!0,t.selectedIndex=t.$wheel.getSelectedIndex(),t.$emit("change",t.selectedIndex)}))},cancel:function(){this.$emit("cancel")},confirm:function(){this.$emit("confirm",this.$wheel.getSelectedIndex())}},watch:{values:function(){var t=this;this.$nextTick(function(){t.$wheel?t.$wheel.refresh():t.initWheel()})}},mounted:function(){this.initWheel()},beforeDestory:function(){this.$wheel&&this.$wheel.destroy()}},Ot=It,Mt=(s("ac30"),Object(d["a"])(Ot,yt,Ct,!1,null,null,null));Mt.options.__file="Picker.vue";var Nt=Mt.exports,Et=[],Lt={name:"area-code",components:{picker:Nt},data:function(){return{isShowPicker:!1,pickerIndex:0,index:0,areas:Et}},computed:{areaCode:function(){return this.areas.length>0?"+".concat(this.areas[this.index].areaCode):""},regins:function(){return this.areas.map(function(t){return"".concat(t.areaName,"(+").concat(t.areaCode,")")})}},methods:{showPicker:function(){this.areas.length>0?this.isShowPicker||(this.isShowPicker=!0):this.$httpPost.request()},pick:function(t){this.pickerIndex=t},cancel:function(){this.pickerIndex=this.index,this.isShowPicker=!1},confirm:function(){this.index=this.pickerIndex,this.notify(),this.isShowPicker=!1},notify:function(){this.$emit("change",this.areas[this.index].areaCode)}},created:function(){var t=this;0===this.areas.length?(this.$httpPost=this.$http.createPost("area/loadAll",{success:function(e){Et=e.data,t.areas=e.data,t.notify()}}),this.$httpPost.request()):this.notify()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Dt=Lt,jt=Object(d["a"])(Dt,_t,bt,!1,null,null,null);jt.options.__file="AreaCode.vue";var Ut=jt.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-form-field__button t-adapt-color",class:{"is-active":t.count>0},on:{click:t.send}},[t._v(t._s(t.msg))])},Ft=[],Ht={name:"sms",props:{mobile:{type:String},areaCode:{type:String},email:{type:String},mode:{type:Number,default:0}},data:function(){return{count:0}},computed:{msg:function(){return this.count>0?this.$t("sms.countdown",{count:this.count}):this.$t("sms.send")},url:function(){switch(this.mode){case 0:return"common/smscode/send";case 1:return"common/email/send";default:return null}}},methods:{cacnel:function(){-1!==this.timer&&(this.count=0,clearInterval(this.timer),this.timer=-1),this.$httpPost&&this.$httpPost.cancel()},send:function(){var t=this;this.mobile&&this.areaCode&&(!this.$httpPost&&this.url&&(this.$httpPost=this.$http.createPost(this.url,{opts:{sleep:!0},fail:function(){t.count>0&&(t.count=0,clearInterval(t.timer),t.timer=-1)}})),this.$sendCodePost.isWait()&&(this.count=60,this.timer=setInterval(function(){t.count-=1,0===t.count&&(clearInterval(t.timer),t.timer=-1,t.$httpPost.awaken())},1e3),this.$httpPost.request({mobile:this.mobile,areaCode:this.areaCode})))}},watch:{mode:function(){this.cacnel()}},beforeDestroy:function(){this.cacnel()}},Bt=Ht,qt=Object(d["a"])(Bt,Rt,Ft,!1,null,null,null);qt.options.__file="Sms.vue";var Gt=qt.exports,Wt={HOME:0,PARENT:1,STAFF:2},zt={name:"login",components:{formField:gt,areaCode:Ut,sms:Gt},data:function(){return{isFirst:!1,mode:Wt.HOME,requestMode:Wt.HOME,signMode:0,areaCode:"",mobile:"",vCode:"",account:"",password:"",error:""}},computed:{isParentMode:function(){return this.mode===Wt.PARENT},isStaffMode:function(){return this.mode===Wt.STAFF},isHomeMode:function(){return this.mode===Wt.HOME},usePwd:function(){return!this.isFirst&&0===this.signMode||this.mode===Wt.STAFF},toggleTip:function(){return this.usePwd?this.$t("login.useVCode"):this.$t("login.usePwd")},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},isValid:function(){return this.usePwd?(this.isParentMode?this.mobileVal:this.account)&&this.password:this.mobileVal&&this.vCode}},methods:Object(ut["a"])({},Object(m["b"])(["setRuntimeMode"]),{setMode:function(t){switch(t){case"parent":t=Wt.PARENT,this.$httpPost&&this.$http.setUrl("parent/login");break;case"staff":t=Wt.STAFF,this.$httpPost&&this.$http.setUrl("staff/login");break;default:t=Wt.HOME;break}if(this.mode!==t){switch(this.mode){case Wt.PARENT:this.mobile="",this.vCode="",this.password="";break;case Wt.STAFF:this.account="",this.password="";break;default:break}this.stopLogin(),this.mode=t}},toggleLoginMode:function(){this.usePwd?this.password="":this.vCode="",this.stopLogin(),this.signMode=0===this.signMode?1:0},stopLogin:function(){this.error="",this.$httpPost&&this.$httpPost.cancel()},toSetPassword:function(t,e){this.$router.push({name:"set-pwd",params:{mode:t,token:e}})},changeRuntimmeMode:function(t){this.setRuntimeMode(t?"boot":"normal")},sign:function(){var t=this;if(this.isValid)switch(this.error="",this.requestMode=this.mode,this.$httpPost||(this.$httpPost=this.$http.createPost(this.isParentMode?"parent/login":"staff/login",{opts:{lock:!0},success:function(e){var s=t.requestMode===Wt.PARENT?"parent":"staff";window.localStorage.setItem("hasLoggedIn","true"),e.data.mode=s,t.$store.dispatch(f,e.data),t.changeRuntimmeMode(1===e.data.isFirstLogin?"boot":"normal"),1===e.data.isFirstLogin?t.toSetPassword(s,e.data.token):t.$router.push({name:"home",params:{mode:s}})},fail:function(e){t.error=e.message}})),this.mode){case Wt.PARENT:this.$httpPost.request({account:this.mobileVal,passCode:this.usePwd?this.password:this.vCode,type:this.usePwd?1:2});break;case Wt.STAFF:this.$httpPost.request({account:this.account,password:this.password});break;default:break}},pick:function(t){this.areaCode=t}}),beforeRouteUpdate:function(t,e,s){this.setMode(t.params.mode),s()},created:function(){this.isFirst=!window.localStorage.getItem("hasLoggedIn"),this.setMode(this.$route.params.mode)},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Jt=zt,Vt=(s("6ba9"),Object(d["a"])(Jt,lt,dt,!1,null,null,null));Vt.options.__file="Login.vue";var Yt=Vt.exports,Zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-form c-modify"},[s("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("resetPwd.title")))]),s("form-field",{staticClass:"c-form-field--select",attrs:{label:t.$t("sms.phone")},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[s("area-code",{on:{change:t.pick}})],1),s("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode")},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[s("sms",{attrs:{mobile:t.mobile,areaCode:t.areaCode}})],1),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)},Qt=[],Kt={name:"pre-set-pwd",components:{formField:gt,areaCode:Ut,sms:Gt},data:function(){return{areaCode:"",mobile:"",vCode:"",error:""}},computed:{isValid:function(){return this.areaCode&&this.mobile&&this.vCode}},methods:{next:function(){var t=this;this.isValid&&(this.error="",this.$httpPost||(this.$httpPost=this.$http.createPost("staff/preModify",{data:{mobile:this.areaCode+this.mobile,vCode:this.vCode},opts:{lock:!0},success:function(e){t.$router.replace({name:t.$route.params.next||"reset-pwd",params:{mode:t.$route.params.mode,token:e.data.token}})},fail:function(e){t.error=e.message}})),this.$httpPost.request())},pick:function(t){this.areaCode=t}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Xt=Kt,te=Object(d["a"])(Xt,Zt,Qt,!1,null,null,null);te.options.__file="PreSetPwd.vue";var ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-form c-modify"},[s("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("setPwd.title")))]),s("form-field",{attrs:{label:t.$t("common.pwd"),tip:t.$t("setPwd.tip"),error:t.passwordErr},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("form-field",{attrs:{label:t.$t("common.confirm"),error:t.confirmPasswordErr},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)},ae=[],ie={name:"set-pwd",components:{formField:gt},data:function(){return{password:"",confirmPassword:"",passwordErr:"",confirmPasswordErr:"",error:""}},computed:Object(ut["a"])({},Object(m["c"])(["runtimmeMode"]),{token:function(){return this.$route.params.token},isValid:function(){return this.password&&this.confirmPassword}}),methods:{save:function(){var t=this;if(this.isValid){if(this.error="",this.password.length<8)return this.passwordErr=this.$t("pwdErr.tooShort"),void(this.confirmPasswordErr="");if(this.password.length>16)return this.passwordErr=this.$t("pwdErr.tooLong"),void(this.confirmPasswordErr="");if(!/(?=.*[a-z])(?=.*\d)(?=.*[#@!?~%^&*])[a-z\d#@!?~%^&*]/.test(this.password))return this.passwordErr=this.$t("pwdErr.format"),void(this.confirmPasswordErr="");this.passwordErr="",this.confirmPassword===this.password?(this.confirmPasswordErr="",this.$httpPost||(this.$httpPost=this.$http.createPost("parent"===this.$route.params.mode?"parent/password/modify":"staff/password/modify",{opts:{lock:!0},success:function(){switch(t.runtimmeMode){case"boot":t.$router.replace({name:"bind",params:{mode:t.$route.params.mode}});break;default:t.$router.back();break}},fail:function(e){t.error=e.message}})),this.$httpPost.request({token:this.token,password:this.password})):this.confirmPasswordErr=this.$t("pwdErr.notMatch")}}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},ne=ie,oe=Object(d["a"])(ne,se,ae,!1,null,null,null);oe.options.__file="ResetPwd.vue";var re=oe.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view",{class:t.modeClass})},le=[],de={name:"wrapper",computed:{modeClass:function(){return"parent"===this.$route.params.mode?"t-parent":"t-staff"}}},ue=de,he=Object(d["a"])(ue,ce,le,!1,null,null,null);he.options.__file="Wrapper.vue";var pe=he.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"l-operation p-bind"},[a("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("bind.title")))]),a("div",{staticClass:"l-operation__header"},[t._v(t._s(t.tip))]),a("div",{staticClass:"l-operation__content u-align-c"},[a("img",{staticClass:"p-bind__img",attrs:{src:s("5b4d")}}),a("div",{staticClass:"p-bind__list"},t._l(t.unbindFigures,function(e,s){return a("div",{key:e.id,staticClass:"p-bind__item p-bind__item--toggle",class:{"is-active":s===t.index,"c-solid-avatar--boy":1===e.relationship,"c-solid-avatar--girl":2===e.relationship},on:{click:function(e){t.toggle(s)}}},[a("div",{staticClass:"c-solid-avatar__icon",style:{backgroundImage:"url("+e.headUrl}}),a("div",{staticClass:"p-bind__name"},[t._v(t._s(e.lastName))])])}))]),a("div",{staticClass:"l-operation__footer"},[a("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),a("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.toBind}},[t._v(t._s(t.$t("bracelet.bind")))])])])},fe=[],ve={name:"bind-choosen",data:function(){return{index:-1,state:"bind"}},computed:Object(ut["a"])({},Object(m["c"])(["figures"]),{mode:function(){return this.$route.params.mode},isStaff:function(){return"staff"===this.mode},unbindFigures:function(){return this.figures.filter(function(t){return 0===t.braceletOfBinding})},has:function(){return this.figures.length>0},tip:function(){return"again"===this.$route.params.type?this.$t("bind.again"):this.$t("bind.tip")}}),methods:{toggle:function(t){this.index===t?this.index=-1:this.index=t},cancel:function(){this.$router.replace({name:"home"})},toBind:function(){this.index>=0&&this.$router.replace({name:"scan",params:{id:this.isStaff?this.unbindFigures[this.index].token:this.unbindFigures[this.index].studentId}})},check:function(){return 0===this.unbindFigures.length?(this.cancel(),!0):1===this.figures.length&&(this.index=0,this.toBind(),!0)}},watch:{has:function(t){t&&this.check()}},created:function(){this.has&&this.check()}},ge=ve,_e=(s("2b11"),Object(d["a"])(ge,me,fe,!1,null,null,null));_e.options.__file="BindChoosen.vue";var be=_e.exports,ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation p-bind-success"},[s("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("bind.title")))]),s("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("bind.success")))]),s("div",{staticClass:"l-operation__content u-align-c"},[s("div",{staticClass:"p-bind-success__img"},[s("div",{staticClass:"p-bind-success__avatar",class:{"c-solid-avatar":0===t.sex,"c-solid-avatar--boy":1===t.sex,"c-solid-avatar--girl":2===t.sex}},[t.figure?s("div",{staticClass:"c-solid-avatar__icon",style:{backgroundImage:"url("+t.figure.headUrl}}):t._e()]),s("div",{staticClass:"p-bind-success__link"})])]),s("div",{staticClass:"l-operation__footer"},[s("div",{staticClass:"o-button t-adapt-button",on:{click:t.next}},[t._v(t._s(t.$t("common.confirm")))])])])},Ce=[],ke={name:"bind-success",data:function(){return{}},computed:Object(ut["a"])({},Object(m["c"])(["figures","runtimmeMode"]),{figure:function(){return this.$store.getters.getFigure(this.$route.params)},sex:function(){return this.figure&&this.figure.relationship||0}}),methods:{next:function(){switch(this.runtimmeMode){case"boot":1===this.figures.length?this.$router.replace({name:"home"}):this.$router.replace({name:"bind",params:{type:"again"}});break;default:this.$router.back();break}}}},we=ke,$e=(s("7578"),Object(d["a"])(we,ye,Ce,!1,null,null,null));$e.options.__file="BindSuccess.vue";var Se=$e.exports,Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation p-bind-failure"},[s("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("bind.title")))]),s("div",{staticClass:"p-bind-failure__error"},[t._v("\n    "+t._s(t.$t("bind.failure"))+"\n    "),s("div",{staticClass:"p-bind-failure__tip"},[t._v(t._s(t.$t("bind.failTip")))])]),s("div",{staticClass:"l-operation__content u-align-c"},[s("div",{staticClass:"p-bind-failure__img"},[s("div",{staticClass:"p-bind-failure__avatar",class:{"c-solid-avatar":0===t.sex,"c-solid-avatar--boy":1===t.sex,"c-solid-avatar--girl":2===t.sex}},[t.figure?s("div",{staticClass:"c-solid-avatar__icon",style:{backgroundImage:"url("+t.figure.headUrl}}):t._e()]),s("div",{staticClass:"p-bind-failure__link"})])]),s("div",{staticClass:"l-operation__footer"},[s("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),s("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.retry}},[t._v(t._s(t.$t("bracelet.retry")))])])])},Ae=[],xe={name:"bind-failure",computed:Object(ut["a"])({},Object(m["c"])(["runtimmeMode"]),{isStaff:function(){return"staff"===this.$route.params.mode},url:function(){return this.isStaff?"staff/bracelet/bind":"parent/bracelet/bind"},id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure(this.$route.params)},sex:function(){return this.figure&&this.figure.relationship||0}}),methods:{cancel:function(){switch(this.runtimmeMode){case"boot":this.$router.replace({name:"home"});break;default:this.$router.back();break}},retry:function(){var t=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.figure&&(t.figure.braceletOfBinding=1),t.$router.replace({name:"bind-success",params:{id:t.id}})}})),this.$httpPost.request(this.isStaff?{token:this.id,serialNum:"",macAddress:"",nfcId:""}:{idStudent:this.id,serialNum:"",macAddress:"",nfcId:""})}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Te=xe,Ie=(s("de91"),Object(d["a"])(Te,Pe,Ae,!1,null,null,null));Ie.options.__file="BindFailure.vue";var Oe=Ie.exports,Me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation p-scan"},[s("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("scan.title")))]),s("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("scan.tip")))]),t._m(0),s("div",{staticClass:"l-operation__footer"},[s("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),s("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.toScan}},[t._v(t._s(t.$t("scan.scan")))])])])},Ne=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation__content"},[s("div",{staticClass:"p-scan__img"})])}],Ee={name:"scan",data:function(){return{cancelSource:null}},computed:Object(ut["a"])({},Object(m["c"])(["figures","runtimmeMode"]),{isStaff:function(){return"staff"===this.$route.params.mode},url:function(){return this.isStaff?"staff/bracelet/bind":"parent/bracelet/bind"},id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure(this.$route.params)}}),methods:{cancel:function(){switch(this.runtimmeMode){case"boot":1===this.figures.length?this.$router.replace({name:"home"}):this.$router.replace({name:"bind"});break;default:this.$router.back();break}},toScan:function(){var t=this;jsNative.scan(),this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.figure&&(t.figure.braceletOfBinding=1),t.$router.replace({name:"bind-success",params:{id:t.id}})},fail:function(){t.$router.replace({name:"bind-failure",params:{id:t.id}})}})),this.$httpPost.request(this.isStaff?{token:this.id,serialNum:"",macAddress:"",nfcId:""}:{idStudent:this.id,serialNum:"",macAddress:"",nfcId:""})}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Le=Ee,De=(s("2271"),Object(d["a"])(Le,Me,Ne,!1,null,"71aab209",null));De.options.__file="Scan.vue";var je=De.exports,Ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation p-unbind"},[s("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("unbind.title")))]),s("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("unbind.tip")))]),s("div",{staticClass:"l-operation__content"},[s("div",{staticClass:"p-unbind__img"},[s("div",{staticClass:"p-unbind__avatar",class:{"c-solid-avatar":0===t.sex,"c-solid-avatar--boy":1===t.sex,"c-solid-avatar--girl":2===t.sex}},[t.figure?s("div",{staticClass:"c-solid-avatar__icon",style:{backgroundImage:"url("+t.figure.headUrl}}):t._e()]),s("div",{staticClass:"p-unbind__link"})])]),s("div",{staticClass:"l-operation__footer"},[s("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),s("div",{staticClass:"l-operation__button o-button o-button--prominent",on:{click:t.unbind}},[t._v(t._s(t.fail?t.$t("bracelet.retry"):t.$t("bracelet.unbind")))])])])},Re=[],Fe={name:"unbind",computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},url:function(){return this.isStaff?"staff/bracelet/unbind":"parent/bracelet/unbind"},id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure(this.$route.params)},sex:function(){return this.figure&&this.figure.relationship||0}}),methods:{cancel:function(){this.$router.back()},unbind:function(){var t=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.figure&&(t.figure.braceletOfBinding=0),t.cancel()}})),this.$httpPost.request(this.isStaff?{token:this.user.token}:{idStudent:this.id})}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},He=Fe,Be=(s("63bd"),Object(d["a"])(He,Ue,Re,!1,null,null,null));Be.options.__file="Unbind.vue";var qe=Be.exports,Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-home",class:{"has-side":t.showSide}},[t._m(0),s("div",{staticClass:"p-home__main"},[s("div",{staticClass:"p-home__shortcut"},[s("i",{staticClass:"p-home__menu",on:{click:function(e){t.showSide=!0}}}),s("i",{staticClass:"p-home__scan",on:{click:t.scan}})]),s("div",{staticClass:"p-home__header swiper-container",attrs:{id:"person-swiper"}},[s("div",{staticClass:"swiper-wrapper"},t._l(t.figures,function(e){return s("character-intro",{key:e.id,staticClass:"p-home__person swiper-slide",attrs:{mode:t.mode,person:e}})})),s("div",{staticClass:"swiper-pagination",attrs:{id:"person-pagination"}})]),t.toast?s("div",{staticClass:"p-home__toast p-home-toast",class:"p-home-toast--"+t.toast,on:{click:t.clickToast}},[t._v("\n      "+t._s(t.$t("home.toast."+t.toast))+"\n      "),s("div",{staticClass:"p-home-toast__icon",on:{click:function(e){return e.stopPropagation(),t.clickToastIcon(e)}}})]):t._e(),s("div",{staticClass:"p-home__section"},[s("div",{staticClass:"p-home-block"},[s("div",{staticClass:"p-home-block__header",on:{click:t.toHistory}},[s("span",{staticClass:"p-home-block__title"},[t._v(t._s(t.$t("home.timeline.title")))]),s("span",{staticClass:"p-home-block__tip"},[t._v(t._s(t.today))]),this.records.length>0?s("i",{staticClass:"p-home-block__arrow"}):t._e()]),s("div",{staticClass:"p-home-block__content"},[s("div",{staticClass:"c-timeline p-home-timeline"},t._l(t.timeline,function(e,a){return s("div",{key:a,staticClass:"c-timeline__point"},[s("div",{staticClass:"c-timeline__header"}),s("div",{staticClass:"c-timeline__tail"}),s("div",{staticClass:"c-timeline__content",class:"p-home-timeline__level"+a},[s("div",{staticClass:"c-timeline__time"},[t._v(t._s(e.time))]),s("div",{staticClass:"c-timeline__info"},[s("div",{staticClass:"c-timeline__row is-nowrap"},[t._v(t._s(t.$t("record."+e.type)))]),3===e.type?s("div",{staticClass:"c-timeline__row is-nowrap"},[s("div",{staticClass:"p-home-timeline__bus t-adapt-color"},[t._v(t._s(t.$t("record.bus")))])]):t._e()])])])}))])])]),t.isStaff?s(t.attendanceComponent,{tag:"component",staticClass:"p-home__section"}):t._e(),s("div",{staticClass:"p-home__section"},[s("div",{staticClass:"p-home-block"},[s("div",{staticClass:"p-home-block__header",attrs:{tag:"div"},on:{click:t.toMotion}},[s("span",{staticClass:"p-home-block__title"},[t._v(t._s(t.$t("home.motion.title")))]),s("i",{staticClass:"p-home-block__arrow"})]),s("div",{staticClass:"p-home-block__content"},[s("div",{staticClass:"p-home-steps u-clearfix"},[s("i",{staticClass:"p-home-steps__icon"}),s("div",{staticClass:"p-home-steps__tip"},[t._v(t._s(t.$t("home.motion.tip")))]),s("div",{staticClass:"p-home-steps__value"},[t._v(t._s(t.steps)),s("span",{staticClass:"p-home-steps__unit"},[t._v(t._s(t.$t("home.motion.unit")))])])])])])]),t.showSide?s("div",{staticClass:"p-home__mask",on:{click:function(e){t.showSide=!1},touchmove:function(t){t.stopPropagation(),t.preventDefault()}}}):t._e()],1)],1)},We=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("side-menu",{staticClass:"p-home__side",attrs:{user:t.user}})}],ze=(s("28a5"),s("41d6")),Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-side-menu"},[s("div",{staticClass:"c-side-menu__wrapper"},[s("div",{staticClass:"c-avatar"},[s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+t.user.headUrl}})]),s("div",{staticClass:"c-side-menu__name"},[t._v(t._s(t.user.lastName||t.user.userName))]),s("div",{staticClass:"c-side-menu__info"},[s("div",{staticClass:"c-side-menu__phone"},[s("i",{staticClass:"c-side-menu__icon--phone"}),t._v(t._s(t.user.mobile))]),s("div",{staticClass:"c-side-menu__email"},[s("i",{staticClass:"c-side-menu__icon--email"}),t._v(t._s(t.user.email))])]),s("ul",[s("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"bracelet"}}},[s("i",{staticClass:"c-side-menu__icon--bracelet"}),t._v(t._s(t.$t("home.menu.bracelet")))]),s("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"account"}}},[s("i",{staticClass:"c-side-menu__icon--account"}),t._v(t._s(t.$t("home.menu.account")))]),t.isStaff?t._e():s("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"children"}}},[s("i",{staticClass:"c-side-menu__icon--kids"}),t._v(t._s(t.$t("home.menu.kids")))]),s("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"pre-modify-pwd",params:{next:"modify"}}}},[s("i",{staticClass:"c-side-menu__icon--password"}),t._v(t._s(t.$t("home.menu.password")))]),s("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"setting"}}},[s("i",{staticClass:"c-side-menu__icon--setting"}),t._v(t._s(t.$t("home.menu.setting")))]),s("li",{staticClass:"c-side-menu__link",attrs:{tag:"li"}},[s("i",{staticClass:"c-side-menu__icon--faq"}),t._v(t._s(t.$t("home.menu.faq")))]),s("li",{staticClass:"c-side-menu__link"},[s("i",{staticClass:"c-side-menu__icon--about"}),t._v(t._s(t.$t("home.menu.about")))])],1),s("div",{staticClass:"c-side-menu__button o-button o-button--unwish",on:{click:t.logout}},[t._v(t._s(t.$t("home.menu.logout")))])])])},Ve=[],Ye={name:"side-menu",props:["user"],computed:{isStaff:function(){return"staff"===this.$route.params.mode}},methods:{logout:function(){this.$store.dispatch(v),this.$router.replace({name:"login"})}}},Ze=Ye,Qe=(s("01cb"),Object(d["a"])(Ze,Je,Ve,!1,null,null,null));Qe.options.__file="SideMenu.vue";var Ke=Qe.exports,Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("character-intro",{attrs:{person:t.intro}},[s("div",{staticClass:"c-bracelet-state"},[s("div",{staticClass:"c-bracelet-state__icon",class:{"has-unbind":0===t.state,"has-unconnected":1===t.state,"has-connected":2===t.state}}),s("div",{staticClass:"c-bracelet-state__label"},[t._v(t._s(t.stateTip))])])])},ts=[],es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-character-intro",class:{"c-character-intro--smaller":t.smaller}},[s("div",{staticClass:"c-character-intro__avatar",class:{"c-avatar--smaller":t.smaller,"c-avatar":!t.smaller}},[t.person?s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+t.person.headUrl}}):t._e()]),s("div",{staticClass:"c-character-intro__content"},[t.person?s("div",[s("div",{staticClass:"c-character-intro__row c-character-intro__wrapper"},[s("span",{directives:[{name:"overflow",rawName:"v-overflow"}],staticClass:"c-character-intro__name"},[t._v(t._s(t.person.name))])]),t.person.info?s("div",{staticClass:"c-character-intro__row c-character-intro__info"},[t._v(t._s(t.person.info))]):t._e(),t.person.tag?s("div",{staticClass:"c-character-intro__row c-character-intro__tag"},[t._v(t._s(t.person.tag))]):t._e()]):t._e()]),s("div",{staticClass:"c-character-intro__extend"},[t._t("default")],2)])},ss=[],as={name:"character-intro",props:{person:{type:Object},smaller:{type:Boolean,default:!0}}},is=as,ns=(s("534f"),Object(d["a"])(is,es,ss,!1,null,null,null));ns.options.__file="CharacterIntro.vue";var os=ns.exports,rs={name:"home-character-Intro",props:["mode","person"],components:{characterIntro:os},data:function(){return{connectState:-1}},computed:{isStaff:function(){return"staff"===this.mode},state:function(){switch(!0){case 0===this.person.braceletOfBinding:return 0;case 0===this.connectState:return 1;case 1===this.connectState:return 2;default:return-1}},stateTip:function(){switch(this.state){case 0:return this.$t("state.unbind");case 1:return this.$t("state.unconnected");case 2:return this.$t("state.connected");default:return""}},level:function(){switch(this.person.roles){case 1:case 2:case 3:return this.$t("home.teacher.level".concat(this.person.roles));default:return this.$t("home.teacher.unknown")}},intro:function(){var t=this.person.lastName||this.person.userName;return{name:this.isStaff?this.$t("home.staff.name",{name:t}):t,headUrl:this.person.headUrl,info:this.isStaff?"":this.$t("common.teacher")+this.person.headTeacherUserName,tag:this.isStaff?this.level:this.$t("format.classInfo2",{gradeLevel:this.person.gradeLevel,classId:this.person.classId})}}},created:function(){1===this.person.braceletOfBinding&&jsBracelet.isConnected(this.person.id)}},cs=rs,ls=(s("2bb9"),Object(d["a"])(cs,Xe,ts,!1,null,null,null));ls.options.__file="CharacterIntroHome.vue";var ds=ls.exports,us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-home-attendance-admin"},[s("attendance-block",{staticClass:"c-attendance-block--single",attrs:{title:t.$t("attendanceType.teacher"),supplement:t.$t("attendance.supplement"),attendance:t.teacherAttendance},nativeOn:{click:function(e){return t.toTeacherAttendance(e)}}}),s("attendance-block",{staticClass:"c-attendance-block--single",attrs:{title:t.$t("attendanceType.student"),supplement:t.$t("attendance.supplement"),attendance:t.studentAttendance},nativeOn:{click:function(e){return t.toStudentAttendance(e)}}})],1)},hs=[],ps=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-attendance-block"},[s("div",{staticClass:"c-attendance-block__wrapper"},[s("div",{staticClass:"c-attendance-block__header"},[s("span",{staticClass:"c-attendance-block__title"},[t._v(t._s(t.title||""))]),s("span",{staticClass:"c-attendance-block__supplement"},[t._v(t._s(t.supplement))])]),s("div",{staticClass:"c-attendance-block__content"},[s("div",{staticClass:"c-attendance-block__tip"},[t._v(t._s(t.$t("attendance.arrived")))]),s("div",{staticClass:"c-attendance-block__percent"},[s("span",{staticClass:"c-attendance-block__arrived"},[t._v(t._s(t.arrived))]),t._v("/"+t._s(t.total))]),s("div",{staticClass:"o-progress"},[s("div",{staticClass:"o-pregress__inner",style:{width:t.precent+"%"}})]),t._t("default")],2)])])},ms=[],fs={name:"attendance-block",props:["title","attendance","supplement"],computed:{arrived:function(){return this.attendance?this.attendance.arrived:0},total:function(){return this.attendance?this.attendance.total:0},precent:function(){return this.total>0?this.arrived/this.total*100:0}},methods:{click:function(){this.$emit("click",this.attendance)}}},vs=fs,gs=(s("e244"),Object(d["a"])(vs,ps,ms,!1,null,null,null));gs.options.__file="AttendanceBlock.vue";var _s=gs.exports,bs={name:"home-attendance-admin",components:{attendanceBlock:_s},data:function(){return{teacherAttendance:{arrived:0,total:0},studentAttendance:{arrived:0,total:0}}},computed:Object(ut["a"])({},Object(m["c"])(["user"])),methods:{analysis:function(t){this.teacherAttendance={arrived:t.arrivedStaffTotal,total:t.staffTotal},this.studentAttendance={arrived:t.arrivedStudentTotal,total:t.studentTotal}},toTeacherAttendance:function(){this.$router.push({name:"attendance-school",params:{type:"teacher"}})},toStudentAttendance:function(){this.$router.push({name:"attendance-school",params:{type:"student"}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost("admin/dashboard",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},ys=bs,Cs=(s("9c3c"),Object(d["a"])(ys,us,hs,!1,null,null,null));Cs.options.__file="HomeAttendanceAdmin.vue";var ks=Cs.exports,ws=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.has?s("div",{staticClass:"c-home-attendance-teacher",class:{"is-enough":t.attendances.length>=2},on:{click:t.toClassAttendance}},[s("div",{ref:"swiper",staticClass:"swiper-container"},[s("div",{staticClass:"swiper-wrapper"},t._l(t.attendances,function(e,a){return s("attendance-block",{key:a,staticClass:"swiper-slide c-attendance-block--single",attrs:{title:t.$t("attendanceType.student"),supplement:t.$t("attendance.supplement"),attendance:e}},[s("div",{staticClass:"c-home-attendance-teacher__belong"},[t._v(t._s(t.$t("format.classInfo",{gradeLevel:e.gradeLevel,classId:e.classId})))])])})),s("div",{ref:"pagination",staticClass:"swiper-pagination"})])]):t._e()},$s=[],Ss={name:"home-attendance-teacher",components:{attendanceBlock:_s},data:function(){return{attendances:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{has:function(){return this.attendances.length>0}}),methods:{analysis:function(t){var e=this;t.arrived=t.arrivedStudentClassTotal,t.total=t.studentClassTotal,this.attendances=[t],this.$nextTick(function(){e.refreshSwiper()})},refreshSwiper:function(){var t=this.attendances.length;this.$swiper?this.$swiper.slides.length!==t&&(t<=1?(this.$swiper.destroy(),this.$swiper=null):this.$swiper.update()):t>2&&(this.$swiper=new ze["a"](this.$refs.swiper,{loop:!1,spaceBetween:5,pagination:{el:this.$refs.pagination,dynamicBullets:t>5,longSwipesRatio:.3}}))},toClassAttendance:function(){if(this.attendances.length>0){var t=this.$swiper?this.$swiper.realIndex:0;this.$router.push({name:"attendance-class",params:{type:"student",classId:this.attendances[t].idClass}})}}},created:function(){var t=this;this.$httpPost=this.$http.createPost("teacher/class/studentstat",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token})},mounted:function(){this.refreshSwiper()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel(),this.$swiper&&this.$swiper.destroy()}},Ps=Ss,As=(s("2a8d"),Object(d["a"])(Ps,ws,$s,!1,null,null,null));As.options.__file="HomeAttendanceTeacher.vue";var xs=As.exports,Ts={name:"home",components:{sideMenu:Ke,characterIntro:ds,homeAttendanceAdmin:ks,homeAttendanceTeacher:xs},props:[],data:function(){return{showSide:!1,records:[],index:0,toast:"",date:new Date,steps:0,need:{}}},computed:Object(ut["a"])({},Object(m["c"])(["user","figures"]),{mode:function(){return"parent"===this.$route.params.mode?"parent":"staff"},isStaff:function(){return"staff"===this.mode},today:function(){return this.$t("format.date",{week:this.$d(this.date,"week"),month:this.$d(this.date,"month"),day:this.date.getDate(),year:this.date.getFullYear()})},timeline:function(){var t,e=this.records.length,s=0;switch(!0){case e>3:t=this.records.slice(0,3).map(this.transformRecord);break;case 3===e:t=this.records.map(this.transformRecord);break;default:t=this.records.map(this.transformRecord);for(var a=e;a<3;a++)t.push(this.records[a]||{id:s++,type:0,time:"--:--:--"});break}return t},figure:function(){return this.figures.length>0?this.figures[this.index]:null},id:function(){return this.figure?this.isStaff?this.figure.token:this.figure.studentId:null},attendanceComponent:function(){return this.isStaff?3===this.figure.roles?"home-attendance-admin":"home-attendance-teacher":""}}),methods:Object(ut["a"])({},Object(m["b"])(["setRuntimeMode"]),{transformRecord:function(t){return{id:t.checkTime,type:t.type,time:t.checkTimeStr.split(" ")[1]}},checkFlag:function(){if(this.figure){this.need[this.id]||(this.need[this.id]={bracelet:!0,bus:!0});var t=this.need[this.id];if(t.bracelet&&0===this.figure.braceletOfBinding)return void(this.toast="bracelet");if(!this.isStaff&&t.bus&&!this.figure.busId)return void(this.toast="bus")}jsNative.isBluetoothOpen()?this.toast="":this.toast="bluetooth"},refetch:function(t){var e=this;this.date=new Date,this.checkFlag(),t&&(this.records=[],this.steps=0,this.$recordsHttpPost&&this.$recordsHttpPost.cancel(),this.$stepHttpPost&&this.$stepHttpPost.cancel()),this.figure&&(this.$recordsHttpPost||(this.$recordsHttpPost=this.$http.createPost(this.isStaff?"staff/signinrecord":"parent/child/signinrecord",{opts:{cycle:6e4},success:function(t){return e.records=t.data}})),this.$recordsHttpPost.request(this.isStaff?{token:this.figure.token,page:1,pageSize:3}:{idStudent:this.figure.studentId,page:1,pageSize:3}),this.$stepHttpPost||(this.$stepHttpPost=this.$http.createPost(this.isStaff?"staff/sport":"parent/child/sport",{opts:{retry:!0},success:function(t){return e.steps=t.data.steps}})),this.$stepHttpPost.request(this.isStaff?{token:this.figure.token}:{idStudent:this.figure.studentId,token:this.user.token}))},updatePerson:function(){var t=this;if(this.figures.length>1&&!this.$personSwiper){this.$personSwiper=new ze["a"]("#person-swiper",{loop:!1,pagination:{el:"#person-pagination",longSwipesRatio:.3},on:{slideChangeTransitionStart:function(){t.$router.replace({name:"home",params:{index:t.$personSwiper.activeIndex}})},slideChangeTransitionEnd:function(){}}});var e=Math.min(this.index,this.figures.length-1);e>0&&this.$personSwiper.slideTo(e,0,!1),this.refetch()}else this.refetch()},scan:function(){jsNative.scan()},clickToast:function(){switch(this.toast){case"bracelet":this.$router.push({name:"scan",params:{id:this.id}});break;case"bus":this.$router.push({name:"modify-bus",params:{id:this.id}});break;case"bluetooth":this.$router.push({name:"bluetooth"});break;default:break}},clickToastIcon:function(){switch(this.toast){case"bracelet":case"bus":this.need[this.id][this.toast]=!1,this.checkFlag();break;case"bluetooth":this.clickToast();break;default:break}},toHistory:function(){this.figure&&this.$router.push({name:"history",params:{id:this.id}})},toMotion:function(){this.figure&&this.$router.push({name:"motion",params:{id:this.id}})},toBind:function(){this.figure&&this.$router.push({name:"scan",params:{id:this.id}})},toBus:function(){this.figure&&this.$router.push({name:"bus",params:{id:this.id}})}}),watch:{figures:function(){var t=this;this.$nextTick(function(){t.updatePerson()})}},beforeRouteUpdate:function(t,e,s){var a=t.params.index||0;a!==this.index&&(this.index=a,this.refetch(!0),this.$personSwiper&&this.$personSwiper.realIndex!==a&&this.$personSwiper.slideTo(a,0,!1)),s()},created:function(){this.setRuntimeMode("normal"),this.index=this.$route.params.index||0,this.refetch()},mounted:function(){this.updatePerson()},beforeDestroy:function(){this.$personSwiper&&this.$personSwiper.destroy(),this.$recordsHttpPost&&this.$recordsHttpPost.cancel(),this.$stepHttpPost&&this.$stepHttpPost.cancel()}},Is=Ts,Os=(s("69fe"),Object(d["a"])(Is,Ge,We,!1,null,null,null));Os.options.__file="Home.vue";var Ms=Os.exports,Ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-sign-in-history"},[s("div",{staticClass:"l-navigation__header"},[s("navigation",{attrs:{title:t.$t("history.title")}}),s("div",{staticClass:"p-sign-in-history__target"},[t._v(t._s(t.name))])],1),s("div",{ref:"wrapper",staticClass:"l-navigation__content u-overflow-hidden"},[s("div",[s("ul",{ref:"listWrapper"},t._l(t.records,function(e,a){return s("li",{key:a},[t._o(s("div",{staticClass:"p-sign-in-history__time"},[t._v(t._s(e.label))]),0,a),s("div",{staticClass:"p-sign-in-history__timeline"},t._l(e.records,function(e,a){return s("div",{key:a,staticClass:"c-timeline__point"},[s("div",{staticClass:"c-timeline__header"}),s("div",{staticClass:"c-timeline__tail"}),s("div",{staticClass:"c-timeline__content"},[s("div",{staticClass:"c-timeline__time"},[t._v(t._s(e.time))]),s("div",{staticClass:"c-timeline__info"},[s("div",{staticClass:"c-timeline__row"},[t._v(t._s(t.$t("record."+e.type)))]),3===e.type?s("div",{staticClass:"c-timeline__row"},[s("div",{staticClass:"p-sign-in-history__bus t-adapt-color"},[t._v(t._s(t.$t("record.bus")))])]):t._e()])])])}))])})),t.canPullUp?s("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.pullUpTip))]):t._e()]),s("loading",{attrs:{fetching:t.loading,isError:t.isError,retry:t.fetch}}),t.empty?s("div",{staticClass:"p-sign-in-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1)])},Es=[];function Ls(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var Ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-navigation-bar"},[s("span",{staticClass:"c-navigation-bar__icon",on:{click:t.back}}),t._v(t._s(t.title)+"\n  "),t._t("default")],2)},js=[],Us={name:"navigation-bar",props:["title"],methods:{back:function(){this.$router.back()}}},Rs=Us,Fs=(s("6617"),Object(d["a"])(Rs,Ds,js,!1,null,null,null));Fs.options.__file="NavigationBar.vue";var Hs=Fs.exports,Bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.fetching||t.isError?a("div",{staticClass:"c-loading"},[t.fetching?a("div",{staticClass:"c-loading__tip"},[a("img",{staticClass:"c-loading__icon",attrs:{src:s("88a7")}}),t._v(t._s(t.$t("common.loading")))]):t.isError?a("div",{staticClass:"c-loading__button",on:{click:t.retry}},[t._v(t._s(t.$t("common.retry")))]):t._e()]):t._e()},qs=[],Gs={name:"loading",props:{fetching:{type:Boolean,default:!1,required:!0},isError:{type:Boolean,default:!1,required:!0},retry:{type:Function,required:!0}}},Ws=Gs,zs=(s("bdca"),Object(d["a"])(Ws,Bs,qs,!1,null,"0dbfcc10",null));zs.options.__file="Loading.vue";var Js=zs.exports,Vs={name:"sign-in-history",components:{navigation:Hs,loading:Js},data:function(){return{records:[],httpPost:null,page:1,isPullUpLoad:!1,error:!1,hasMore:!0,hasFetched:!1}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},url:function(){return this.isStaff?"staff/signinrecord":"parent/child/signinrecord"},id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure(this.$route.params)},name:function(){return this.figure&&(this.figure.lastName||this.figure.userName)||""},fetching:function(){return this.httpPost&&this.httpPost.isRequesting()},loading:function(){return this.fetching&&!this.hasFetched},isError:function(){return this.error&&!this.hasFetched},has:function(){return this.records.length>0},empty:function(){return this.hasFetched&&!this.has&&!this.hasMore},canPullUp:function(){return this.hasFetched&&this.hasMore},pullUpTip:function(){return this.isPullUpLoad?this.$t("pullUp.loading"):this.hasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")}}),methods:{initScroll:function(){var t=this;this.$refs.wrapper&&this.has&&!this.$scroll&&(this.$refs.listWrapper.style.minHeight="".concat(Ls(this.$refs.wrapper).height+1,"px"),this.$scroll=new kt["a"](this.$refs.wrapper,{scrollY:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$scroll.on("pullingUp",function(){t.hasMore&&!t.fetching?(t.isPullUpLoad=!0,t.fetch()):t.$scroll.finishPullUp()}))},pullUpFnished:function(){this.isPullUpLoad&&(this.isPullUpLoad=!1,this.$scroll.finishPullUp())},forceUpdate:function(){var t=this;this.$nextTick(function(){t.$scroll?(t.pullUpFnished(),t.$scroll.refresh()):t.initScroll()})},checkDayStr:function(t,e){var s=new Date;return this.isSameDay(s,t)?this.$t("history.today"):(s.setDate(s.getDate()-1),this.isSameDay(s,t)?this.$t("history.yesterday"):e)},isSameDay:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},add:function(t){if(this.hasFetched=!0,0!==t.length){for(var e,s,a=this.records[this.records.length-1],i=0,n=t.length;i<n;i++)e=t[i],s=new Date(e.checkTime),a&&this.isSameDay(a.date,s)||(a={label:this.checkDayStr(s,e.checkTimeStr.split(" ")[0]),date:s,records:[]},this.records.push(a)),a.records.push({time:e.checkTimeStr.split(" ")[1],type:e.type});this.page+=1}else this.hasMore=!1},fetch:function(){this.httpPost.request(this.isStaff?{token:this.id,page:this.page,pageSize:20}:{idStudent:this.id,page:this.page,pageSize:20})}},watch:{fetching:function(t,e){var s=this;e&&!t&&setTimeout(function(){s.forceUpdate()},20)}},created:function(){var t=this;this.httpPost=this.$http.createPost(this.url,{success:function(e){t.error=!1,t.add(e.data)},fail:function(){t.error=!0}}),this.fetch()},mounted:function(){this.initScroll()},beforeDestroy:function(){this.httpPost&&this.httpPost.cancel(),this.$scroll&&this.$scroll.destroy()}},Ys=Vs,Zs=(s("b1fa"),Object(d["a"])(Ys,Ns,Es,!1,null,null,null));Zs.options.__file="SignInHistory.vue";var Qs=Zs.exports,Ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-motion"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("motion.title")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("div",{staticClass:"p-motion__header"},[s("div",{staticClass:"p-motion-today u-clearfix"},[s("div",{staticClass:"p-motion-today__tip"},[t._v("\n          "+t._s(t.$t("motion.today"))+"\n          "),s("div",{staticClass:"p-motion-today__time"},[t._v(t._s(t.today))])]),s("div",{staticClass:"p-motion-today__value"},[t._v(t._s(t.todaySteps)),s("span",{staticClass:"p-motion-today__unit"},[t._v(t._s(t.$t("motion.unit")))])])])]),s("div",{staticClass:"p-motion__tab"},[s("div",{staticClass:"o-tab",class:{"is-active":1===t.type},on:{click:function(e){t.changeType(1)}}},[t._v(t._s(t.$t("motion.weekly")))]),s("div",{staticClass:"o-tab",class:{"is-active":2===t.type},on:{click:function(e){t.changeType(2)}}},[t._v(t._s(t.$t("motion.monthly")))])]),s("div",{staticClass:"p-motion__chart"},[s("schart",{attrs:{mode:1,steps:t.steps,useWeek:t.useWeek}})],1)])],1)},Xs=[],ta=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("canvas",{ref:"el",staticClass:"c-step-chart",on:{click:t.click}})},ea=[];s("6b54"),s("6c7b");function sa(t){this.init(t)}sa.prototype={margin:20,width:0,height:0,isDataLoad:!1,data:null,points:[],fontFamily:"sans-serif,arial",day:null,yAxis:16e3,yAxisIc:4e3,quadRadius:30,headText:"Steps",chartFontSize:30,chartMeanLine:0,rectHead:{x:0,y:0,width:0,height:0},rectChart:{x:0,y:0,width:0,height:0},rectChartCenter:{x:0,y:0,width:0,height:0},value:1,fill:{gradient:[["#21b881",.1],["#0e8fa2",.9]],gradientAngle:-45*Math.PI/180},animation:{duration:400,easing:"wcChart"},animationStartValue:0,animationPoint:null,constructor:sa,el:null,canvas:null,ctx:null,fillPattern:null,lastFrameValue:0,timer:null,mode:0,init:function(t){Object.assign(this,t),clearInterval(this.timer),this.initWidget(),this.initRect(),this.initFill(),t.data?this.setData(t.data):this.draw()},setData:function(t){this.isDataLoad=!0,clearInterval(this.timer),this.data=t,this.initData(),this.draw()},initWidget:function(){var t=this.el,e=this.canvas=this.canvas||this.el;e.width=this.width=0===this.width?t.offsetWidth:this.width,e.height=this.height=0===this.height?t.offsetHeight:this.height,this.ctx=e.getContext("2d")},initRect:function(){var t=this.margin,e=88;this.rectHead={x:t,y:0,width:this.width-2*t,height:e},this.rectChart={x:t,y:e,width:this.width-2*t,height:this.height-e},this.rectChartCenter={x:this.rectChart.x,y:this.rectChart.y+2.5*this.chartFontSize,width:this.rectChart.width-.8*this.chartFontSize,height:this.rectChart.height-5*this.chartFontSize}},initPointsBySteps:function(t){var e,s=Math.max.apply(Math,t),a=this.rectChartCenter.width/(t.length-1);e=null===this.day?new Date:new Date(this.day.getTime());var i=s<=this.yAxis?this.yAxis:Math.ceil((s-this.yAxis)/this.yAxisIc)*this.yAxisIc+this.yAxis;e.setDate(e.getDate()-t.length+1),this.chartMeanLine=this.rectChartCenter.y+this.rectChartCenter.height-1e4*this.rectChartCenter.height/i,this.points=[];for(var n=0,o=t.length;n<o;n++)this.points[n]={x:this.rectChartCenter.x+a*n,y:this.rectChartCenter.y+this.rectChartCenter.height-t[n]*this.rectChartCenter.height/i,value:t[n],text:0===n?e.getMonth()+1+"/"+e.getDate():e.getDate(),radius:n===o-1?8:6,textAlign:0===n?"left":"center",rect:{x:this.rectChartCenter.x+a*(n-.5),y:this.rectChart.y,width:a,height:this.rectChart.height}},e.setDate(e.getDate()+1);this.animationPoint=t.length-1},initPointsByObj:function(t,e){var s,a,i=Math.max.apply(Math,t.map(function(t){return t.steps})),n=this.rectChartCenter.width/(t.length-1),o=i<=this.yAxis?this.yAxis:Math.ceil((i-this.yAxis)/this.yAxisIc)*this.yAxisIc+this.yAxis;this.chartMeanLine=this.rectChartCenter.y+this.rectChartCenter.height-1e4*this.rectChartCenter.height/o,this.points=[];for(var r=0,c=t.length;r<c;r++)s=new Date(t[c-1-r].time),a=e&&r!==c-1&&0!==s.getDay()?"":s.getDate(),this.points.push({x:this.rectChartCenter.x+n*r,y:this.rectChartCenter.y+this.rectChartCenter.height-t[r].steps*this.rectChartCenter.height/o,value:t[r].steps,text:a,radius:r===c-1?8:6,textAlign:0===r?"left":"center",rect:{x:this.rectChartCenter.x+n*(r-.5),y:this.rectChart.y,width:n,height:this.rectChart.height}});this.animationPoint=t.length-1},initData:function(){this.data&&!1!==this.isDataLoad?0===this.mode?this.initPointsBySteps(this.data):1===this.mode?this.initPointsByObj(this.data,this.useWeek):this.points=[]:this.initPointsBySteps([])},initFill:function(){var t=this.fill,e=this.ctx,s=this.width,a=this.height;if(!t)throw Error("The fill is not specified!");if(t.color&&(this.fillPattern=t.color),t.gradient){var i=t.gradient;if(1===i.length)this.fillPattern=i[0];else if(i.length>1){for(var n=t.gradientAngle||0,o=t.gradientDirection||[s/2*(1-Math.cos(n)),a/2*(1+Math.sin(n)),s/2*(1+Math.cos(n)),a/2*(1-Math.sin(n))],r=e.createLinearGradient.apply(e,o),c=0;c<i.length;c++){var l=i[c],d=c/(i.length-1);Array.isArray(l)&&(d=l[1],l=l[0]),r.addColorStop(d,l)}this.fillPattern=r}}},draw:function(){this.animation&&null!==this.animationPoint?this.drawAnimated():this.drawFrame(this.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.fillStyle="white",this.ctx.strokeStyle="white",this.drawBack(),this.drawHead(),this.drawChart(),this.drawStep(t)},drawBack:function(){var t=this.ctx;t.save(),t.fillStyle=this.fillPattern,t.globalAlpha=1,this.roundRect(0,0,this.width,this.height,this.quadRadius,!0,!1),t.restore()},drawHead:function(){var t=48,e=this.ctx;e.save(),e.globalAlpha=.8,e.font=t+"px "+this.fontFamily,e.fillStyle="white",e.fillText(this.headText,this.rectHead.x,this.rectHead.y+t+this.margin,this.rectHead.width),e.beginPath(),e.globalAlpha=.8,e.moveTo(this.rectHead.x,this.rectHead.y+this.rectHead.height),e.lineTo(this.rectHead.x+this.rectHead.width,this.rectHead.y+this.rectHead.height),e.stroke(),e.restore()},drawChart:function(){if(!1!==this.isDataLoad&&0!==this.points.length){var t=this.ctx;t.save(),t.fillStyle="white",t.globalAlpha=.6,t.font=this.chartFontSize-8+"px "+this.fontFamily,t.fillText("1W",this.rectChartCenter.x+this.rectChartCenter.width+4,this.chartMeanLine+this.chartFontSize/2.8),t.beginPath(),t.lineWidth=1,this.dashedLineTo(this.rectChartCenter.x,this.chartMeanLine,this.rectChartCenter.x+this.rectChartCenter.width,this.chartMeanLine,[7,4]),t.stroke(),t.font=this.chartFontSize+"px "+this.fontFamily;for(var e=0;e<this.points.length;e++)this.points[e].text&&(t.textAlign=this.points[e].textAlign,t.globalAlpha=e===this.animationPoint?1:.5,t.fillText(this.points[e].text,this.points[e].x,this.rectChartCenter.y+this.rectChartCenter.height+1.5*this.chartFontSize));for(var s=0;s<this.points.length;s++)t.globalAlpha=1,t.beginPath(),t.arc(this.points[s].x,this.points[s].y,this.points[s].radius,0,2*Math.PI),t.fill(),0!==s&&(t.save(),t.beginPath(),t.lineWidth=3,t.moveTo(this.points[s-1].x,this.points[s-1].y),0!==this.points[s-1].value?t.lineTo(this.points[s].x,this.points[s].y):(t.globalAlpha=.5,this.dashedLineTo(this.points[s-1].x,this.points[s-1].y,this.points[s].x,this.points[s].y,7)),t.stroke(),t.restore());t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var a=1;a<this.points.length;a++)t.lineTo(this.points[a].x,this.points[a].y);t.lineTo(this.rectChartCenter.x+this.rectChartCenter.width,this.rectChartCenter.y+this.rectChartCenter.height),t.lineTo(this.rectChartCenter.x,this.rectChartCenter.y+this.rectChartCenter.height),t.lineTo(this.points[0].x,this.points[0].y),t.fillStyle="white",t.globalAlpha=.1,t.fill(),t.restore()}},drawStep:function(t){if(!(null===this.animationPoint||this.animationPoint<0||this.animationPoint>=this.points.length||!1===this.isDataLoad)){var e=this.ctx,s=this.points[this.animationPoint],a=this.rectChartCenter.y-1.3*this.chartFontSize,i=s.y,n=(1-t)*Math.abs(i-a)+a,o=.4,r=.8,c=t*(r-o)+o;e.save(),e.font="bold "+this.chartFontSize+"px "+this.fontFamily,e.textAlign=this.animationPoint===this.points.length-1?"right":s.textAlign,e.fillStyle="white",e.globalAlpha=c,e.fillText(s.value.toString(),s.x,n),e.restore()}},easing:function(t,e,s,a,i){return a*Math.sqrt(1-(e=e/i-1)*e)+s},drawAnimated:function(){var t=this;this.timer&&clearInterval(this.timer);var e=Date.now();this.timer=setInterval(function(){var s=(Date.now()-e)/t.animation.duration;t.drawFrame(t.easing(s,t.animation.duration*s,0,1,t.animation.duration)),s>=1&&clearInterval(t.timer)},0)},clickFuc:function(t){var e={x:t.pageX*this.scaleX,y:t.pageY*this.scaleY};if(this.isPointInRect(this.rectChart,e)&&this.isDataLoad)for(var s=this.points,a=0;a<s.length;a++)if(this.isPointInRect(s[a].rect,e)){this.animationPoint=a,this&&this.draw();break}},isPointInRect:function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},roundRect:function(t,e,s,a,i,n,o){o="undefined"===typeof o||o,o="undefined"===typeof o||o,i="undefined"===typeof i?5:i,this.ctx.beginPath(),this.ctx.moveTo(t+i,e),this.ctx.lineTo(t+s-i,e),this.ctx.quadraticCurveTo(t+s,e,t+s,e+i),this.ctx.lineTo(t+s,e+a-i),this.ctx.quadraticCurveTo(t+s,e+a,t+s-i,e+a),this.ctx.lineTo(t+i,e+a),this.ctx.quadraticCurveTo(t,e+a,t,e+a-i),this.ctx.lineTo(t,e+i),this.ctx.quadraticCurveTo(t,e,t+i,e),this.ctx.closePath(),o&&this.ctx.stroke(),n&&this.ctx.fill()},dashedLineTo:function(t,e,s,a,i){var n=0,o=0;"undefined"===typeof i?(o=5,n=5):i.constructor===Array?(o=i[0],n=i[1]):o=n=i;for(var r=s-t,c=a-e,l=Math.floor(Math.sqrt(r*r+c*c)),d=o+n,u=d<=0?l:Math.floor(l/d),h=c/l*o,p=r/l*o,m=r/l*d,f=c/l*d,v=t,g=e,_=0;_<u;_++)this.ctx.moveTo(v,g),this.ctx.lineTo(v+p,g+h),v+=m,g+=f}};var aa={name:"step-chart",props:["steps","mode","useWeek"],data:function(){return{wcChart:null}},methods:{click:function(t){this.wcChart&&this.wcChart.clickFuc(t)},refresh:function(){this.wcChart.setData(this.steps)}},watch:{steps:function(){this.refresh()},useWeek:function(t){this.wcChart.useWeek=t}},mounted:function(){var t=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,s=750,a=375;this.wcChart=new sa({width:s,height:a,scaleX:s/t,scaleY:a/e,useWeek:this.useWeek,el:this.$refs.el,mode:this.mode||0})},beforeDestroy:function(){this.wcChart&&clearInterval(this.wcChart.timer)}},ia=aa,na=(s("411c"),Object(d["a"])(ia,ta,ea,!1,null,null,null));na.options.__file="StepChart.vue";var oa=na.exports,ra={name:"motion",components:{navigation:Hs,schart:oa},data:function(){return{date:new Date,todaySteps:0,type:1,steps:null}},computed:{today:function(){return this.$t("format.date",{week:this.$d(this.date,"week"),month:this.$d(this.date,"month"),day:this.date.getDate(),year:this.date.getFullYear()})},mode:function(){return this.$route.params.mode},isStaff:function(){return"staff"===this.mode},stepUrl:function(){return this.isStaff?"parent/staff/sport":"parent/child/sport"},url:function(){return this.isStaff?"staff/stepsstat":"parent/child/stepstate"},id:function(){return this.$route.params.id},user:function(){return this.$store.state.user},postData:function(){return this.isStaff?{}:{idStudent:this.id,token:this.user.token,type:this.type}},useWeek:function(){return 2===this.type}},methods:{back:function(){this.$router.back()},fetchTodaySteps:function(){var t=this;this.$stepHttpPost||(this.$stepHttpPost=this.$http.createPost(this.stepUrl,{opts:{retry:!0},success:function(e){return t.todaySteps=e.data.steps}})),this.$stepHttpPost.request(this.isStaff?{token:this.id}:{idStudent:this.id,token:this.user.token})},fetch:function(){var t=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{retry:!0},success:function(e){return t.steps=e.data.map(function(t){return{time:t.sportDate,steps:t.steps}})}})),this.$httpPost.request((this.isStaff,{idStudent:this.id,token:this.user.token,type:this.type}))},changeType:function(t){this.type!==t&&(this.type=t,this.steps=null,this.fetch())}},beforeRouteUpdate:function(t,e,s){this.date=new Date,this.todaySteps=0,this.steps=null,this.fetchTodaySteps(),this.fetch(),s()},created:function(){this.fetchTodaySteps(),this.fetch()},beforeDestroy:function(){this.$stepHttpPost&&this.$stepHttpPost.cancel(),this.$httpPost&&this.$httpPost.cancel()}},ca=ra,la=(s("423e"),Object(d["a"])(ca,Ks,Xs,!1,null,"642a05e5",null));la.options.__file="Motion.vue";var da=la.exports,ua=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.bracelet")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",t._l(t.figures,function(e){return s("li",{key:e.id,staticClass:"c-bracelet-item"},[s("div",{staticClass:"c-bracelet-item__avatar",class:{"c-avatar":!e.relationship,"c-avatar--boy":1===e.relationship,"c-avatar--girl":2===e.relationship}},[s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+e.headUrl}})]),s("div",{staticClass:"c-bracelet-item__button o-button",class:{"t-adapt-button":0===e.braceletOfBinding,"o-button--prominent":1===e.braceletOfBinding},on:{click:function(s){t.toggle(e)}}},[t._v(t._s(0===e.braceletOfBinding?t.$t("bracelet.bind"):t.$t("bracelet.unbind")))]),s("div",{staticClass:"c-bracelet-item__name"},[t._v(t._s(e.lastName||e.userName))])])}))])],1)},ha=[],pa={name:"bracelet",components:{navigation:Hs},computed:Object(ut["a"])({},Object(m["c"])(["figures"]),{isStaff:function(){return"staff"===this.$route.params.mode}}),methods:{toggle:function(t){0===t.braceletOfBinding?this.$router.push({name:"scan",params:{id:this.isStaff?t.token:t.studentId}}):this.$router.push({name:"unbind",params:{id:this.isStaff?t.token:t.studentId}})}}},ma=pa,fa=(s("ebe8"),Object(d["a"])(ma,ua,ha,!1,null,null,null));fa.options.__file="Bracelet.vue";var va=fa.exports,ga=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-account"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.account")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",[s("li",{staticClass:"c-account-info"},[s("div",{staticClass:"c-account-info__name u-more"},[t._v(t._s(t.user.lastName||t.user.userName))]),s("div",{staticClass:"c-account-info__avatar c-avatar",on:{click:t.upload}},[s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+t.user.headUrl}})])]),t.isStaff?s("li",{staticClass:"c-account-item"},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.id")))]),s("div",{staticClass:"c-account-item__value"},[t._v(t._s(t.user.legacyId))])]):t._e(),t.isStaff?t._e():s("li",{staticClass:"c-account-item"},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.relationship")))]),s("div",{staticClass:"c-account-item__value"},[t._v(t._s(t.user.relationship||" "))])]),s("router-link",{staticClass:"c-account-item",attrs:{tag:"li",to:{name:"modify-mobile-confirm"}}},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.phone")))]),s("div",{staticClass:"c-account-item__value u-more"},[t._v(t._s(t.user.mobile||" "))])]),s("router-link",{staticClass:"c-account-item",attrs:{tag:"li",to:{name:"modify-email"}}},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.email")))]),s("div",{staticClass:"c-account-item__value u-more"},[t._v(t._s(t.user.email||" "))])])],1),s("input",{ref:"fileUpload",staticClass:"u-display-none",attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})])],1)},_a=[],ba={name:"account-info",components:{navigation:Hs},data:function(){return{cancelSource:null}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},url:function(){return this.isStaff?"staff/pic/modify":""}}),methods:{upload:function(){this.user&&this.url&&this.$refs.fileUpload&&!this.cancelSource&&this.$refs.fileUpload.click()},handleFile:function(t){var e=this,s=t.target||t.srcElement,a=s.files[0];a&&(this.cancelSource=this.$http.cancelSource(),this.$http.uploadFile("common/attachment/upload",a,{cancelToken:this.cancelSource.token}).then(function(t){e.cancelSource=null,e.changeAvatar(t.data.realPath)},function(){e.cancelSource=null}))},changeAvatar:function(t){var e=this;this.cancelSource=this.$http.cancelSource(),this.$http.post(this.url,{token:this.user.token,picImgPath:t},{cancelToken:this.cancelSource.token}).then(function(){e.cancelSource=null,e.user.headUrl=t},function(){e.cancelSource=null})}},beforeDestroy:function(){this.cancelSource&&this.cancelSource.cancel("destroy")}},ya=ba,Ca=Object(d["a"])(ya,ga,_a,!1,null,null,null);Ca.options.__file="AccountInfo.vue";var ka=Ca.exports,wa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.kids")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",t._l(t.figures,function(e){return s("li",{key:e.id,staticClass:"c-children-item",on:{click:function(s){t.choose(e)}}},[s("div",{staticClass:"c-children-item__avatar",class:{"c-avatar--boy":1===e.relationship,"c-avatar--girl":2===e.relationship}},[s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+e.headUrl}})]),s("div",{staticClass:"c-children-item__name u-more"},[t._v(t._s(e.lastName||e.userName))])])}))])],1)},$a=[],Sa={name:"children",components:{navigation:Hs},computed:Object(ut["a"])({},Object(m["c"])(["figures"])),methods:{choose:function(t){this.$router.push({name:"children-info",params:{id:t.studentId}})}}},Pa=Sa,Aa=(s("2137"),Object(d["a"])(Pa,wa,$a,!1,null,null,null));Aa.options.__file="Children.vue";var xa=Aa.exports,Ta=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.kids")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",[s("li",{staticClass:"c-account-info"},[s("div",{staticClass:"c-account-info__name u-more"},[t._v(t._s(t.name||" "))]),t.figure?s("div",{staticClass:"c-account-info__avatar",class:{"c-avatar--boy":1===t.sex,"c-avatar--girl":2===t.sex},on:{click:t.upload}},[s("div",{staticClass:"c-avatar__icon",style:{backgroundImage:"url("+t.figure.headUrl}})]):t._e()]),s("li",{staticClass:"c-account-item"},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.relationship")))]),s("div",{staticClass:"c-account-item__value"},[t._v(t._s(t.relationship||" "))])]),s("li",{staticClass:"c-account-item"},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.student")))]),s("div",{staticClass:"c-account-item__value"},[t._v(t._s(t.studentId||" "))])]),s("li",{staticClass:"c-account-item",on:{click:t.changeBus}},[s("div",{staticClass:"c-account-item__label"},[t._v(t._s(t.$t("account.bus")))]),s("div",{staticClass:"c-account-item__value u-more"},[t._v(t._s(t.bus||" "))])])]),s("input",{ref:"fileUpload",staticClass:"u-display-none",attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})])],1)},Ia=[],Oa={name:"children-info",components:{navigation:Hs},data:function(){return{cancelSource:null}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure({mode:"parent",id:this.id})},name:function(){return this.figure?this.figure.lastName:null},sex:function(){return this.figure?this.figure.relationship:1},relationship:function(){return this.figure?1===this.figure.relationship?this.$t("relationship.son"):this.$t("relationship.daughter"):null},studentId:function(){return this.figure?this.figure.studentId:null},bus:function(){return this.figure?this.figure.busId:null}}),methods:{upload:function(){this.figure&&this.$refs.fileUpload&&!this.cancelSource&&this.$refs.fileUpload.click()},handleFile:function(t){var e=this,s=t.target||t.srcElement,a=s.files[0];a&&(this.cancelSource=this.$http.cancelSource(),this.$http.uploadFile("common/attachment/upload",a,{cancelToken:this.cancelSource.token}).then(function(t){e.cancelSource=null,e.changeAvatar(t.data.realPath)},function(){e.cancelSource=null}))},changeAvatar:function(t){var e=this;this.cancelSource=this.$http.cancelSource(),this.$http.post("parent/child/modifyPic",{token:this.user.token,idStudent:this.id,picImgPath:t},{cancelToken:this.cancelSource.token}).then(function(){e.cancelSource=null,e.figure.headUrl=t},function(){e.cancelSource=null})},changeBus:function(){this.figure&&this.$router.push({name:"modify-bus",params:{id:this.figure.studentId}})}},beforeDestroy:function(){this.cancelSource&&this.cancelSource.cancel("destroy")}},Ma=Oa,Na=Object(d["a"])(Ma,Ta,Ia,!1,null,null,null);Na.options.__file="ChildrenInfo.vue";var Ea=Na.exports,La=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation c-modify"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("account.bus")}}),s("div",{staticClass:"l-navigation__content l-form"},[s("form-field",{attrs:{type:"number",placeholder:t.$t("account.bus"),tip:t.$t("bus.tip")},model:{value:t.busId,callback:function(e){t.busId="string"===typeof e?e.trim():e},expression:"busId"}}),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)],1)},Da=[],ja={name:"modify-bus",components:{navigation:Hs,formField:gt},data:function(){return{busId:"",error:""}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{id:function(){return this.$route.params.id},figure:function(){return this.$store.getters.getFigure({mode:"parent",id:this.id})},isValid:function(){return!!this.busId}}),methods:{save:function(){var t=this;this.isValid&&(this.error="",this.$httpPost||(this.$httpPost=this.$http.createPost("parent/child/modifyBSSId",{opts:{lock:!0},success:function(e,s){t.figure&&(t.figure.busId=s.BSSId),t.$router.back()},fail:function(e){t.error=e.message}})),this.$httpPost.request({token:this.user.token,idStudent:this.id,BSSId:this.busId}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Ua=ja,Ra=Object(d["a"])(Ua,La,Da,!1,null,null,null);Ra.options.__file="ModifyBus.vue";var Fa=Ra.exports,Ha=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-setting"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.setting")}}),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",[s("li",{staticClass:"c-setting-item"},[t._v("\n        "+t._s(t.$t("setting.voice"))+"\n        "),s("div",{staticClass:"c-setting-item__extend o-switch",class:{"is-on":t.voice},on:{click:t.toggleVoice}})]),s("li",{staticClass:"c-setting-item"},[t._v("\n        "+t._s(t.$t("setting.notice"))+"\n        "),s("div",{staticClass:"c-setting-item__extend o-switch",class:{"is-on":t.notice},on:{click:t.toggleNotice}})]),s("router-link",{staticClass:"c-setting-item",attrs:{tag:"li",to:{name:"modify-language"}}},[t._v("\n        "+t._s(t.$t("setting.language"))+"\n        "),s("div",{staticClass:"c-setting-item__value u-more"},[t._v(t._s(t.langVal))])])],1)])],1)},Ba=[],qa={name:"setting",components:{navigation:Hs},data:function(){return{voice:!1,notice:!1,lang:null}},computed:{langVal:function(){return this.lang?this.lang.text:""}},methods:{toggleVoice:function(){this.voice=!this.voice},toggleNotice:function(){this.notice=!this.notice}},created:function(){this.lang=Tt.find(function(t){return t.key===xt.locale})}},Ga=qa,Wa=Object(d["a"])(Ga,Ha,Ba,!1,null,null,null);Wa.options.__file="Setting.vue";var za=Wa.exports,Ja=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("home.menu.password")}}),s("router-view",{staticClass:"l-navigation__content"})],1)},Va=[],Ya={name:"modify-pwd-wrapper",components:{navigation:Hs}},Za=Ya,Qa=Object(d["a"])(Za,Ja,Va,!1,null,null,null);Qa.options.__file="ModifyPwdWrapper.vue";var Ka=Qa.exports,Xa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-form c-modify"},[s("form-field",{attrs:{label:t.$t("setPwd.oldPwd")},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),s("form-field",{attrs:{label:t.$t("setPwd.newPwd"),tip:t.$t("setPwd.tip"),error:t.passwordErr},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("form-field",{attrs:{label:t.$t("common.confirm"),error:t.confirmPasswordErr},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)},ti=[],ei={name:"modify-pwd",components:{formField:gt},data:function(){return{oldPassword:"",password:"",confirmPassword:"",passwordErr:"",confirmPasswordErr:"",error:"",cancelSource:null}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},isValid:function(){return this.oldPassword&&this.password&&this.confirmPassword}}),methods:{save:function(){var t=this;if(this.isValid){if(this.error="",this.password.length<8)return this.passwordErr=this.$t("pwdErr.tooShort"),void(this.confirmPasswordErr="");if(this.password.length>16)return this.passwordErr=this.$t("pwdErr.tooLong"),void(this.confirmPasswordErr="");if(!/(?=.*[a-z])(?=.*\d)(?=.*[#@!?~%^&*])[a-z\d#@!?~%^&*]/.test(this.password))return this.passwordErr=this.$t("pwdErr.format"),void(this.confirmPasswordErr="");this.passwordErr="",this.confirmPassword===this.password?(this.confirmPasswordErr="",this.$httpPost||(this.$httpPost=this.$http.createPost(this.isStaff?"staff/password/modify":"parent/password/modify",{opts:{lock:!0},success:function(){t.$router.back()},fail:function(e){t.error=e.message}})),this.$httpPost.request({token:this.user.token,oldPwd:this.oldPassword,newPwd:this.password})):this.confirmPasswordErr=this.$t("pwdErr.notMatch")}}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},si=ei,ai=Object(d["a"])(si,Xa,ti,!1,null,null,null);ai.options.__file="ModifyPwd.vue";var ii=ai.exports,ni=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation c-modify"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("account.email")}}),s("div",{staticClass:"l-navigation__content l-form"},[s("form-field",{attrs:{placeholder:t.$t("email.placeholder")},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)],1)},oi=[],ri={name:"modify-email",components:{navigation:Hs,formField:gt},data:function(){return{email:"",error:""}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},isValid:function(){return!!this.email}}),methods:{save:function(){var t=this;this.isValid&&(this.error="",this.$httpPost||(this.$httpPost=this.$http.createPost(this.isStaff?"staff/emali/modify":"parent/emali/modify",{opts:{lock:!0},success:function(e,s){t.user.emali=s.emali,t.$router.back()},fail:function(e){t.error=e.message}})),this.$httpPost.request({token:this.user.token,emali:this.emali}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},ci=ri,li=Object(d["a"])(ci,ni,oi,!1,null,null,null);li.options.__file="ModifyEmail.vue";var di=li.exports,ui=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("setting.language")}},[s("div",{staticClass:"c-navigation-bar__button t-adapt-text",on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])]),s("div",{staticClass:"l-navigation__content has-padding"},[s("ul",t._l(t.langs,function(e,a){return s("li",{key:e.key,staticClass:"c-setting-item",on:{click:function(e){t.change(a)}}},[t._v("\n        "+t._s(e.text)+"\n        "),s("div",{staticClass:"c-setting-item__extend",class:{"o-radio":t.index===a}})])}))])],1)},hi=[],pi=(s("20d6"),{name:"",components:{navigation:Hs},data:function(){return{index:0,defaultIndex:0}},computed:{langs:function(){return Tt}},methods:{change:function(t){this.index=t},save:function(){this.index!==this.defaultIndex&&(this.$i18n.locale=this.langs[this.index].key,window.localStorage.setItem("locale",this.$i18n.locale)),this.$router.back()}},created:function(){var t=this.$i18n.locale;this.index=this.langs.findIndex(function(e){return e.key===t}),this.defaultIndex=this.index}}),mi=pi,fi=Object(d["a"])(mi,ui,hi,!1,null,null,null);fi.options.__file="ModifyLanguage.vue";var vi=fi.exports,gi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-operation p-bluetooth"},[s("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("bluetooth.title")))]),s("div",{staticClass:"l-operation__header"},[t._v("\n    "+t._s(t.$t("bluetooth.tip"))+"\n    "),t.isAndroid?t._e():s("div",{staticClass:"ios-bluetooth-tip"},[s("div",[t._v(t._s(t.$t("bluetooth.iosUp")))]),s("div",[t._v(t._s(t.$t("bluetooth.iosDown"))),s("span",{staticClass:"ios-bluetooth-tip__button",class:{"is-active":t.isShow},on:{click:t.toggle}},[t._v(t._s(t.$t("bluetooth.how")))])])])]),s("div",{staticClass:"l-operation__content u-align-c"},[t.isAndroid?s("div",{staticClass:"p-bluetooth__img"}):t._e(),t.showPic?s("div",[s("div",[s("div",{staticClass:"p-bluetooth__img--tip",class:{"is-cn":t.isCN}})]),t._m(0)]):t._e()]),s("div",{staticClass:"l-operation__footer"},[s("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),s("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.open}},[t._v(t._s(t.$t("common.open")))])])])},_i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"p-bluetooth__img"})])}],bi={name:"wifi",data:function(){return{isAndroid:"android"===jsNative.os(),isShow:!0}},computed:{showPic:function(){return!this.isAndroid&&this.isShow},isCN:function(){return"en"!==this.$i18n.locale}},methods:{toggle:function(){this.isShow=!this.isShow},cancel:function(){this.$router.back()},open:function(){}}},yi=bi,Ci=(s("3b56"),Object(d["a"])(yi,gi,_i,!1,null,null,null));Ci.options.__file="Bluetooth.vue";var ki=Ci.exports,wi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("mobile.title")}}),s("router-view",{staticClass:"l-navigation__content"})],1)},$i=[],Si={name:"modify-mobile-wrapper",components:{navigation:Hs}},Pi=Si,Ai=Object(d["a"])(Pi,wi,$i,!1,null,null,null);Ai.options.__file="ModifyMobileWrapper.vue";var xi=Ai.exports,Ti=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-modify-mobile-confirm is-form"},[s("div",{staticClass:"p-modify-mobile-confirm__current"},[t._v(t._s(t.$t("mobile.current")))]),s("div",{staticClass:"p-modify-mobile-confirm__mobile"},[t._v(t._s(t.mobile))]),s("div",{staticClass:"p-modify-mobile-confirm__warning"},[t._v(t._s(t.$t("mobile.warning")))]),s("div",{staticClass:"p-modify-mobile-confirm__tip"},[t._v(t._s(t.$t("mobile.tip")))]),s("router-link",{staticClass:"o-button t-adapt-button",attrs:{tag:"div",to:{name:"pre-modify-mobile"},replace:""}},[t._v(t._s(t.$t("mobile.change")))])],1)},Ii=[],Oi={name:"modify-mobile-confirm",computed:Object(ut["a"])({},Object(m["c"])(["user"]),{mobile:function(){if(this.user.mobile){var t,e,s,a=this.user.mobile.length;return a>5?(t=this.user.mobile.substring(0,2),e=this.user.mobile.substring(2,a-3).replace(/\d/g,"*"),s=this.user.mobile.substring(a-3),t+e+s):a>3?(t=this.user.mobile.substring(0,1),e=this.user.mobile.substring(1,a-1).replace(/\d/g,"*"),s=this.user.mobile.substring(a-1),t+e+s):this.user.mobile.replace(/\d/,"*")}return""}})},Mi=Oi,Ni=(s("204c"),Object(d["a"])(Mi,Ti,Ii,!1,null,null,null));Ni.options.__file="ModifyMobileConfirm.vue";var Ei=Ni.exports,Li=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-pre-modify-mobile is-form c-modify"},[s("div",{staticClass:"p-pre-modify-mobile__nav"},[s("div",{staticClass:"o-fixed-tab",class:{"is-active":0===t.mode},on:{click:function(e){t.changeMode(0)}}},[t._v(t._s(t.$t("mobile.tab.phone")))]),s("div",{staticClass:"o-fixed-tab",class:{"is-active":1===t.mode},on:{click:function(e){t.changeMode(1)}}},[t._v(t._s(t.$t("mobile.tab.email")))])]),0===t.mode?s("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",label:t.$t("mobile.oldPhoneNumber")},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[s("area-code",{on:{change:t.pick}})],1):s("form-field",{staticClass:"c-form-field",attrs:{label:t.$t("mobile.oldEmail"),placeholder:t.$t("mobile.oldEmail")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode")},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[s("sms",{attrs:{mobile:t.mobile,areaCode:t.areaCode,email:t.email,mode:t.mode}})],1),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)},Di=[],ji={name:"pre-modify-mobile",components:{formField:gt,areaCode:Ut,sms:Gt},data:function(){return{mode:0,areaCode:"",mobile:"",email:"",vCode:"",error:""}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isStaff:function(){return"staff"===this.$route.params.mode},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},account:function(){return 0===this.mode?this.mobileVal:this.email},isValid:function(){return this.account&&this.vCode},url:function(){switch(this.mode){case 0:return this.isStaff,"staff/mobile/checkvcode";case 1:return this.isStaff,"staff/email/checkvcode";default:return""}}}),methods:{changeMode:function(t){this.mode!==t&&(this.areaCode="",this.mobile="",this.email="",this.vCode="",this.mode=t,this.$httpPost&&this.$httpPost.setUrl(this.url))},pick:function(t){this.areaCode=t},next:function(){var t=this;this.isValid&&(this.error="",this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.$router.replace({name:"modify-mobile"})},fail:function(e){t.error=e.message}})),this.$httpPost.request(0===this.mode?{token:this.user.token,mobile:this.mobile,vCode:this.vCode}:{token:this.user.token,email:this.email,vCode:this.vCode}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Ui=ji,Ri=(s("19ee"),Object(d["a"])(Ui,Li,Di,!1,null,null,null));Ri.options.__file="ModifyMobileValidate.vue";var Fi=Ri.exports,Hi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-form c-modify"},[s("form-field",{attrs:{type:"number",placeholder:t.$t("mobile.newPhoneNumber")},model:{value:t.mobile,callback:function(e){t.mobile="string"===typeof e?e.trim():e},expression:"mobile"}},[s("area-code",{on:{change:t.pick}})],1),s("div",{staticClass:"o-button o-button--submit t-adapt-button--active",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),s("div",{staticClass:"c-modify__error"},[t._v(t._s(t.error))])],1)},Bi=[],qi={name:"modify-mobile",components:{formField:gt,areaCode:Ut},data:function(){return{mobile:"",areaCode:"",error:""}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{isValid:function(){return this.mobile&&this.areaCode}}),methods:{pick:function(t){this.areaCode=t},save:function(){var t=this;this.isValid&&(this.error="",this.$httpPost||(this.$httpPost=this.$http.createPost("parent"===this.$route.params.mode?"parent/mobile/modify":"staff/mobile/modify",{opts:{lock:!0},success:function(e,s){t.user.mobile=s.mobile,t.$router.back()},fail:function(e){t.error=e.message}})),this.$httpPost.request({token:this.$route.params.token,mobile:this.mobile}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Gi=qi,Wi=(s("1aa2"),Object(d["a"])(Gi,Hi,Bi,!1,null,"2e176992",null));Wi.options.__file="ModifyMobile.vue";var zi=Wi.exports,Ji=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-attendance-wrapper"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("attendance.title")}}),s("weekly-calendar"),s("router-view",{staticClass:"l-navigation__content"})],1)},Vi=[],Yi=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Zi=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-weekly-calendar"},[s("div",{staticClass:"c-weekly-calendar__date"},[t._v("2018.11")]),s("div",{staticClass:"c-weekly-calendar__wrapper"},[s("div",{staticClass:"c-weekly-calendar__list"},[s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("1")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("2")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("3")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("4")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("5")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("6")])]),s("div",{staticClass:"c-weekly-calendar__item"},[s("div",{staticClass:"c-weekly-calendar__label"},[t._v("7")])])]),s("div",{staticClass:"c-weekly-calendar__extend"},[s("i",{staticClass:"c-weekly-calendar__icon"})])])])}],Qi={name:"calendar-weekly",components:{},props:[],data:function(){return{}},computed:{},watch:{},methods:{},beforeCreate:function(){},mounted:function(){},destroyed:function(){}},Ki=Qi,Xi=(s("59e6"),Object(d["a"])(Ki,Yi,Zi,!1,null,null,null));Xi.options.__file="CalendarWeekly.vue";var tn=Xi.exports,en={name:"attendance-wrapper",components:{navigation:Hs,weeklyCalendar:tn}},sn=en,an=Object(d["a"])(sn,Ji,Vi,!1,null,null,null);an.options.__file="AttendanceWrapper.vue";var nn=an.exports,on=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("attendance-statistics",{attrs:{title:t.$t("attendance."+t.type),result:t.result}},t._l(t.attendances,function(e,a){return s("attendance-item",{key:a,class:{"has-next":!t.isTeacher},attrs:{attendance:e},nativeOn:{click:function(s){t.toGradeAttendance(e)}}})}))},rn=[],cn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-attendance-statistics"},[s("attendance-block",{staticClass:"c-attendance-statistics__total",attrs:{title:t.title,supplement:t.supplement,attendance:t.result}},[s("div",{staticClass:"c-attendance-statistics__desc"},[t._v(t._s(t.$t("attendance.total")))])]),s("div",{staticClass:"c-attendance-statistics__list"},[t._t("default")],2)],1)},ln=[],dn={name:"attendance-statistics",props:{title:{type:String,default:""},supplement:{type:String,default:""},result:{type:Object,default:function(){return{arrived:0,total:0}}}},components:{attendanceBlock:_s}},un=dn,hn=(s("ea76"),Object(d["a"])(un,cn,ln,!1,null,null,null));hn.options.__file="AttendanceStatistics.vue";var pn=hn.exports,mn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-attendance-item"},[s("div",{staticClass:"c-attendance-item__tip"},[t._v(t._s(t.attendance.label))]),s("div",{staticClass:"o-progress",style:{width:t.attendance.proportion+"%"}},[s("div",{staticClass:"o-pregress__inner",style:{width:t.attendance.precent+"%"}})]),s("div",{staticClass:"c-attendance-item__percent u-more"},[s("span",{staticClass:"c-attendance-item__arrived"},[t._v(t._s(t.attendance.arrived))]),t._v("/"+t._s(t.attendance.total))])])},fn=[],vn={name:"attendance-item",props:["attendance"]},gn=vn,_n=(s("7e70"),Object(d["a"])(gn,mn,fn,!1,null,null,null));_n.options.__file="AttendanceItem.vue";var bn=_n.exports,yn={name:"attendance-school",components:{attendanceStatistics:pn,attendanceItem:bn},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{type:function(){return this.$route.params.type},isTeacher:function(){return"teacher"===this.type},url:function(){return this.isTeacher?"admin/teacher/attendance":"admin/student/schoollevel/attendance"}}),methods:{analysis:function(t){var e={arrived:this.isTeacher?t.arrivedStaffTotal:t.arrivedStudentTotal,total:this.isTeacher?t.staffTotal:t.studentTotal};this.isTeacher?this.attendances=t.staffStat.map(function(t){return t.label=t.schoolLevel,t.arrived=t.arrivedStaffSchoolLevelTotal,t.total=t.staffSchoolLevelTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/t.result*100:0,t}):this.attendances=t.studentStat.map(function(t){return t.label=t.schoolLevel,t.arrived=t.arrivedStudentSchoolLevelTotal,t.total=t.studentSchoolLevelTotal,t.proportion=t.studentSchoolLevelTotal>0?t.arrivedStudentSchoolLevelTotal/t.studentSchoolLevelTotal*100:0,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/t.result*100:0,t}),this.result=e},toGradeAttendance:function(t){this.isTeacher||this.$router.push({name:"attendance-grade",params:{schoolLevelId:t.idSchoolLevel}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost(this.url,{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,queryDate:""})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Cn=yn,kn=Object(d["a"])(Cn,on,rn,!1,null,null,null);kn.options.__file="AttendanceSchool.vue";var wn=kn.exports,$n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("attendance-statistics",{attrs:{title:t.$t("attendance."+t.type),result:t.result}},t._l(t.attendances,function(e,a){return s("attendance-item",{key:a,attrs:{attendance:e},nativeOn:{click:function(s){t.toClassAttendance(e)}}})}))},Sn=[],Pn={name:"attendance-grade",components:{attendanceStatistics:pn,attendanceItem:bn},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{type:function(){return this.$route.params.type},schoolLevelId:function(){return Number(this.$route.params.schoolLevelId)}}),methods:{analysis:function(t){var e={arrived:t.arrivedStudentSchoolLevelTotal,total:t.studentSchoolLevelTotal};console.log(t),this.attendances=t.gradeStudentStat.map(function(t){return t.label=t.gradeLevel,t.arrived=t.arrivedStudentGradeTotal,t.total=t.studentGradeTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}),this.result=e},toClassAttendance:function(t){this.$router.push({name:"attendance-classes",params:{gradeId:t.idGrade}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost("admin/student/grade/attendance",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,idSchoolLevel:this.schoolLevelId,queryDate:""})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},An=Pn,xn=Object(d["a"])(An,$n,Sn,!1,null,null,null);xn.options.__file="AttendanceGrade.vue";var Tn=xn.exports,In=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("attendance-statistics",{attrs:{title:t.$t("attendance."+t.type),result:t.result}},t._l(t.attendances,function(e,a){return s("attendance-item",{key:a,attrs:{attendance:e},nativeOn:{click:function(s){t.toClassAttendance(e)}}})}))},On=[],Mn={name:"attendance-classes",components:{attendanceStatistics:pn,attendanceItem:bn},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{type:function(){return this.$route.params.type},gradeId:function(){return Number(this.$route.params.gradeId)}}),methods:{analysis:function(t){var e={arrived:t.arrivedStudentGradeTotal,total:t.studentGradeTotal};this.attendances=t.classStudentStat.map(function(t){return t.label=t.classId,t.arrived=t.arrivedStudentClassTotal,t.total=t.studentClassTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}),this.result=e},toClassAttendance:function(t){this.$router.push({name:"attendance-class",params:{classId:t.idClass}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost("admin/student/class/attendance",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,idGrade:this.gradeId,queryDate:""})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Nn=Mn,En=Object(d["a"])(Nn,In,On,!1,null,null,null);En.options.__file="AttendanceClasses.vue";var Ln=En.exports,Dn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-attendance-class"},[s("percent-circle",{staticClass:"c-attendance-clas__percent",attrs:{result:t.result,tip:t.$t("attendance.arrived"),description:t.description}}),s("div",{staticClass:"c-attendance-class__students"},t._l(t.students,function(e,a){return s("div",{key:a,staticClass:"c-attendance-student",class:{"is-nonarrival":0===e.status,"is-leave":1===e.status,"is-manual":2===e.status,"is-recorded":3===e.status},on:{click:function(s){t.viewDetails(e)}}},[s("div",{staticClass:"c-attendance-student__avatar"},[s("div",{staticClass:"c-solid-avatar"},[s("div",{staticClass:"c-solid-avatar__icon",style:{backgroundImage:"url("+e.headUrl}})])]),s("div",{staticClass:"c-attendance-student__name"},[t._v(t._s(e.lastName))])])}))],1)},jn=[],Un=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-percent-circle"},[s("canvas",{ref:"canvas"}),s("div",{staticClass:"c-percent-circle__info"},[s("div",{staticClass:"c-percent-circle__total"},[s("span",{staticClass:"c-percent-circle__arrived"},[t._v(t._s(t.result.arrived))]),t._v("/"+t._s(t.result.total))]),s("div",{staticClass:"c-percent-circle__tip",class:{"is-empty":!t.tip}},[t._v(t._s(t.tip))]),s("div",{staticClass:"c-percent-circle__description",class:{"is-empty":!t.description}},[t._v(t._s(t.description))])])])},Rn=[],Fn=function(t,e){var s={colorArr:["#4ebafc","#4a85f5"],lineWidth:20,colorBg:"#e6eaed",r:100,startPoint:.7*Math.PI,targetPercent:0,point:{show:!1,color:"#ffffff"}};Object.assign(s,e),this.options=s;var a=t;this.ctx=a.getContext("2d"),this.currentPercent=0,this.targetPercent=this.options.targetPercent,this.exec=!1;var i=this.options.r+this.options.lineWidth,n=this.options.r+this.options.lineWidth;a.width=2*i,a.height=2*n,a.style.width=i+"px",a.style.height=n+"px",this.width=a.width,this.height=a.height,this.draw()};function Hn(t){return t.slice(0,2)+","+t.slice(2,4)+","+t.slice(4,6)}function Bn(t){var e=t.substring(1,t.length),s=Hn(e).split(","),a=[];return s.forEach(function(t){a.push(parseInt(t,16))}),a}function qn(t,e){for(var s=Bn(t),a=Bn(e),i=[],n=0;n<s.length;n++)s[n]+a[n]?i.push(parseInt((s[n]+a[n])/2)):i.push(0);var o=[];return i.forEach(function(t){t<10&&(t="0"+t),o.push(t.toString(16))}),"#"+o.join("")}Fn.prototype.draw=function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height);var e=this.options.r;if(this.ctx.lineWidth=this.options.lineWidth,this.ctx.save(),this.ctx.beginPath(),this.ctx.lineCap="round",this.ctx.strokeStyle=this.options.colorBg,this.ctx.arc(this.width/2,e+this.options.lineWidth,e,this.options.startPoint,Math.PI-this.options.startPoint,!1),this.ctx.stroke(),this.ctx.restore(),this.currentPercent>0){var s=qn(this.options.colorArr[0],this.options.colorArr[1]);this.ctx.save();var a=this.ctx.createLinearGradient(0,this.height,0,this.height/2+30-e);a.addColorStop(0,this.options.colorArr[0]),a.addColorStop(1,s),this.ctx.strokeStyle=a,this.ctx.lineCap="round";var i=-.5;if(this.currentPercent<.5&&(i=(2-2*(this.options.startPoint/Math.PI-.5))*this.currentPercent-(2-this.options.startPoint/Math.PI)),this.ctx.beginPath(),this.ctx.arc(this.width/2,e+this.options.lineWidth,e,this.options.startPoint,i*Math.PI,!1),this.ctx.stroke(),this.ctx.restore(),this.currentPercent>.5){var n=this.ctx.createLinearGradient(this.width/2,this.height,this.width/2,this.height/2+30-e);n.addColorStop(0,s),n.addColorStop(1,this.options.colorArr[1]),this.ctx.save(),this.ctx.strokeStyle=n,this.ctx.lineCap="round";var o=(this.currentPercent-.5)*(2-2*(this.options.startPoint/Math.PI-.5))-.5;this.ctx.beginPath(),this.ctx.arc(this.width/2,e+this.options.lineWidth,e,-.5*Math.PI,o*Math.PI,!1),this.ctx.stroke(),this.ctx.restore()}if(this.options.point.show){var r=(2-2*(this.options.startPoint/Math.PI-.5))*this.currentPercent-(2-this.options.startPoint/Math.PI),c=this.width/2+(this.width/2-this.options.lineWidth)*Math.cos(r*Math.PI),l=this.height/2+(this.width/2-this.options.lineWidth)*Math.sin(r*Math.PI);this.ctx.save(),this.ctx.fillStyle=t.options.point.color,this.ctx.beginPath(),this.ctx.arc(c,l,10,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.restore()}}},Fn.prototype.execAnimation=function(){var t=this;this.exec||(this.exec=!0,this.timer=setInterval(function(){t.currentPercent<t.targetPercent?(t.currentPercent+=.02,t.currentPercent>t.targetPercent&&(t.currentPercent=t.targetPercent),t.draw()):t.currentPercent>t.targetPercent&&(t.currentPercent-=.02,t.currentPercent<t.targetPercent&&(t.currentPercent=t.targetPercent),t.draw())},1e3/90))},Fn.prototype.stopAnimation=function(){this.exec&&(this.exec=!1,clearInterval(this.timer))};var Gn=Fn,Wn={name:"percent-circle",props:{result:{type:Object,default:function(){return{arrived:0,total:0,percent:0}}},tip:{type:String,default:""},description:{type:String,default:""}},methods:{refresh:function(){this.$canvas&&(this.$canvas.targetPercent=this.result.percent)}},watch:{result:function(){var t=this;this.$nextTick(function(){t.refresh()})}},mounted:function(){this.$canvas=new Gn(this.$refs.canvas,{lineWidth:14,r:180,startPoint:.7*Math.PI,targetPercent:this.result.percent,point:{show:!1,color:"#ffffff"}}),this.$canvas.execAnimation()},beforeDestroy:function(){this.$canvas&&this.$canvas.stopAnimation()}},zn=Wn,Jn=(s("0553"),Object(d["a"])(zn,Un,Rn,!1,null,null,null));Jn.options.__file="PercentCircle.vue";var Vn=Jn.exports,Yn={name:"attendance-class",components:{percentCircle:Vn},data:function(){return{result:{arrived:0,total:0,percent:0},description:"",students:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{classId:function(){return Number(this.$route.params.classId)},url:function(){return 3===this.user.roles?"admin/class/studentattendance":"teacher/class/studentattendance"}}),methods:{analysis:function(t){this.result={arrived:t.arrivedStudentClassTotal,total:t.studentClassTotal,percent:t.studentClassTotal>0?t.arrivedStudentClassTotal/t.studentClassTotal:0},this.description=this.$t("format.classInfo",{gradeLevel:t.gradeLevel,classId:t.classId}),this.students=t.studentAttendanceInfo},viewDetails:function(t){this.$router.push({name:"sing-in-student",params:{studentId:t.idStudent,type:0===t.status?"manual":""}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost(this.url,{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,idClass:this.classId,queryDate:""})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Zn=Yn,Qn=(s("29cf"),Object(d["a"])(Zn,Dn,jn,!1,null,null,null));Qn.options.__file="AttendanceClass.vue";var Kn=Qn.exports,Xn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation attendance-wrapper c-sign-in-information"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("attendance.title")}}),s("div",{staticClass:"l-navigation__content"},[s("div",{staticClass:"c-sign-in-information__wrapper"},[s("character-intro",{staticClass:"c-sign-in-information__intro c-character-intro--black",attrs:{person:t.student,smaller:!1}},[s("div",{staticClass:"c-sign-in-information__phone_wrapper"},[s("div",{staticClass:"c-sign-in-information__phone"})])]),t.manual?s("div",{staticClass:"c-sign-in-information__operation c-sign-in"},[s("div",{staticClass:"c-sign-in__item"},[t._v(t._s(t.$t("signInType.2"))),s("i",{staticClass:"c-sign-in__icon",class:{"c-sign-in__icon--checked":2===t.signInType},on:{click:function(e){t.signIn(2)}}})]),s("div",{staticClass:"c-sign-in__item"},[t._v(t._s(t.$t("signInType.3"))),s("i",{staticClass:"c-sign-in__icon",class:{"c-sign-in__icon--checked":3===t.signInType},on:{click:function(e){t.signIn(3)}}})])]):t._e(),s("div",{staticClass:"c-sign-in-information__data"},[s("div",{staticClass:"c-sign-in-data",on:{click:function(e){t.toHistory("normal")}}},[s("div",{staticClass:"c-sign-in-data__count"},[t._v(t._s(t.normal))]),t._m(0)]),s("div",{staticClass:"c-sign-in-data",on:{click:function(e){t.toHistory("abnormal")}}},[s("div",{staticClass:"c-sign-in-data__count c-sign-in-data__count--prominent"},[t._v(t._s(t.abnormal))]),t._m(1)])])],1)])],1)},to=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-sign-in-data__label"},[t._v(t._s(t.$t("signIn.normal")))])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-sign-in-data__label"},[t._v(t._s(t.$t("signIn.abnormal")))])}],eo={name:"sign-in-infomation",components:{navigation:Hs,characterIntro:os},data:function(){return{student:null,normal:0,abnormal:0,signInType:0,submitType:0}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{studentId:function(){return Number(this.$route.params.studentId)},manual:function(){return this.student&&"manual"===this.$route.params.type}}),methods:{analysis:function(t){this.student={id:t.idStudent,name:t.lastName,headUrl:t.headUrl,info:t.parentEmail,tag:this.$t("format.classInfo2",{gradeLevel:t.gradeLevel,classId:t.classId})},this.normal=t.accReachCount,this.abnormal=t.accAbsenceCount},signIn:function(t){var e=this;this.submitType!==t&&(this.$siginInHttpPost||(this.$siginInHttpPost=this.$http.createPost("teacher/student/signin",{opts:{lock:!0},success:function(){e.signInType=e.submitType},fail:function(){e.submitType=0}})),this.submitType=t,this.$siginInHttpPost.force({token:this.user.token,idStudent:this.studentId,type:t}))},toHistory:function(t){this.student&&this.$router.push({name:"attendance-history",params:{studentId:this.student.id,type:t}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost("teacher/studentstat",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,idStudent:this.studentId})},beforeDestroy:function(){this.$httpPost.cancel(),this.$siginInHttpPost&&this.$siginInHttpPost.cancel()}},so=eo,ao=(s("9aa5"),Object(d["a"])(so,Xn,to,!1,null,null,null));ao.options.__file="SignInInformation.vue";var io=ao.exports,no=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-navigation p-attendance-history"},[s("navigation",{staticClass:"l-navigation__header",attrs:{title:t.$t("attendance.history")}}),s("div",{staticClass:"c-attendance-type"},[s("router-link",{staticClass:"o-tab c-attendance-type__tab",class:{"is-active":"normal"===t.currentType},attrs:{to:{params:{type:"normal"}},replace:""}},[t._v(t._s(t.$t("signIn.normal")))]),s("router-link",{staticClass:"o-tab c-attendance-type__tab",class:{"is-active":"abnormal"===t.currentType},attrs:{to:{params:{type:"abnormal"}},replace:""}},[t._v(t._s(t.$t("signIn.abnormal")))])],1),s("div",{ref:"wrapper",staticClass:"l-navigation__content u-overflow-hidden"},[s("div",[s("ul",{ref:"listWrapper"},t._l(t.attendances,function(e,a){return s("li",{key:a},[t._o(s("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(e.label))]),0,a),s("div",{staticClass:"p-attendance-history__list"},t._l(e.attendances,function(e,a){return s("div",{key:a,staticClass:"c-attendance-history-item"},[s("div",{staticClass:"c-attendance-history-item__info u-clearfix"},[s("div",{staticClass:"c-attendance-history-item__date"},[t._v(t._s(e.date))]),s("div",{staticClass:"c-attendance-history-item__state"},[t._v(t._s(t.$t("signInType."+e.type)))])]),s("div",{staticClass:"c-attendance-history-item__time"},[t._v(t._s(e.time))])])}))])})),t.canPullUp?s("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.pullUpTip))]):t._e()]),s("loading",{attrs:{fetching:t.loading,isError:t.isError,retry:t.fetch}}),t.empty?s("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1)],1)},oo=[],ro={name:"attendance-history",components:{navigation:Hs,loading:Js},data:function(){return{httpPost:null,page:1,isPullUpLoad:!1,error:!1,hasMore:!0,hasFetched:!1,attendances:null,currentType:null,$normalAttendances:[],$abnormalAttendances:[]}},computed:Object(ut["a"])({},Object(m["c"])(["user"]),{studentId:function(){return Number(this.$route.params.studentId)},fetching:function(){return this.httpPost&&this.httpPost.isRequesting()},loading:function(){return this.fetching&&!this.hasFetched},isError:function(){return this.error&&!this.hasFetched},has:function(){return this.attendances.length>0},empty:function(){return this.hasFetched&&!this.has&&!this.hasMore},canPullUp:function(){return this.hasFetched&&this.hasMore},pullUpTip:function(){return this.isPullUpLoad?this.$t("pullUp.loading"):this.hasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")}}),methods:{updateAttendances:function(t){this.currentType!==t&&(this.attendances="abnormal"===t?this.$data.$abnormalAttendances:this.$data.$normalAttendances,this.currentType=t,this.forceUpdate(!0))},initScroll:function(){var t=this;this.$refs.wrapper&&this.hasFetched&&!this.$scroll&&(this.$refs.listWrapper.style.minHeight="".concat(Ls(this.$refs.wrapper).height+1,"px"),this.$scroll=new kt["a"](this.$refs.wrapper,{scrollY:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$scroll.on("pullingUp",function(){t.hasMore&&!t.fetching?(t.isPullUpLoad=!0,t.fetch()):t.$scroll.finishPullUp()}))},pullUpFnished:function(){this.isPullUpLoad&&(this.isPullUpLoad=!1,this.$scroll.finishPullUp())},forceUpdate:function(t){var e=this;this.$nextTick(function(){e.$scroll?(e.pullUpFnished(),e.$scroll.refresh(),t&&e.$scroll.scrollTo(0,0,0)):e.initScroll()})},isSameMonth:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()},isSameDay:function(t,e){return this.isSameMonth(t,e)&&t.getDate()===e.getDate()},checkDateStr:function(t){var e=new Date;return this.isSameDay(e,t)?this.$t("history.today"):(e.setDate(e.getDate()-1),this.isSameDay(e,t)?this.$t("history.yesterday"):this.$t("format.month-day",{month:this.$d(t,"month"),day:t.getDate()}))},addData:function(t){var e;e=3===t.type?this.$data.$abnormalAttendances:this.$data.$normalAttendances;var s=e[e.length-1],a=new Date(t.checkTime);s&&this.isSameMonth(s.date,a)||(s={label:this.$t("format.year-month",{year:a.getFullYear(),month:this.$d(a,"month")}),date:a,attendances:[]},e.push(s)),s.attendances.push({date:this.checkDateStr(a),time:t.checkTimeStr.split(" ")[1],type:t.type})},add:function(t){if(this.hasFetched=!0,0!==t.length){for(var e=0,s=t.length;e<s;e++)this.addData(t[e]);this.page+=1}else this.hasMore=!1},fetch:function(){this.httpPost.request({token:this.user.token,idStudent:this.studentId,page:this.page,pageSize:20})}},watch:{fetching:function(t,e){var s=this;e&&!t&&setTimeout(function(){s.forceUpdate()},20)}},beforeRouteUpdate:function(t,e,s){this.updateAttendances(t.params.type),s()},created:function(){var t=this;this.updateAttendances(this.$route.params.type),this.httpPost=this.$http.createPost("teacher/student/signinrecord",{success:function(e){t.error=!1,t.add(e.data)},fail:function(){t.error=!0}}),this.fetch()},mounted:function(){this.initScroll()},beforeDestroy:function(){this.httpPost&&this.httpPost.cancel(),this.$scroll&&this.$scroll.destroy()}},co=ro,lo=(s("05bc"),Object(d["a"])(co,no,oo,!1,null,"346e4b3e",null));lo.options.__file="AttendanceHistory.vue";var uo=lo.exports;a["a"].use(ct["a"]);var ho=new ct["a"]({routes:[{path:"/login/:mode(parent|staff)?",name:"login",component:Yt},{path:"/forget/:mode(parent|staff)/pwd",name:"pre-reset-pwd",component:ee},{path:"/forget/:mode(parent|staff)/pwd/:token",name:"reset-pwd",component:re},{path:"/:mode(parent|staff)",component:pe,children:[{path:"boot/pwd/:token",name:"set-pwd",component:re,meta:{login:!0,mode:!0}},{path:"bind/:type?",name:"bind",component:be,meta:{login:!0,mode:!0}},{path:"scan/:id",name:"scan",component:je,meta:{login:!0,mode:!0}},{path:"bind/success/:id",name:"bind-success",component:Se,meta:{login:!0,mode:!0}},{path:"bind/failure/:id",name:"bind-failure",component:Oe,meta:{login:!0,mode:!0}},{path:"unbind/:id",name:"unbind",component:qe,meta:{login:!0,mode:!0}},{path:"home/:index(\\d+)?",name:"home",component:Ms,meta:{login:!0,mode:!0}},{path:"history/:id",name:"history",component:Qs,meta:{login:!0,mode:!0}},{path:"motion/:id",name:"motion",component:da,meta:{login:!0,mode:!0}},{path:"bracelet",name:"bracelet",component:va,meta:{login:!0,mode:!0}},{path:"account",name:"account",component:ka,meta:{login:!0,mode:!0}},{path:"pwd",component:Ka,children:[{path:"preset/:next",name:"pre-modify-pwd",component:ee,meta:{login:!0,mode:!0}},{path:"modify",name:"modify",component:ii,meta:{login:!0,mode:!0}}],meta:{login:!0,mode:!0}},{path:"email/modify",name:"modify-email",component:di,meta:{login:!0,mode:!0}},{path:"mobile",component:xi,children:[{path:"confirm",name:"modify-mobile-confirm",component:Ei,meta:{login:!0,mode:!0}},{path:"validate",name:"pre-modify-mobile",component:Fi,meta:{login:!0,mode:!0}},{path:"modify",name:"modify-mobile",component:zi,meta:{login:!0,mode:!0}}],meta:{login:!0,mode:!0}},{path:"bluetooth",name:"bluetooth",component:ki,meta:{login:!0,mode:!0}}]},{path:"/setting",name:"setting",component:za,meta:{login:!0}},{path:"/setting/language",name:"modify-language",component:vi,meta:{login:!0}},{path:"/children",name:"children",component:xa,meta:{login:!0,mode:"parent"}},{path:"/children/:id",name:"children-info",component:Ea,meta:{login:!0,mode:"parent"}},{path:"/children/:id/bus",name:"modify-bus",component:Fa,meta:{login:!0,mode:"parent"}},{path:"/attendance/:type(teacher|student)",component:nn,children:[{path:"school",name:"attendance-school",component:wn,meta:{login:!0,mode:"staff"}},{path:"grade/:schoolLevelId",name:"attendance-grade",component:Tn,meta:{login:!0,mode:"staff"}},{path:"classes/:gradeId",name:"attendance-classes",component:Ln,meta:{login:!0,mode:"staff"}},{path:"class/:classId",name:"attendance-class",component:Kn,meta:{login:!0,mode:"staff"}}],meta:{login:!0,mode:"staff"}},{path:"/singin/student/:studentId/:type?",name:"sing-in-student",component:io,meta:{login:!0}},{path:"/attendance/history/:studentId/:type(normal|abnormal)",name:"attendance-history",component:uo,meta:{login:!0}},{path:"*",redirect:"/login"}]});ho.beforeEach(function(t,e,s){if(rt.state.isLogined){var a=rt.state.user.mode;t.meta.mode&&t.meta.mode!==a?!0===t.meta.mode?t.params.mode&&t.params.mode!==a?s({name:t.name,params:Object.assign({},t.params,{mode:a}),replace:!0}):s():s({name:"home",params:{mode:rt.state.user.mode},replace:!0}):s()}else t.meta.login?s({name:"login",replace:!0}):s()});var po=ho,mo=!1;a["a"].config.productionTip=mo,a["a"].config.debug=mo,a["a"].config.devtools=mo,a["a"].directive("overflow",{inserted:function(t){t.offsetWidth<=t.parentNode.offsetWidth?t.classList.remove("is-overflow"):t.classList.add("is-overflow")},componentUpdated:function(t){t.offsetWidth<=t.parentNode.offsetWidth?t.classList.remove("is-overflow"):t.classList.add("is-overflow")}}),new a["a"]({store:rt,router:po,i18n:xt,render:function(t){return t(h)}}).$mount("#app")},"59e6":function(t,e,s){"use strict";var a=s("ab95"),i=s.n(a);i.a},"5b4d":function(t,e,s){t.exports=s.p+"img/placeholder.60774259.png"},"5c0b":function(t,e,s){"use strict";var a=s("5e27"),i=s.n(a);i.a},"5e27":function(t,e,s){},6217:function(t,e,s){},"63bd":function(t,e,s){"use strict";var a=s("9f57"),i=s.n(a);i.a},6617:function(t,e,s){"use strict";var a=s("44bf"),i=s.n(a);i.a},"69fe":function(t,e,s){"use strict";var a=s("1641"),i=s.n(a);i.a},"6ba9":function(t,e,s){"use strict";var a=s("cabc"),i=s.n(a);i.a},"6fb2":function(t,e,s){},7578:function(t,e,s){"use strict";var a=s("6217"),i=s.n(a);i.a},"7e70":function(t,e,s){"use strict";var a=s("2b60"),i=s.n(a);i.a},8853:function(t,e,s){},"88a7":function(t,e){t.exports="data:image/gif;base64,R0lGODlhZABkAKIEAN7e3rq6uv///5mZmQAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBRjA4RUZDMDI3MjA2ODExODA4M0Y1OTQyMzVDRDM3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMzE0Rjk3NDdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMzE0Rjk3MzdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVBMTZDQjczOTIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUYwOEVGQzAyNzIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFAAAEACwAAAAAZABkAAAD/0i63P4wykmrvTjrzbv/YCiOZGme6CasbOqObPvOXRzTeGbLeT/tK18KQLwABZeBUlghOgGVY0VJHTAlT2cUOK0ur4+s9sedeKngsBhK3lHO3zRjXZRIJfC4fEFv28xwew50bBB3EHlWgg2EEYcOiYtqYo5lD3mSk5QPjwyRmYNrhpYNmKChog6dCp+njKkNqwSmrq+wDG6QtD4BvRiNsX+lu296Hb3IARd9qjyegRZnH8nUTbfR0IDZG9TdFJsa0trEGd3eE08eVcWJihzm5ovt6x7w8WDz9CD25z35aCT4Vcvxz9gIgchwFJyBUOG8HvwckqNhT6K4K/1oXJST0P8HwFogQ4ocSbKkyVoFP8pJaRARS31MXsJ0KdNdzJo2L+FsqXFnzmE7r/j8CVRmmqDjXh7F2UXpSqMno0qdSrWq1ZNENWby4m/mzY0uJvYUa6JdV7NjW4XNZ1Ft2X9nH5ZIKYSuiIX44ILAu5StOr8RvGIQ/EwuB8OBuW4Aq9NtBseNCbOTXJjx4G14MDdVPJny5qyROS9gDJkmzxkTLZM95ZhcaVCQU6+WJ1v17D2lxb4WRLa3Zkmvff/mPZxV8VnH8x5fvfur5cqem3tMjvw5dJW4qd++HRe7ac/GRWcX/9176NNCwYcn//3qevXuz6OPn9g6/czw7xedrz9x//8KAAYo4IAEFthAAgAh+QQFAAAEACwLAAUAPwAjAAADxUi63P4QyAmrvfhNmrvP2/aNJBNyZdqdkvoFsMcCnmCTcB6AbGb/gpcuhpn5gLfOMFfsXZA/z5JoMT6hQeV0V3VWsEnt8mL9YkdbbsT7AGeF00rZ4U5t5ewGWJVenyB1fHEaeQt7Ln0Oc4aHiIMNiwqNjo8mIW2TCwObcGOQl3qZCpukA1KVCyJ0Zw6lrhl3I6IErrUYniRQELW2FzouQBW8vC7FDcPExsrIvcouzK/OxdCk0sbU1svI2drJ3NfR387V4hgJACH5BAUAAAQALBoABQA/ACMAAAPFSLrcHjC6Sau9L0LMu1ea9o0kE0pl6p2b6g3wynpATcL4wLEBV/+ATw63m2GAv9cwduEdkbbOkmlxXqBRzpRKsVawWe20afxiR1tdxTsBB9HbddnhTsW78wZYlcafKHV8YxNsDHsufRl/dIeIgw2FCo2OjyYhbZOUS4oohpkXAqEVd5CdnlAeoaoCFKQ0Zxirsq1DKaigsrO0XCRAsbm6LsIKwMDDwsXGxynJucsqzcHPI9Gq09DR1y7N2sjF3cPO4MfWHQkAIfkEBQAABAAsLgAFADEAMAAAA71Is0z+MMpJJ2s1a33v/qDTYWFJjYupSugQBvAKtR9sB7KI1ncs05qeLQfMCH2rIuWIVCknzJxiV2HiiFRoVPqEbLnZiFWqGy2P5HJHi053CV/3WjJOq1Pi+AbAz3jobR98gwAyehSEiYY9e4mKi02Ijo92kpOUlRCXk5kRm46dnp+EoZqjfaWmn6kSq6ytl6+Wg7IZtLW4ubq7vL2dAsDBwsPApcTHyL/Iy8GZzM/FdtDPztPHytbDodnCDgkAIfkEBQAABAAsOwAKACQAPwAAA69IujzOMMpJnB0062u1h1z3jeEzeqV5Zum6te6UYrFc1vaNR/De9D4FMDgLLoqngDLHSSqfkuHkSV3ympqqlunRbndeLy4sjpG/5jN1rLayz0a4kUCeL9B2BTTP7/v/gIERAISFhoeELoiLjCeMj4YjkJOJHpSTkpeLjpqIK52RgqKjpKUjAoECqqp+q66oea+vdrKyRrW2Qbi5O7u8OL6uusGsw8Fzx7S4fMt9sxEJACH5BAUAAAQALDsAGQAkAD8AAAOtSLrcziO+SV+8o2qL8f5d+GmhOHJldzZpuS6t+RKxOtO1dCv5DrU+VirokBGFmaNyyWw6n8yAdEqtSl/WrPak7VJH3vB1Iw6Dy1ku2rpaf6HwuHzuBMQBePwzz7cz+31LgIBHg4REhoc+iYo7jHyIj3oTApUCGpJ+DZaWG48PnJ2ehg6hoqONCqanqJOlq02rlbGyTLKXtrW5prSwu6G9vL/Aw6xHusW4yU/EOwkAIfkEBQAABAAsLgAtADEAMQAAA7lIutz+ZMhJq4Q4L8u7/k0nUmA5nlepoaf6sZ67wpb80pOt73zv/8CgcLgLEGWBZPIIUjqNTMzzGX1Mp1XGFZtVbLnZL7gqdnYJZWUPwAZo0lBbu/0p7+b0+laHz+vHCwKCgw59fn9LD4OEhYZCi4uNjkCQjA2GbJSVAg+Ybj+bnJ2YoJsYpD6hp6g8qqt9qaavsK2ys3i1lR+sNq4ZvDK+v7Q6wreZO8a3PcpdzVnP0JBnitPU1dcOCQAh+QQFAAAEACwaADoAPwAkAAADyEi63P4wkiGrvXhojbu3W0h9ZCmKZZqdqOo+7PnOTCzTs33jrh7yL99GIigKXIFkoCIcOYzGlFIJ0j2g0dKUWmVdsUXSltttMcBZBmDNdozJZecZ/WC33W8cOtyw2/F5L3tHDn53DW9Jgnt1hgAPiUsqgxCOj5CJk3SVjhGZJZSchp6fH4wRlhKlHaGifqqrFq2uf7CBF6cSqRWxRJu6nby3smAXu8JbrMUWx7ZTHlgYzc6SQIXB1jPT2Snb3CWj39qv4jRr5QwJACH5BAUAAAQALAsAOgA/ACQAAAPHSLrcJC7KSesUGNvNu8og5I3kE4Jlap2n6kZs+86xPKu1fZc5uuM9zS8VFE0ASIBrwBxccpZkMtVsSmob6bRUtTpiHO3W0/V+fVkx0hFoux1l80ytZLvbkbjzRq8z7ndwenN0EYBvgnEvfYaHAXmDKoyNhxJ6eyWFEo6PloqZmpSAE5egYhScFJEek5uOqqtpahWpsJ+yWha1tl0doRO7pLdRp7qvFsMVs8aVyGWsUhzBvJhDDdPWKtjZJdvcJM3fL+Hi450qCQAh+QQFAAAEACwFAC0AMQAxAAADukgq3P5MyUmrlTDryzvRoOONU2hG5HiaKblurfpCsTs3da7vfO//wKBwCAQQa4Bk8jhSOo1My/MZpUynVckVW91ymd7vMezMkpXmsyfADvDIo3Z75yXJ57pt6o7PUfd8bBUDhIVDgW6DhYRCiIkTi4tAjhaRhj+UipaYiBeWjD6dnp+hopWkPaanmzyZo6w6rq+RrYEjnwO1fLeosbu8sDm2wLS6giS4WavFypC9zQrJ0M6S09SX1s4SCQAh+QQFAAAEACwFABkAJAA/AAADrki6Ks4wytmcpRjb/bJfXPh5oThSZXlOqbpGrfmC8TZD9XUz+Q63vp8riOMQUZ2jcslsOp8MgHRKrUpf1qz2pO1SR97w1SMOg8tZLtq6Wn+h8Lh8Tj8F4oF83qnv35V+fkeBgUSEhTuHiDOKiy+NfT6QepKTGQOYAxOQHpmZEoofnp8RhyOjpBCCp6iYTK2aS7CxR7OvsLK4uai3rb2jv8BKtrvCxZ5Nvsm8TsYRCQAh+QQFAAAEACwFAAoAJAA/AAADrki63K4ivklnvKJqi+X+S3eBoOiRmnmilMqm7tvG8kPXjZrhzs1Dvl+Qp6MAjqii48gEkILN6AcalcIwj2p1g81qt7yv9icG18pWHJr5I6zbijI8/p0vzHa6M8/v+/+AGgGDhIWGgyyHioski46FII+SiBuTkpGWio2ZhyickIGhoqOkogOAA6mpfKqtp3Curm2xsT+0tTW3uC+6uyy9rTjAqsLDtr2wt3bKebI/CQA7"},"8ca5":function(t,e,s){},9411:function(t,e,s){},"9aa5":function(t,e,s){"use strict";var a=s("9cec"),i=s.n(a);i.a},"9abc":function(t,e,s){},"9c3c":function(t,e,s){"use strict";var a=s("2731"),i=s.n(a);i.a},"9cec":function(t,e,s){},"9f57":function(t,e,s){},ab95:function(t,e,s){},ab9d:function(t,e,s){},ac30:function(t,e,s){"use strict";var a=s("8853"),i=s.n(a);i.a},ad79:function(t,e,s){},add2:function(t,e,s){},ae35:function(t,e,s){},b1fa:function(t,e,s){"use strict";var a=s("ca48"),i=s.n(a);i.a},bdca:function(t,e,s){"use strict";var a=s("c7f8"),i=s.n(a);i.a},c23c:function(t,e,s){},c58e:function(t,e,s){},c7f8:function(t,e,s){},ca48:function(t,e,s){},ca86:function(t,e,s){},cabc:function(t,e,s){},dd4a:function(t,e,s){},de91:function(t,e,s){"use strict";var a=s("add2"),i=s.n(a);i.a},e244:function(t,e,s){"use strict";var a=s("8ca5"),i=s.n(a);i.a},e3a7:function(t,e,s){},e6e9:function(t,e,s){},ea76:function(t,e,s){"use strict";var a=s("6fb2"),i=s.n(a);i.a},ebe8:function(t,e,s){"use strict";var a=s("e3a7"),i=s.n(a);i.a}},[[0,"runtime","chunk-vendors"]]]);
//# sourceMappingURL=app.121cd521.js.map