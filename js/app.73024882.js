(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,i){t.exports=i("56d7")},"01cb":function(t,e,i){"use strict";var s=i("c23c"),a=i.n(s);a.a},"0553":function(t,e,i){"use strict";var s=i("ca86"),a=i.n(s);a.a},"0ee2":function(t,e,i){},"12ff":function(t,e,i){"use strict";var s=i("fd23"),a=i.n(s);a.a},1641:function(t,e,i){},1812:function(t,e,i){"use strict";var s=i("4e5c"),a=i.n(s);a.a},"19ee":function(t,e,i){"use strict";var s=i("dd4a"),a=i.n(s);a.a},"1d13":function(t,e,i){"use strict";var s=i("f874"),a=i.n(s);a.a},"1f08":function(t,e,i){},"204c":function(t,e,i){"use strict";var s=i("c58e"),a=i.n(s);a.a},2137:function(t,e,i){"use strict";var s=i("36f2"),a=i.n(s);a.a},"28a2":function(t,e,i){"use strict";var s=i("fd2b"),a=i.n(s);a.a},"296f":function(t,e,i){},"2b11":function(t,e,i){"use strict";var s=i("1f08"),a=i.n(s);a.a},"36f2":function(t,e,i){},"39b3":function(t,e,i){"use strict";var s=i("718c"),a=i.n(s);a.a},"3a5b":function(t,e,i){},"3b56":function(t,e,i){"use strict";var s=i("0ee2"),a=i.n(s);a.a},"3f8d":function(t,e,i){"use strict";var s=i("4562"),a=i.n(s);a.a},"411c":function(t,e,i){"use strict";var s=i("9abc"),a=i.n(s);a.a},"44bf":function(t,e,i){},4562:function(t,e,i){},"4b84":function(t,e,i){},"4e5c":function(t,e,i){},5080:function(t,e,i){"use strict";var s=i("d7c1"),a=i.n(s);a.a},5374:function(t,e,i){"use strict";var s=i("e2c3"),a=i.n(s);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("ac6a"),i("5df3"),i("cadf"),i("551c"),i("097d"),i("8594"),i("455b");var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-safe-area"},[t._t("bg"),i("div",{staticClass:"l-safe-area__topbar"},[t._t("topbar")],2),i("div",{staticClass:"l-safe-area__content"},[t._t("default")],2),i("div",{staticClass:"l-safe-area__footer"},[t._t("footer")],2),t._t("inde")],2)},n=[],o={name:"safe-area-layout"},r=o,c=(i("8afe"),i("2877")),l=Object(c["a"])(r,a,n,!1,null,null,null);l.options.__file="SafeAreaLayout.vue";var h=l.exports,u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-navigation"},[i("template",{slot:"topbar"},[i("navigation",{staticClass:"l-navigation__header",attrs:{title:t.title}},[t._t("button")],2),t._t("topbar")],2),t._t("default"),t._t("footer",null,{slot:"footer"})],2)},d=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-navigation-bar"},[i("span",{staticClass:"c-navigation-bar__icon_wrapper",on:{click:t.back}},[i("i",{staticClass:"c-navigation-bar__icon"})]),t._v(t._s(t.title)+"\n  "),t._t("default")],2)},p=[],m={name:"navigation-bar",props:["title"],methods:{back:function(){this.$router.back()}}},v=m,_=(i("6617"),Object(c["a"])(v,f,p,!1,null,null,null));_.options.__file="NavigationBar.vue";var g=_.exports,b={name:"navigation-wrapper",props:["title"],components:{navigation:g}},C=b,w=Object(c["a"])(C,u,d,!1,null,null,null);w.options.__file="NavigationWrapper.vue";var y=w.exports;s["a"].directive("overflow",{inserted:function(t){t.offsetWidth<=t.parentNode.offsetWidth?t.classList.remove("is-overflow"):t.classList.add("is-overflow")},componentUpdated:function(t,e){e.value!==e.oldValue&&(t.classList.contains("is-overflow")&&t.classList.remove("is-overflow"),t.offsetWidth>t.parentNode.offsetWidth&&t.classList.add("is-overflow"))}}),s["a"].component("SafeAreaLayout",h),s["a"].component("NavigationWrapper",y);var $=i("8237"),k=i.n($),P=i("bc3a"),S=i.n(P),E=(i("f751"),{upgrade:15e3,timeout:3e4,useLog:!1,useBackDoor:!0,isDebug:!1}),I="https://tencentim.cdnis.edu.hk/icapp/",A=Object.assign(E,{base_url:I}),T=A,D=I;function O(t){D=t}function x(t,e){return"".concat(D,"commont/getAttachment?attachmentId=").concat(t,"&token=").concat(e)}function M(t){return"".concat(D,"common/getAttachment?attachmentId=").concat(t)}var N=null,U=null,L=!1,j=!1,H=[];function R(t){if(window.console&&window.console.log&&window.console.log(t),N||j){if(!N){N=document.createElement("div"),N.style.position="absolute",N.style.top="0px",N.style.bottom="0px",N.style.left="-60%",N.style.width="60%",N.style.fontSize="12px",N.style.color="rgb(255, 0, 0)",N.style.backgroundColor="rgba(0, 0, 0, 0.3)",U=document.createElement("div"),U.style.position="absolute",U.style.top="0px",U.style.bottom="0px",U.style.left="0px",U.style.right="0px",U.style.overflow="auto",U.style.fontSize="12px",U.style.wordBreak="break-all",U.style.backgroundColor="rgba(0, 0, 0, 0.3)",N.appendChild(U);var e=document.createElement("div");e.style.position="absolute",e.style.bottom="0px",e.style.right="-30px",e.style.width="30px",e.style.height="30px",e.style.backgroundColor="rgb(255, 0, 0)",e.style.borderTopRightRadius="100%",e.onclick=function(){L=!L,N.style.left=L?"0px":"-60%"},N.appendChild(e),document.body.appendChild(N)}var i=document.createElement("div");i.innerHTML="".concat(t,"</br>----------"),U.insertBefore(i,U.childNodes[0])}else H.push(t)}function F(t){if(j=t,N)N.style.display=j?"block":"none";else if(j&&!N){for(var e=0,i=H.length-1;e<i;e++)R(H[e]);H=[]}}function B(){return j}var V,q,W=new s["a"],G=W,Y=i("d4ec"),z=i("bee2"),Z=i("4328"),J=i.n(Z),Q=(i("a481"),i("ade3")),K=(i("7514"),i("2f62")),X="LOGIN",tt="LOGOUT",et={UNKNOWN:"unknown",PARENT:"parent",STAFF:"staff"},it={HEADMASTER:1,HEADMASTER_MIDDLE:2,HEADMASTER_LOWER:3,DIRECTOR:4,HEADTEACHER:5,GENERAL:6},st={MALE:"Male",FEMALE:"Female"},at="CUSTOM__TOAST",nt="CUSTOM__TOKEN_INVALID",ot="CUSTOM__REQUESTING",rt="CUSTOM__REQUEST_FINISHED",ct="CUSTOM__LOGIN",lt="CUSTOM__LOGOUT",ht="CUSTOM__SAVE_PIC",ut="CUSTOM__SAVE_PIC_SUCCESS",dt="CUSTOM__BRACELET_STATE_CHANGED",ft="CUSTOM__BRACELET_ENERGE_CHANGED",pt="CUSTOM__WRITE_BRACELET",mt="CUSTOM__WRITE_BRACELET_SUCCESS",vt="CUSTOM__WRITE_BRACELET_FAIL",_t=i("27ae");s["a"].use(K["a"]);var gt="ZmsJahAsd",bt=window.localStorage.getItem(gt);bt&&(bt=JSON.parse(_t["Base64"].decode(bt)));var Ct="SET_RUNTIME_MODE",wt="CLEAR",yt="UPDATE_USER",$t="SAVE_USER",kt="UPDATE_RELATED_FIGURES",Pt="UPDATE_RELATED_FIGURE",St="TRANSFORM_NAME",Et="WRITE_BRACELET",It={};function At(t,e){return It[t]||(It[t]=de.createPost(t,e)),It[t]}function Tt(){for(var t in It)It[t].cancel();It={}}var Dt={runtimmeMode:"normal",user:bt,figures:[],hasWritten:{}},Ot={isLogined:function(t){return!!t.user},mode:function(t,e){return e.isLogined?t.user.mode:et.UNKNOWN},isParent:function(t,e){return e.mode===et.PARENT},isStaff:function(t,e){return e.mode===et.STAFF},isAdmin:function(t,e){if(e.isStaff)switch(t.user.roles){case it.HEADMASTER:case it.HEADMASTER_MIDDLE:case it.HEADMASTER_LOWER:case it.DIRECTOR:return!0;default:return!1}return!1},isHeadTeacher:function(t,e){return!!e.isStaff&&t.user.roles===it.HEADTEACHER},getFigure:function(t,e){return function(i){switch(e.mode){case et.PARENT:case et.STAFF:return t.figures.find(function(t){return t.id===i});default:return null}}},phoneNumber:function(t,e){return e.isLogined&&t.user.areaCode&&t.user.mobilePhone?"852"===t.user.areaCode?t.user.mobilePhone:t.user.areaCode+t.user.mobilePhone:""}};function xt(t,e){if(t&&e)for(var i in e)s["a"].set(t,i,e[i])}var Mt=(V={},Object(Q["a"])(V,X,function(t,e){t.user=e}),Object(Q["a"])(V,tt,function(t){t.user=null,window.localStorage.removeItem(gt)}),Object(Q["a"])(V,wt,function(t){t.figures=[],t.runtimmeMode="normal",t.hasWritten={},Tt()}),Object(Q["a"])(V,kt,function(t,e){t.figures=e}),Object(Q["a"])(V,Ct,function(t,e){t.runtimmeMode=e}),Object(Q["a"])(V,yt,function(t,e){xt(t.user,e)}),Object(Q["a"])(V,$t,function(t){t.user&&window.localStorage.setItem(gt,_t["Base64"].encode(JSON.stringify(t.user)))}),Object(Q["a"])(V,Pt,function(t,e){xt(t.figures.find(function(t){return t.id===e.id}),e.info)}),Object(Q["a"])(V,St,function(t){var e;switch(t.user.gender){case st.MALE:e="Mr.".concat(t.user.lastName);break;case st.FEMALE:e="Ms.".concat(t.user.lastName);break;default:e=t.user.firstName||t.user.userName;break}s["a"].set(t.user,"name",e)}),Object(Q["a"])(V,Et,function(t,e){t.hasWritten[e.key]=e.state}),V),Nt=(q={},Object(Q["a"])(q,X,function(t,e){var i=t.state,s=t.commit,a=t.dispatch;e&&e.macAddress&&(e.macAddress=e.macAddress.replace(/[-:]/g,"").toLowerCase()),s(wt),s(X,e),s(St,e),a(kt),G.$emit(ct,i.user)}),Object(Q["a"])(q,tt,function(t){var e=t.commit;e(wt),e(tt),G.$emit(lt)}),Object(Q["a"])(q,yt,function(t,e){var i=t.commit;i(yt,e),i(St),i($t)}),Object(Q["a"])(q,kt,function(t){var e=t.state,i=t.getters,s=t.commit;if(i.isLogined)switch(e.user.mode){case"parent":At("parent/children",{data:{token:e.user.token},opts:{retry:!0},success:function(t){return s(kt,t.data.map(function(t){return t.name="".concat(t.firstName," ").concat(t.lastName),t.braceletMac&&(t.braceletMac=t.braceletMac.replace(/[-:]/g,"").toLowerCase()),t}))}}).request();break;case"staff":s(kt,[e.user]);break;default:break}}),Object(Q["a"])(q,"setRuntimeMode",function(t,e){var i=t.commit;i(Ct,e)}),Object(Q["a"])(q,"updateUserInfo",function(t,e){var i=t.state,s=t.getters,a=t.commit;s.isLogined&&(a(yt,e),1===i.user.hasPasswordSetted&&a($t))}),Object(Q["a"])(q,"updateFigureInfo",function(t,e){var i=t.commit;i(Pt,e)}),Object(Q["a"])(q,"saveUser",function(t){var e=t.commit;Ot.isLogined&&(0===Dt.user.hasPasswordSetted&&e(yt,{hasPasswordSetted:1}),Ot.isParent&&window.localStorage.setItem("hasLoggedIn","true"),e($t))}),Object(Q["a"])(q,"writeBracelet",function(t,e){var i=t.commit;i(Et,e)}),q),Ut=new K["a"].Store({state:Dt,getters:Ot,mutations:Mt,actions:Nt,modules:{}}),Lt=Ut;function jt(){return new Promise(function(t){if(Ut.getters.isLogined){var e;switch(Ut.state.user.mode){case"parent":e="parent/info";break;case"staff":e="staff/info";break;default:return void t()}de.createPost(e,{opts:{ignore:!0,prevent:!0},success:function(t){t.data&&t.data.macAddress&&(t.data.macAddress=t.data.macAddress.replace(/[-:]/g,"").toLowerCase()),Ut.dispatch(yt,t.data),Ut.dispatch(kt),G.$emit(ct,Ut.state.user)},fail:function(){Ut.dispatch(tt)},complet:function(){t()}}).request({token:Ut.state.user.token})}else t()})}var Ht=-2e3,Rt=-1e3,Ft=-1001,Bt=-1002,Vt=-999,qt=200,Wt=608,Gt=612,Yt=650,zt=651,Zt=652,Jt=680,Qt=681,Kt=710,Xt=711,te=712,ee=713,ie=770,se=860,ae=861,ne=1,oe={RETRY:0,CYCLE:1,WAIT:100,REQUEST:101,COMPELETED:102,SLEEP:103,DESTROY:999},re=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Y["a"])(this,t),this.url=e,this.state=oe.WAIT,this.cancelSource=null,this.timer={};var s=i.data,a=void 0===s?null:s,n=i.opts,o=void 0===n?{}:n,r=i.success,c=i.fail,l=i.complet;this.data=a,this.opts=Object.assign({cancel:!0,retry:!1,delay:3e3,sleep:!1,lock:!1,prevent:!1,cycle:0},o),this.opts.cycle>0&&(this.opts.retry=!1!==o.retry),this.success=r,this.fail=c,this.complet=l}return Object(z["a"])(t,[{key:"isWait",value:function(){return this.state<=oe.WAIT}},{key:"isRequesting",value:function(){return this.state===oe.REQUEST}},{key:"isSleep",value:function(){return this.state===oe.SLEEP}},{key:"_request",value:function(){var t=this;this.state=oe.REQUEST,this.opts.lock&&(this.opts.lockId=ne++);var e=Object.assign({},this.opts);this.opts.cancel&&(this.cancelSource=ue.cancelSource(),e.cancelToken=this.cancelSource.token),ue.post(this.url,this.data,e).then(function(e){t.state!==oe.DESTROY&&(t.opts.sleep?t.state=oe.SLEEP:t.opts.cycle>0?(t.state=oe.CYCLE,t.timer=setTimeout(function(){return t._request()},t.opts.cycle)):t.state=oe.WAIT,t.success&&t.success(e,t.data))},function(e){t.state!==oe.DESTROY&&(t.opts.retry&&e.code<0?(t.state=oe.RETRY,t.timer=setTimeout(function(){return t._request()},t.opts.delay)):t.state=oe.WAIT,t.fail&&t.fail(e)||t.opts.prevent||G.$emit(at,{code:e.code,message:e.message}))}).then(function(){t.state!==oe.DESTROY&&(t.cancelSource=null,t.complet&&t.complet())})}},{key:"_clearTimer",value:function(){clearTimeout(this.timer)}},{key:"request",value:function(t){return this.isWait()&&(t&&(this.data=t),this._clearTimer(),this._request()),this}},{key:"awaken",value:function(){return this.isSleep()&&(this.state=oe.WAIT),this}},{key:"reset",value:function(){this._clearTimer(),this.state=oe.WAIT}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"destroy",e=this.isRequesting;this.state=oe.DESTROY,e&&(this.opts.lock&&G.$emit(rt,this.opts.lockId),this.opts.cancel&&(this.cancelSource.cancel(t),this.cancelSource=null)),this._clearTimer()}}]),t}(),ce=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Y["a"])(this,t),this.url=e,this.props=i,this.httpPost=null}return Object(z["a"])(t,[{key:"_getHttpPost",value:function(){return this.httpPost||(this.httpPost=new re(this.url,this.props)),this.httpPost}},{key:"_destoryHttpPost",value:function(t){this.isRequesting()?(this.httpPost.destroy(t),this.httpPost=null):this.httpPost&&this.httpPost.reset()}},{key:"isWait",value:function(){return null===this.httpPost||this.httpPost.isWait()}},{key:"isRequesting",value:function(){return null!==this.httpPost&&this.httpPost.isRequesting()}},{key:"isSleep",value:function(){return null!==this.httpPost&&this.httpPost.isSleep()}},{key:"request",value:function(t){return this._getHttpPost().request(t),this}},{key:"force",value:function(t,e){return this._destoryHttpPost("force"),this.setOpts(e),this.request(t),this}},{key:"setUrl",value:function(t){return this._destoryHttpPost("url changed"),this.url=t,this.httpPost&&(this.httpPost.url=t),this}},{key:"setOpts",value:function(t){return this.props.opts?Object.assign(this.props.opts,t):this.props.opts=t,this.httpPost&&Object.assign(this.httpPost.opts,t),this}},{key:"awaken",value:function(){return this.isSleep()&&this.httpPost.awaken(),this}},{key:"cancel",value:function(){return this._destoryHttpPost(),this}}]),t}();function le(t,e){var i=e.code,s=e.message;if(R("".concat(t,", Server error ").concat(i,": ").concat(s)),i===Wt){if(Lt.getters.isLogined){var a=Lt.getters.mode;Lt.dispatch(tt),G.$emit(nt,a)}return!0}return!1}var he,ue={post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.lock&&(i.lockId=i.lockId||ne++,G.$emit(ot,i.lockId)),new Promise(function(s,a){S.a.post(t,i.origin?e:J.a.stringify(e),i).then(function(e){i.lock&&G.$emit(rt,i.lockId);var n=e.data.code;n===qt?s(e.data):!i.ignore&&le(t,e.data)||a(e.data)},function(e){var s,n;i.lock&&G.$emit(rt,i.lockId),e.response?(s=Ht,n="".concat(t,", Response error ").concat(e.response.status)):e.request?(s=e.message.indexOf("timeout")>=0?Ft:e.message.indexOf("Network Error")>=0?Bt:Rt,n=e.message,R("".concat(t,", Request error: ").concat(n))):(s=Vt,n=e.message||"unknown",R("".concat(t,", Unexpected: ").concat(n))),a({code:s,message:n})})})},cancelSource:function(){return S.a.CancelToken.source()},createPost:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ce(t,e)},uploadFile:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.headers={"Content-Type":"multipart/form-data"},i.origin=!0;var s=new FormData;return s.append("file",e),this.post(t,s,i)},createLockId:function(){return ne++}},de=ue,fe="NATIVE_EVENT",pe="NATIVE_READY",me="BLUETOOTH_OPEN",ve="BLUETOOTH_CLOSE",_e="BLUETOOTH_CHANGED",ge="ANDROID_APP_WILL_EXIT",be="BRACELET_CONNECTED",Ce="BRACELET_DISCONNECT",we="BRACELET_CONNECT_FAIL",ye="VERSION_UPGRADE",$e="VERSION_UPGRADE_FORCE",ke="VERSION_UPGRADE_FAIL",Pe="VERSION_UPGRADING",Se=!1,Ee=null;function Ie(t,e){if(Se){var i=e?JSON.stringify(e):"null";return R("call native ".concat(t,": ").concat(i)),new Promise(function(i){Ee.callHandler(t,e,function(e){R("native ".concat(t,": ").concat(e)),i(e)})})}return Promise.reject({code:-1})}var Ae=[],Te={_bluetooth:"waiting",get bluetooth(){return"waiting"===this._bluetooth||"open"===this._bluetooth},get bluetoothState(){return this._bluetooth},get isReady(){return Se},ready:function(){return Se?Promise.resolve():new Promise(function(t){Ae.push(t)})},getNativeOS:function(){var t=window.localStorage.getItem("os");return t?Promise.resolve(t):Ie("getNativeOS",null).then(function(t){return window.localStorage.setItem("os",t),t})},getNativeAPPVer:function(){return Ie("getNativeAPPVer",null)},openSysSetting:function(){return Ie("openSysSetting",null).then(function(t){return"true"===t})},scan:function(){return Ie("scanQRCode",null).then(function(t){return JSON.parse(t)})},ringUp:function(t){return t?Ie("ringUp",{phoneNumber:t}).then(function(t){return"true"===t}):Promise.reject({code:101})},isBraceletConnected:function(){return Ie("isBraceletConnected",null).then(function(t){return JSON.parse(t)})},connectBracelet:function(t){return Ie("connectBracelet",{mac:t}).then(function(t){return"true"===t})},disConnectBracelet:function(){return Ie("disConnectBracelet",null).then(function(t){return"true"===t})},unbindBracelet:function(t){return Ie("unbindBracelet",{mac:t}).then(function(t){return"true"===t})},getBraceletHealthActivity:function(){return Ie("getBraceletHealthActivity",null).then(function(t){return JSON.parse(t)})},register:function(t){return Ie("registerPush",{account:t}).then(function(t){return"true"===t})},unregister:function(){return Ie("unregisterPush",null).then(function(t){return"true"===t})},setBraceletUserInfo:function(t){return Ie("setBraceletUserInfo",t).then(function(t){return"true"===t})},getBraceletBaseInfo:function(){return Ie("getBraceletBaseInfo",null).then(function(t){return JSON.parse(t)})},updateH5:function(t){return Ie("updateH5",t).then(function(t){return"true"===t})},shutdownApp:function(){return Ie("shutdownApp",null).then(function(t){return"true"===t})}};function De(t,e){G.$emit(t,e)}var Oe={BLUETOOTH_OPEN:102,BLUETOOTH_CLOSE:103,ANDROID_APP_WILL_EXIT:120,BRACELET_CONNECTED:200,BRACELET_DISCONNECT:201,BRACELET_CONNECT_FAIL:202,VERSION_UPGRADE:300,VERSION_UPGRADE_FORCE:301,VERSION_UPGRADE_DOWNLOAD_FAIL:302,VERSION_UPGRADE_CHECK_FAIL:303,VERSION_UPGRADE_SPACE_NOT_ENOUGH:304,VERSION_UPGRADING:305},xe=(he={},Object(Q["a"])(he,Oe.BLUETOOTH_OPEN,me),Object(Q["a"])(he,Oe.BLUETOOTH_CLOSE,ve),Object(Q["a"])(he,Oe.ANDROID_APP_WILL_EXIT,ge),Object(Q["a"])(he,Oe.BRACELET_CONNECTED,be),Object(Q["a"])(he,Oe.BRACELET_DISCONNECT,Ce),Object(Q["a"])(he,Oe.VERSION_UPGRADE,ye),Object(Q["a"])(he,Oe.VERSION_UPGRADE_FORCE,$e),Object(Q["a"])(he,Oe.VERSION_UPGRADE_DOWNLOAD_FAIL,ke),Object(Q["a"])(he,Oe.VERSION_UPGRADE_CHECK_FAIL,ke),Object(Q["a"])(he,Oe.VERSION_UPGRADE_SPACE_NOT_ENOUGH,ke),Object(Q["a"])(he,Oe.VERSION_UPGRADING,Pe),he);function Me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=xe[t];if(i){switch(i){case me:case ve:Te._bluetooth=i===me?"open":"close",De(i),De(_e,{open:Te.bluetooth});break;case ke:e=t,De(i,t);break;default:De(i,e);break}De(fe,{type:i,data:e})}}function Ne(t){R("nativeEventCallback: ".concat(t)),t=JSON.parse(t),Me(t.type,t.data)}function Ue(t){Se||(Se=!0,Ee=t,t.registerHandler("setEventCallback",function(t){Ne(t)}),Ie("isBluetoothOpen",null).then(function(t){var e="true"===t?"open":"close";Te._bluetooth!==e&&Me("open"===e?Oe.BLUETOOTH_OPEN:Oe.BLUETOOTH_CLOSE)}),Ae.forEach(function(t){t()}),Ae=null,De(pe))}window.setEventCallback=Ne,window.JsNativeApi=Te;var Le=Te;function je(){return new Promise(function(t){window.setupWebViewJavascriptBridge=function(t){if(window.WebViewJavascriptBridge)return t(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",function(){t(window.WebViewJavascriptBridge)},!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(t);window.WVJBCallbacks=[t];var e=document.createElement("iframe");e.style.display="none",e.src="https://__bridge_loaded__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)},window.setupWebViewJavascriptBridge(function(e){Ue(e),t()})})}var He=i("a925"),Re={welcome:"Welcome to the Canadian International School of Hong Kong",loading:"Loading",picker:{title:"Picker"},common:{next:"Next",save:"Save",cancel:"Cancel",done:"Done",confirm:"Confirm",loading:"loading...",retry:"Abnormal, click Retry",empty:"No Data",pwd:"Password",open:"Open",teacher:"Teacher: ",notice:"Notice",none:"None",today:"Today",yesterday:"Yesterday",picker:"Choose region",tip:"Notice",submit:"Submit"},error:{unknown:"Errors due to unknown causes",token:"Sorry, your login status has expired, please log in again!",nomobile:"Can not find the phone number"},state:{unbind:"Not Bound",connecting:"",connected:"Connected",unconnected:"Not Connected",low:"Low battery"},relationship:{son:"Son",daughter:"Daughter",father:"Father",mother:"Mother"},pullUp:{loading:"Pull Up Loading",more:"Load More",finished:"No More Data"},pwdErr:{error:"Password error",tooLong:"Password requires at most 18 characters",tooShort:"Password requires at lease 6 characters",notMatch:"The password you typed do not match",illegal:"The password include illegal characters",simple:"The password is too simple"},record:{0:"None",1:"arrived at school from {gate}",2:"left school from {gate}",3:"on the bus to school（Line {routeNo}）",4:"get off the bus to school（Line {routeNo}）",5:"on the bus home（Line {routeNo}）",6:"get off the bus home（Line {routeNo}）",7:"Arrive",8:"Leave",9:"Mobile check-in",10:"SOS",11:"Bus-boarding manually reverted",12:"Manually checked in by {name}",13:"Leave Request approved by {name}",14:"Check-In reverted by {name}",15:"Low Battery Alarm",bus:"View bus information"},staffLevel:{teacher:"Teacher",headTeacher:"Homeroom Teacher",admin:"Admin",staff:"Staff",unknown:"Unknown"},sms:{phone:"Phone Number",email:"Email",vCode:"Enter Verification Code",send:"Send Code",countdown:"Resend({count})"},tab:{phone:"PHONE",email:"EMAIL",oldPhoneNumber:"Old Phone Number",oldEmail:"Old Email"},login:{parents:"PARENTS",teachers:"TEACHERS",account:"User name",accountPlaceholder:"Enter CDNIS Email Address",phonePlaceholder:"Enter Phone Number",sign:"Sign in",forget:"Forget Password",usePwd:"Use password to log in",useVCode:"Use verification code to log in",remember:"Stay logged in for 30 days"},resetPwd:{title:"Reset Password"},setPwd:{title:"Set Password",tip:"Input 6-18 characters containing letters, numbers and symbols",oldPwd:"Old Password",newPwd:"New Password"},bind:{title:"Binding to a Bracelet",tip:"Each bracelet can only bind to one user. Please choose the child to bind.",again:"Please choose anthoer child to bind to.",success:"Bracelet bound successfully!",failure:"Binding failed!",failTip:"Please confirm that hte effective connection distance between the bracelet and the mobile phone is not too far. If it fails several timmes, please contact customer service."},unbind:{title:"Unbind",tip:"You would not receive any data from the bracelet after unbinding.",confirm:"Are you sure you want to break the bracelet binding?"},scan:{title:"Scan Bracelet QR Code",tip:"Please scan the QR code on the bracelet package.",scan:"Scan"},home:{menu:{bracelet:"Safety Band",account:"Account Information",kids:"My Children",password:"Password",setting:"Setting",faq:"FAQ",about:"Feedback",logout:"Exit Login"},toast:{bluetooth:"Please turn on the bluetooth.",bracelet:"No bracelet is bound.",bus:"Click here to associate bus info."},attendance:{supplement:"Attendance",arrived:"ARRIVED",belong:"{gradeLevel},{classId}"},parent:{name:"{0} {1} {2}"},staff:{name:"Hi, {name}"},motion:{title:"Motion",tip:"Today's Steps",unit:"Steps"}},written:{loading:"Written in…",content:"Are you sure you want to break the bracelet binding?",success:"Writing data successful.",fail:"Writing data failed."},history:{title:"Sign -In History"},attendanceType:{teacher:"Teacher",student:"Student"},schoolType:{1:"Lower School",2:"Middle School",3:"Upper School",4:"High School"},attendance:{title:"Attendance",teacher:"Teacher Attendance",student:"Student Attendance",arrived:"ARRIVED",supplement:"Attendance",belong:"{gradeLevel},{classId}",total:"TOTAL",history:"Attendance History"},motion:{title:"Steps",unit:"Step",weekly:"WEEKLY",monthly:"MONTHLY"},bracelet:{bind:"Bind",unbind:"Unbind",retry:"Try Again"},account:{id:"Staff id",relationship:"Relationship",phone:"Phone Number",email:"Email",student:"Student ID",bus:"Bus Student ID"},bus:{tip:"Please fill in bus student ID from the bus company's invoice"},email:{label:"New Email",formatErr:"Email format error",notMatch:"The email you typed do not match"},setting:{voice:"Voice",notice:"Notice",language:"Language"},mobile:{title:"Phone Number",current:"Current mobile phone number",warning:"When the parents change the phone number, the login account will also change.",tip:"The number can be changed only after unbinding the original mobile phone.",change:"Change",newPhoneNumber:"New Phone Number",notMatch:"The mobile phone number you typed do not match"},bluetooth:{title:"Connect Bluetooth",tip:"Please turn on Bluetooth on your mobile phone.",iosUp:"Android opens directly,",iosDown:"IOS opens through mobile settings.",how:"How to open it?"},signIn:{title:"Sign-in Information",status:"Status",all:"All",normal:"Attendance",abnormal:"Absence",unbind:"Unbound bracelet"},signInType:{1:"Arrived",2:"Left",3:"Manual check-in",4:"On Leave"},reason:{sick:"Sick",personal:"Personal reason",pd:"PD",other:"Other"},format:{date:"{week},{month}.{day}.{year}",classInfo:"{gradeLevel},{classId}",classInfo2:"{gradeLevel}-{classId}","year-month-day":"{month}.{day}.{year}","year-month":"{month}.{year}","month-day":"{month}.{day}"},busMap:{title:"Bus Information",boarding:"Boarding Time",unloading:"Unloading Time"},about:{app:"Safe Smart School",version:"Version",tip:"If you have any issues, questions or suggestions for this app, please submit themm here, our team will respond or assist you.",feedback:"Please enter your question here",successTitle:"Submit Succeed",failTitle:"Submit Failed",fail:"The network is busy, please try again later."},resetEmail:{title:"Reset Email"},upgrade:{upgrading:"Upgrading...",tip:"The version has been updated, please restart App.",error:{302:"Download upgrade package fail",303:"Verify upgrade package fail",304:"Space not enough"}},app:{exit:"Double-click the back button to exit"}},Fe={welcome:"歡迎來到加拿大國際學校。",loading:"加載中",picker:{title:"拾取器"},common:{next:"下一步",save:"保存",cancel:"取消",done:"完成",confirm:"確認",loading:"加載中...",retry:"發生異常，請點擊重試",empty:"暫無數據",pwd:"密碼",open:"打開",teacher:"老師：",notice:"警告",none:"無",today:"今日",yesterday:"昨日",picker:"選擇 地區",tip:"提示",submit:"提交"},error:{unknown:"未知原因導致的錯誤",token:"對不起，您的登陸狀態已失效，請重新登陸！",nomobile:"號碼不存在"},state:{unbind:"未綁定",connecting:"",connected:"已連接",unconnected:"未連接",low:"電量低"},relationship:{son:"兒子",daughter:"女兒",father:"父親",mother:"母親"},pullUp:{loading:"加載中",more:"加載更多",finished:"無更多數據"},pwdErr:{error:"密碼錯誤",tooLong:"密碼至多輸入18個字符",tooShort:"密碼至少需要6個字符",notMatch:"您輸入的密碼不匹配",illegal:"密碼包含非法字符",simple:"密碼過於簡單"},record:{0:"無",1:"抵達學校，從{gate}進入",2:"離開學校，從{gate}通過",3:"坐上上學校車（{routeNo}路線）",4:"下了上學校車（{routeNo}路線）",5:"坐上放學校車（{routeNo}路線）",6:"下了放學校車（{routeNo}路線）",7:"到達",8:"離開",9:"移動簽到",10:"SOS",11:"已取消上車",12:"{name}已手工簽到",13:"{name}已同意請假",14:"{name}已取消簽到",15:"低電量報警",bus:"查看校車信息"},staffLevel:{teacher:"老師",headTeacher:"班主任",admin:"管理員",staff:"職員",unknown:"未知"},sms:{phone:"手機號碼",vCode:"輸入驗證碼",send:"發送驗證碼",countdown:"重發({count})"},tab:{phone:"手機",email:"郵箱",oldPhoneNumber:"舊手機號碼",oldEmail:"舊郵箱"},login:{parents:"家長",teachers:"老師",account:"用戶名",accountPlaceholder:"請輸入CDNIS的郵件地址",phonePlaceholder:"輸入電話號碼",sign:"登入",forget:"忘記密碼",usePwd:"使用密碼登錄",useVCode:"使用驗證碼登錄",remember:"30天內免登錄"},resetPwd:{title:"重設密碼"},setPwd:{title:"設置密碼",tip:"輸入包含字母，數字和符號的6-18個字符",oldPwd:"舊密碼",newPwd:"新密碼"},bind:{title:"綁定手環",tip:"每個手環只能綁定到一個用戶，請選擇要綁定的孩子。",again:"請選擇另一個要綁定的孩子。",success:"手環綁定成功！",failure:"綁定失敗！",failTip:"請確認手環與手機之間的有效連接距離不是太遠。如果多次失敗，請聯繫客服。"},unbind:{title:"解除綁定",tip:"解除綁定後，您再不會從手環中收到任何數據。",confirm:"解绑后全部手环信息将被清除!"},scan:{title:"掃描手環二維碼",tip:"請掃描手環包裝盒上的二維碼。",scan:"掃描"},home:{menu:{bracelet:"安全手環",account:"賬戶信息",kids:"我的孩子",password:"密碼",setting:"設置",faq:"常見問題",about:"反饋",logout:"退出登錄"},toast:{bluetooth:"請打開手機上的藍牙功能。",bracelet:"沒有手環綁定。",bus:"點擊關聯校車信息。"},attendance:{supplement:"出席",arrived:"到校",belong:"{gradeLevel},{classId}"},parent:{name:"{0} {1} {2}"},staff:{name:"Hi, {name}"},motion:{title:"運動",tip:"今日步數",unit:"步"}},written:{loading:"寫入中…",content:"您确认要中断手环绑定吗？",success:"數據寫入成功",fail:"數據寫入失敗"},history:{title:"簽到歷史"},attendanceType:{teacher:"老師",student:"學生"},schoolType:{1:"低年級學校",2:"初中",3:"高中",4:"中學"},attendance:{title:"出席",teacher:"老師出席",student:"學生出席",supplement:"出席",arrived:"到校",total:"總計",history:"出勤歷史"},motion:{title:"步數",unit:"步",weekly:"本週",monthly:"本月"},bracelet:{bind:"綁定",unbind:"解除綁定",retry:"再試一次"},account:{id:"員工ID",relationship:"關係",phone:"手機號碼",email:"郵箱",student:"學生ID",bus:"校車學生ID"},bus:{tip:"可從校車公司的單據上找出"},email:{label:"新郵箱",formatErr:"郵箱格式有誤，請以（用戶自定義名@服務商主機名.域名，如：Jacky@gmail.com）方式輸入",notMatch:"您輸入的郵箱不匹配"},setting:{voice:"聲音",notice:"通知",language:"語言"},mobile:{title:"手機",current:"當前手機號碼",warning:"當更改手機號碼時，登錄賬戶也將修改。",tip:"只有在取消本來手機的綁定後才能更改該號碼",change:"更改",newPhoneNumber:"新手機號碼",notMatch:"您輸入的手機號碼不匹配"},bluetooth:{title:"連接藍牙",tip:"請打開手機上的藍牙。",iosUp:"Android可以直接打開，",iosDown:"IOS可通過移動設置打開。",how:"怎麼打開它？"},signIn:{title:"簽到信息",status:"状态",all:"全部",normal:"出席",abnormal:"缺席",unbind:"手環未綁定"},signInType:{1:"到達",2:"離開",3:"人工簽到",4:"請假"},reason:{sick:"生病",personal:"個人原因",pd:"培訓",other:"其他"},format:{date:"{week},{year}.{month}.{day}",classInfo:"{gradeLevel},{classId}",classInfo2:"{gradeLevel}-{classId}","year-month-day":"{year}.{month}.{day}","year-month":"{year}.{month}","month-day":"{month}.{day}"},busMap:{title:"巴士信息",boarding:"上車時間",unloading:"下車時間"},about:{app:"安全智慧校園",version:"版本",tip:"若您有任何APP使用問題，請在本頁面提出您的意見，工作人員會酌情為您解決",feedback:"请在此输入您的问题",successTitle:"提交成功",failTitle:"提交失敗",fail:"網絡異常或繁忙，請稍後再試"},resetEmail:{title:"重設郵箱"},upgrade:{upgrading:"升級中...",tip:"版本已更新，請重啟App",error:{302:"下載升級包失敗",303:"驗證升級包失敗",304:"剩餘空間不足"}},app:{exit:"按兩下返回鍵退出程式"}};s["a"].use(He["a"]);var Be={en:{week:{weekday:"short"},month:{month:"short"}},"zh-hk":{week:{weekday:"short"},month:{month:"narrow"}}},Ve=[{key:"en",text:"English",type:1,status:0,code:{"-1001":"Request timeout","-1002":"Server under maintenance","-3000":"QR code format error"}},{key:"zh-hk",text:"繁體中文（香港）",type:2,status:0,code:{"-1001":"請求超時","-1002":"伺服器維護中","-3000":"二維碼格式有誤"}}],qe=window.localStorage.getItem("locale")||"en",We=Ve.find(function(t){return t.key===qe});We||(We=Ve[0],qe=We.key);var Ge=new He["a"]({locale:qe,dateTimeFormats:Be,messages:{en:Re,"zh-hk":Fe}}),Ye=Ge,ze={key:qe,code:We.code,isChinese:function(){return"zh-hk"===Ge.locale}};function Ze(){var t=Ve.find(function(t){return t.key===Ge.locale});t&&0===t.status&&(t.status=1,de.createPost("common/appmessage",{opts:{retry:!0,prevent:!0},success:function(e){t.status=2,e.data.forEach(function(e){t.code[e.code]=e.message})},fail:function(e){e.code>=0&&(t.status=0)}}).request({env:t.type}))}function Je(t){if(t!==Ge.locale){var e=Ve.find(function(e){return e.key===t});e&&(Ge.locale=t,ze.key=t,ze.code=e.code,window.localStorage.setItem("locale",t),Ze())}}function Qe(){Ve.forEach(function(t){2===t.status&&(t.status=0)}),Ze()}var Ke=null;function Xe(t){var e=document.createElement("canvas"),i=e.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.onload=function(){if(t===Ke){e.width=s.width,e.height=s.height,i.drawImage(s,0,0),G.$emit(ut,t);try{window.localStorage.setItem("smart_campus__bg",e.toDataURL("image/jpg")),R("bg load success: ".concat(t))}catch(a){R("bg save failed, ".concat(t,": ").concat(a.message))}}e=null,i=null,s=null},s.onerror=function(){t===Ke&&(Ke=null,R("bg load failed: ".concat(t))),e=null,i=null,s=null},s.onabort=function(){t===Ke&&(Ke=null,R("bg load abort: ".concat(t))),e=null,i=null,s=null},s.src=t}var ti=-1;function ei(){G.$on(ht,function(t){Ke!==t&&(Ke=t,Xe(t))}),G.$on(ct,function(t){ti=setTimeout(function(){Le.updateH5({token:t.token,userType:t.mode===et.STAFF?1:2})},T.upgrade)}),G.$on(lt,function(){clearTimeout(ti)})}i("c5f6"),i("7f7f");var ii={UNINITIALIZED:"UNINITIALIZED",WAITING:"WAITING",CONNECTING:"CONNECTING",CONNECTED:"CONNECTED",DISCONNECTING:"DISCONNECTING",SYNCING:"SYNCING"},si=0,ai=ii.UNINITIALIZED,ni=null,oi=null,ri=-1,ci={};function li(t){if(!Lt.getters.isLogined)return null;var e,i=Lt.getters.isStaff;return e=i?Lt.state.figures.find(function(e){return e.macAddress===t}):Lt.state.figures.find(function(e){return e.braceletMac===t}),e?{unique:si,mac:t,isStaff:i,token:Lt.state.user.token,id:e.id,key:i?e.legacyId:e.studentId,name:"".concat(e.firstName," ").concat(e.lastName),isBraceletWritten:e.isBraceletWritten}:null}function hi(t){return t.unique!==si}function ui(t){if(0===t.isBraceletWritten)return new Promise(function(e){G.$emit(pt,t.id),Le.setBraceletUserInfo({id:t.key,name:t.name}).then(function(i){e(),hi(t)?R("bracelet has changed, so stop mark. currMac is ".concat(ni,", target is ").concat(t.mac)):i?de.post(t.isStaff?"staff/bracelet/mark":"parent/bracelet/mark",t.isStaff?{token:t.token,macAddress:t.mac}:{idStudent:t.id,token:t.token,macAddress:t.mac}).then(function(){Lt.dispatch("updateFigureInfo",{id:t.id,info:{isBraceletWritten:1}}),G.$emit(mt,t.id)},function(e){G.$emit(vt,{key:t.id,code:e.code,message:e.message})}):G.$emit(vt,{key:t.id})})})}function di(t){return new Promise(function(e){var i=t.id;ci[i]||(ci[i]={steps:0}),Le.getBraceletHealthActivity().then(function(s){if(e(),hi(t))R("bracelet has changed, so stop update server steps. currMac is ".concat(ni,", target is ").concat(t.mac));else if("true"===s.type){var a=Number(s.data.step||0);if(a===ci[i].steps)return void R("".concat(i," fetch same native steps: ").concat(a));de.post(t.isStaff?"staff/sport":"parent/child/sport",t.isStaff?{token:t.token}:{token:t.token,idStudent:i},{ignore:!0,prevent:!0}).then(function(e){var s=e.data.steps||0;R("".concat(i," fetch server steps: ").concat(s)),a>s?de.post(t.isStaff?"staff/steps/update":"parent/child/steps/update",t.isStaff?{token:t.token,steps:a}:{token:t.token,idStudent:i,steps:a},{ignore:!0,prevent:!0}).then(function(){ci[i].steps=a,R("".concat(i," update server steps finished: native > server"))},function(t){R("".concat(i," update server steps failed: ").concat(t.message))}):R("".concat(i," update server steps finished: native <= server"))},function(t){R("".concat(i," fetch server steps failed: ").concat(t.message))})}else R("".concat(i," fetch native steps failed"))})})}function fi(t){return new Promise(function(e){Le.getBraceletBaseInfo().then(function(i){e(),hi(t)?R("bracelet has changed, so stop get energe. currMac is ".concat(ni,", target is ").concat(t.mac)):(ri="true"===i.type?i.data.energe:-1,G.$emit(ft))})})}function pi(t){return function(e){return function(){if(hi(t))throw"break wrapper";return e(t)}}}function mi(t){var e=li(t);if(e){var i=pi(e);Promise.resolve().then(i(ui)).then(i(di)).then(i(fi)).then(i(function(){var t=setInterval(function(){Promise.resolve().then(i(di)).then(i(fi)).catch(function(e){R(e),clearInterval(t)})},6e5)})).catch(function(t){return R(t)})}}function vi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(ai=t,t){case ii.CONNECTED:oi=null,ni!==e&&(si+=1,ni=e,ri=-1,mi(ni));break;case ii.CONNECTING:oi=e;break;case ii.WAITING:case ii.UNINITIALIZED:si+=1,ni=null,oi=null,ri=-1;break;default:break}R("Bracelet: set state to ".concat(t,", currMac is ").concat(ni,", tempMac is ").concat(oi)),G.$emit(dt)}function _i(t){vi(ii.CONNECTING,t),Le.connectBracelet(t).then(function(t){t||ai!==ii.CONNECTING||vi(ii.WAITING)})}function gi(t){t&&(vi(ii.DISCONNECTING),Le.disConnectBracelet().then(function(e){e||ai!==ii.DISCONNECTING||vi(ii.CONNECTED,t)}))}function bi(){vi(ii.SYNCING),Le.isBraceletConnected().then(function(t){if(ai===ii.SYNCING)if("true"===t.type){var e=t.mac.replace(/[-:]/g,"").toLowerCase();oi&&oi!==e?gi(e):vi(ii.CONNECTED,e)}else oi?_i(oi):vi(ii.UNINITIALIZED)})}function Ci(){return ai===ii.UNINITIALIZED}var wi,yi,$i={connect:function(t){switch(!0){case ai===ii.UNINITIALIZED:oi=t,Le.isReady&&bi();break;case ai===ii.WAITING:case ai===ii.CONNECTING:_i(t);break;case ai===ii.CONNECTED:oi=t,gi(ni);break;default:oi=t;break}},getStateInfo:function(){return{state:ai,connected:ni,connecting:oi,energe:ri}}};if(G.$on(lt,function(){(ni||oi)&&(R("Bracelet: logout, currMac is ".concat(ni,", tempMac is ").concat(oi)),Le.disConnectBracelet()),vi(ii.UNINITIALIZED)}),G.$on(be,function(t){if(!Ci()&&t&&t.macAddress){var e=t.macAddress.replace(/[-:]/g,"").toLowerCase();if(ai===ii.SYNCING&&oi&&oi!==e)return void gi(e);vi(ii.CONNECTED,e)}}),G.$on(Ce,function(){Ci()||(ai===ii.DISCONNECTING&&oi?(ni=null,_i(oi)):vi(ii.WAITING))}),G.$on(we,function(){Ci()||ai===ii.CONNECTING&&vi(ii.WAITING)}),G.$on(pe,function(){ai===ii.UNINITIALIZED&&oi&&bi()}),s["a"].config.productionTip=T.isDebug,s["a"].config.debug=T.isDebug,s["a"].config.devtools=T.isDebug,T.useBackDoor){wi=window.localStorage.getItem("smart_campus__base_url")||T.base_url;var ki=window.localStorage.getItem("smart_campus__debug");yi=ki?"true"===ki:T.useLog}else wi=T.base_url,yi=T.useLog;function Pi(){return Ze(),ei(),je()}O(wi),F(yi),S.a.defaults.baseURL=wi,S.a.defaults.timeout=T.timeout,s["a"].config.errorHandler=function(t){R(t)},s["a"].prototype.$cfg=T,s["a"].prototype.$transformHeadUrl=x,s["a"].prototype.$transformUrl=M,s["a"].prototype.$log=R,s["a"].prototype.$eventBus=G,s["a"].prototype.$http=de,s["a"].prototype.$native=Le,s["a"].prototype.$md5=k.a,s["a"].prototype.$lang=ze,s["a"].prototype.$langs=Ve,s["a"].prototype.$bracelet=$i;var Si=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view"),t.isWritting?s("div",{staticClass:"c-written-mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[0===t.writtenState?s("div",[s("div",{staticClass:"c-written-loading"},[s("img",{attrs:{width:"30",height:"30",src:i("88a7")}}),s("div",{staticClass:"c-written-loading__tip"},[t._v(t._s(t.$t("written.loading")))])]),s("div",{staticClass:"c-written-cancel",on:{click:function(e){t.writtenState=1}}},[t._v(t._s(t.$t("common.cancel")))])]):t._e(),1===t.writtenState?s("div",{staticClass:"c-written-confirm"},[s("div",{staticClass:"c-written-confirm__title"},[t._v(t._s(t.$t("common.tip")))]),s("div",{staticClass:"c-written-confirm__content"},[t._v(t._s(t.$t("written.content")))]),s("div",{staticClass:"c-written-confirm__wrapper"},[s("div",{staticClass:"c-written-confirm__button--cancel",on:{click:function(e){t.writtenState=0}}},[t._v(t._s(t.$t("common.cancel")))]),s("div",{staticClass:"c-written-confirm__button--ok t-adapt-text",on:{click:function(e){t.isWritting=!1}}},[t._v(t._s(t.$t("common.confirm")))])])]):t._e()]):t._e(),t.showMask?s("div",{staticClass:"c-requesting-mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[s("div",{staticClass:"c-requesting-mask__wrapper"},[s("img",{attrs:{width:"30",height:"30",src:i("88a7")}}),s("div",{staticClass:"c-requesting-mask__label"},[t._v(t._s(t.$t("loading")))])])]):t._e(),t.mode?s("pop-alert",{attrs:{title:t.$t("common.notice"),tip:t.$t("error.token"),button:t.$t("common.confirm")},on:{confirm:t.confirm}}):t._e(),s("toast"),t.isForceUpgrade?s("div",{staticClass:"c-requesting-mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[s("div",{staticClass:"c-requesting-mask__wrapper"},[s("img",{attrs:{width:"30",height:"30",src:i("88a7")}}),s("div",{staticClass:"c-requesting-mask__label"},[t._v(t._s(t.$t("upgrade.upgrading")))])])]):t._e(),t.needUpgrade?s("pop-alert",{attrs:{title:t.$t("common.notice"),tip:t.upgradeTip,button:t.$t("common.confirm")},on:{confirm:t.shutdown}}):t._e()],1)},Ei=[],Ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-pop-alert"},[i("div",{staticClass:"c-pop-alert__wrapper"},[i("div",{staticClass:"c-pop-alert__title"},[t._v(t._s(t.title))]),i("div",{staticClass:"c-pop-alert__tip"},[t._v(t._s(t.tip))]),i("div",{staticClass:"c-pop-alert__button",on:{click:t.confirm}},[t._v(t._s(t.button))])])])},Ai=[],Ti={name:"pop-alert",props:["title","tip","button"],methods:{confirm:function(){this.$emit("confirm")}}},Di=Ti,Oi=(i("972c"),Object(c["a"])(Di,Ii,Ai,!1,null,null,null));Oi.options.__file="PopAlert.vue";var xi=Oi.exports,Mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{duration:{leave:1e3},name:"fade",appear:""}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"c-toast"},[i("p",{staticClass:"c-toast__content"},[t._v(t._s(t.msg))])])])},Ni=[],Ui={name:"toast",data:function(){return{msgInfo:null,isShow:!1,timer:-1}},computed:{msg:function(){return this.msgInfo?this.$lang.code[this.msgInfo.code]||this.msgInfo.message||this.$t("error.unknown"):""}},methods:{show:function(t){var e=this;clearTimeout(this.timer),this.isShow||(this.isShow=!0),this.msgInfo=t,this.timer=setTimeout(function(){e.isShow=!1},5e3)}},mounted:function(){this.$eventBus.$on(at,this.show)},beforeDestroy:function(){this.isShow&&clearTimeout(this.timer)}},Li=Ui,ji=(i("b5f7"),Object(c["a"])(Li,Mi,Ni,!1,null,null,null));ji.options.__file="Toast.vue";var Hi=ji.exports,Ri={name:"app",components:{popAlert:xi,toast:Hi},data:function(){return{mode:null,showMask:!1,maskId:-1,isWritting:!1,writtenState:0,writtenKey:null,isForceUpgrade:!1,needUpgrade:!1,upgradeTip:""}},methods:{confirm:function(){this.mode=null},shutdown:function(){this.$native.shutdownApp(),this.needUpgrade=!1}},created:function(){var t=this;this.$eventBus.$on(ot,function(e){t.showMask=!0,t.maskId=e}),this.$eventBus.$on(rt,function(e){t.maskId===e&&(t.maskId=-1,t.showMask=!1)}),this.$eventBus.$on(nt,function(e){t.$router.replace({name:"login",params:{mode:e}}),t.mode=e}),this.$eventBus.$on(pt,function(e){t.isWritting=!0,t.writtenState=0,t.writtenKey=e}),this.$eventBus.$on(mt,function(e){e===t.writtenKey&&(t.isWritting=!1,t.writtenKey=null,t.$eventBus.$emit(at,{code:-1,message:t.$t("written.success")}))}),this.$eventBus.$on(vt,function(e){e.key===t.writtenKey&&(t.isWritting=!1,t.writtenKey=null,t.$eventBus.$emit(at,{code:e.code||-1,message:e.message||t.$t("written.fail")}))}),this.$eventBus.$on(lt,function(){t.isWritting=!1,t.writtenKey=null}),this.$eventBus.$on(ye,function(){t.isForceUpgrade=!1,t.upgradeTip=t.$t("upgrade.tip"),t.needUpgrade=!0}),this.$eventBus.$on($e,function(){t.isForceUpgrade=!0}),this.$eventBus.$on(ke,function(e){t.isForceUpgrade&&(t.isForceUpgrade=!1,t.upgradeTip=t.$t("upgrade.error.".concat(e)),t.needUpgrade=!0)}),this.$eventBus.$on(Pe,function(){t.$log("升级中...")}),this.$eventBus.$on(ge,function(){t.$eventBus.$emit(at,{code:-1,message:t.$t("app.exit")})})},beforeMount:function(){var t=document.getElementById("loading");t&&document.body.removeChild(t)}},Fi=Ri,Bi=(i("5c0b"),Object(c["a"])(Fi,Si,Ei,!1,null,null,null));Bi.options.__file="App.vue";var Vi=Bi.exports,qi=i("8c4f"),Wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"p-login",style:t.bgStyle},[i("template",{slot:"bg"},[i("div",{staticClass:"p-login__bg",class:{"p-login__bg--logo":t.isHomeMode,"p-login__bg--sign":!t.isHomeMode}})]),i("div",{staticClass:"l-form t-white p-login__wrapper"},[i("transition",{attrs:{name:"move-up",mode:"out-in"}},[1===t.showMode?i("div",{key:"login",staticClass:"p-login__content p-login__content--login"},[i("div",{staticClass:"p-login__1st p-login__logo"},[i("div",{staticClass:"p-login__logo_icon",on:{click:t.openBackDoor}})]),i("div",{staticClass:"p-login__2nd p-login__school"},[t._v("C D N I S")]),i("div",{staticClass:"p-login__3rd p-login__tip"},[t._v(t._s(t.$t("welcome")))]),i("router-link",{staticClass:"p-login__4th o-button is-auto p-login__button",attrs:{to:{params:{mode:t.accountCache.last}},replace:""}},[t._v(t._s(t.$t("login.sign")))])],1):t._e(),2===t.showMode?i("div",{key:"sign",staticClass:"p-login__content p-login__content--sign"},[i("div",{staticClass:"p-login__1st p-login__header"},[i("router-link",{staticClass:"p-login__back",attrs:{to:{name:"login"},replace:""}})],1),i("div",{staticClass:"p-login__1st p-login__nav"},[i("router-link",{staticClass:"o-fixed-tab--white",class:{"is-active":t.isParentMode},attrs:{to:{params:{mode:"parent"}},replace:""}},[t._v(t._s(t.$t("login.parents")))]),i("router-link",{staticClass:"o-fixed-tab--white",class:{"is-active":t.isStaffMode},attrs:{to:{params:{mode:"staff"}},replace:""}},[t._v(t._s(t.$t("login.teachers")))])],1),t.isStaffMode?i("div",[i("form-field",{staticClass:"p-login__2nd has-padding-right",attrs:{label:t.$t("login.account"),placeholder:t.$t("login.accountPlaceholder"),error:t.accountError},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},[t.account?i("div",{staticClass:"p-login__icon_wrapper"},[i("i",{staticClass:"p-login__reset",on:{click:t.resetAccount}})]):t._e()]),i("form-field",{staticClass:"p-login__3rd has-padding-right",attrs:{type:t.pwdType,label:t.$t("common.pwd"),error:t.pwdError},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[i("div",{staticClass:"p-login__icon_wrapper"},[i("i",{staticClass:"p-login__eye",class:{"is-open":"text"===t.pwdType},on:{click:t.togglePwdType}})])])],1):i("div",[i("form-field",{staticClass:"p-login__2nd c-form-field--select",attrs:{label:t.$t("sms.phone"),placeholder:t.$t("login.phonePlaceholder"),error:t.accountError},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[i("area-code",{attrs:{areaCode:t.areaCode},on:{change:t.pick}})],1),t.usePwd?i("form-field",{staticClass:"p-login__3rd has-padding-right",attrs:{type:t.pwdType,label:t.$t("common.pwd"),error:t.pwdError},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[i("div",{staticClass:"p-login__icon_wrapper"},[i("i",{staticClass:"p-login__eye",class:{"is-open":"text"===t.pwdType},on:{click:t.togglePwdType}})])]):i("form-field",{staticClass:"p-login__3rd c-form-field--button",attrs:{label:t.$t("sms.vCode"),error:t.pwdError},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[i("sms",{attrs:{areaCode:t.areaCode,mobile:t.mobile}})],1)],1),i("div",{staticClass:"p-login__4th"},[i("div",{staticClass:"u-clearfix"},[i("span",{staticClass:"p-login__remember",class:{"is-active":t.isRemeber},on:{click:function(e){t.isRemeber=!t.isRemeber}}},[t._v(t._s(t.$t("login.remember")))]),t.usePwd?i("router-link",{staticClass:"p-login__forget u-underline",attrs:{to:{name:"pre-reset-pwd",params:{mode:t.mode}}}},[t._v(t._s(t.$t("login.forget")))]):t._e()],1),i("div",{staticClass:"p-login__submit o-button o-button--submit is-auto",class:{"is-active":t.isValid},on:{click:t.sign}},[t._v(t._s(t.$t("login.sign")))])]),t.isParentMode?i("div",{staticClass:"p-login__4th u-align-c p-login__toggle-tip"},[i("div",{staticClass:"u-underline",on:{click:t.toggleLoginMode}},[t._v(t._s(t.toggleTip))])]):t._e()]):t._e()])],1)],2)},Gi=[],Yi=i("be94"),zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.error,"is-active":t.isFocused}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.label))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("input",{staticClass:"c-form-field__input",attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)},focus:function(e){t.isFocused=!0},blur:t.blur}}),t._t("default")],2),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.text))])])},Zi=[],Ji={name:"form-field",props:{type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},error:{type:String,default:""},tip:{type:String,default:""},value:{type:String,default:""}},data:function(){return{isFocused:!1}},computed:{text:function(){return this.error||this.tip}},methods:{blur:function(){this.isFocused=!1,this.$emit("blur")}}},Qi=Ji,Ki=(i("6863"),Object(c["a"])(Qi,zi,Zi,!1,null,null,null));Ki.options.__file="FormField.vue";var Xi=Ki.exports,ts=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-form-field__select",class:{"is-active":t.isShowPicker},on:{click:t.showPicker}},[t._v("\n  "+t._s(t.selectedAreaCode)+"\n  "),t.isShowPicker?i("picker",{attrs:{values:t.regins,index:t.pickerIndex,title:t.$t("common.picker")},on:{change:t.pick,cancel:t.cancel,confirm:t.confirm}}):t._e()],1)},es=[],is=(i("20d6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-picker",class:{"is-still":t.isStill},on:{click:function(e){return e.stopPropagation(),t.cancel(e)}}},[i("div",{staticClass:"c-picker__wrapper",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"c-picker__choose"},[i("span",{staticClass:"c-picker__cancel",on:{click:t.cancel}},[t._v(t._s(t.cancelTxt))]),i("span",{staticClass:"c-picker__confirm",on:{click:t.confirm}},[t._v(t._s(t.confirmTxt))]),i("div",{staticClass:"c-picker__title",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.title))])]),i("div",{ref:"wrapper",staticClass:"c-picker__wheel_wrapper",style:t.getWrapperStyle},[i("ul",{ref:"wheel",staticClass:"c-picker__wheel",style:t.getWheelStyle},[t._t("default",t._l(t.scrollValues,function(e,s){return i("li",{key:s,staticClass:"c-picker__item",class:{"is-active":t.selectedIndex===s}},[t._v("\n            "+t._s(e.value)+"\n          ")])}))],2),i("div",{staticClass:"c-picker__divider",style:t.getDividerStyle}),i("div",{staticClass:"c-picker__cover",style:t.getCoverStyle})])])])}),ss=[],as=i("1fba"),ns={name:"picker",props:{values:{type:Array,require:!0,default:function(){return[]}},index:{type:Number,default:0},title:{type:String,default:function(){return Ye.t("picker.title")}},cancelTxt:{type:String,default:function(){return Ye.t("common.cancel")}},confirmTxt:{type:String,default:function(){return Ye.t("common.done")}},acceleration:{type:Number,default:-.003},radius:{type:Number,default:100},lineHeight:{type:Number,default:34},cycle:{type:Boolean,default:!1}},data:function(){return{isStill:!0,selectedIndex:0}},computed:{length:function(){return this.values.length},scrollValues:function(){return this.values.map(function(t,e){return{value:t,index:e}})},getWrapperStyle:function(){return{height:"".concat(2*this.radius,"px")}},getWheelStyle:function(){return{marginTop:"".concat(this.radius-Math.round(this.lineHeight/2),"px")}},getCoverStyle:function(){return{backgroundSize:"100% ".concat(this.radius-Math.round(this.lineHeight/2),"px")}},getDividerStyle:function(){return{top:"".concat(this.radius-Math.round(this.lineHeight/2),"px"),height:"".concat(this.lineHeight-2,"px")}}},methods:{initWheel:function(){var t=this;this.length>0&&(this.$wheel=new as["a"](this.$refs.wrapper,{wheel:{selectedIndex:0,rotate:30,wheelWrapperClass:"c-picker__wheel",wheelItemClass:"c-picker__item"},swipeTime:500,probeType:3}),this.$wheel.wheelTo(this.index),this.$wheel.on("scrollStart",function(){t.isStill=!1}),this.$wheel.on("scrollEnd",function(){t.isStill=!0,t.selectedIndex=t.$wheel.getSelectedIndex(),t.$emit("change",t.selectedIndex)}))},cancel:function(){this.$emit("cancel")},confirm:function(){this.$emit("confirm",this.$wheel.getSelectedIndex())}},watch:{values:function(){var t=this;this.$nextTick(function(){t.$wheel?t.$wheel.refresh():t.initWheel()})},index:function(){var t=this;this.$nextTick(function(){t.$wheel&&(t.$wheel.refresh(),t.$wheel.wheelTo(t.index))})}},mounted:function(){this.initWheel()},beforeDestory:function(){this.$wheel&&this.$wheel.destroy()}},os=ns,rs=(i("ac30"),Object(c["a"])(os,is,ss,!1,null,null,null));rs.options.__file="Picker.vue";var cs=rs.exports,ls=[],hs={name:"area-code",props:["areaCode"],components:{picker:cs},data:function(){return{isShowPicker:!1,pickerIndex:0,index:0,areas:ls}},computed:{selectedAreaCode:function(){return this.areas.length>0?"+".concat(this.areas[this.index].areaCode):""},regins:function(){var t=this.$lang.isChinese();return this.areas.map(function(e){return"".concat((t?e.areaNameHK:e.areaNameEN)||e.areaName,"(+").concat(e.areaCode,")")})}},methods:{showPicker:function(){this.areas.length>0?this.isShowPicker||(this.isShowPicker=!0):this.$httpPost.request()},pick:function(t){this.pickerIndex=t},cancel:function(){this.pickerIndex=this.index,this.isShowPicker=!1},confirm:function(){this.index=this.pickerIndex,this.notify(),this.isShowPicker=!1},notify:function(){this.$emit("change",this.areas[this.index].areaCode)},checkDefaultArea:function(){var t=this.areaCode;if(t){var e=this.areas.findIndex(function(e){return e.areaCode===t});this.index=e>=0?e:0}else this.index=0;this.pickerIndex=this.index,this.notify()},updateAreaCode:function(t){t.length>0&&(this.areas=t,this.checkDefaultArea())}},watch:{areaCode:{handler:function(){this.areas.length>0&&this.checkDefaultArea()},immediate:!0}},created:function(){var t=this;this.$httpPost=this.$http.createPost("area/loadAll",{success:function(e){ls=e.data,0===t.areas.length&&t.updateAreaCode(e.data)}}),this.$httpPost.request()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},us=hs,ds=Object(c["a"])(us,ts,es,!1,null,null,null);ds.options.__file="AreaCode.vue";var fs=ds.exports,ps=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-form-field__button",class:{"is-active":t.count>0},on:{click:t.send}},[i("span",[t._v(t._s(t.msg))])])},ms=[],vs={name:"sms",props:{mobile:{type:String},areaCode:{type:String},email:{type:String},mode:{type:Number,default:0},type:{type:Number,default:1},analysisError:{type:Function,default:null}},data:function(){return{count:0}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),{msg:function(){return this.count>0?this.$t("sms.countdown",{count:this.count}):this.$t("sms.send")},url:function(){switch(this.mode){case 0:case 2:return"common/smscode/send";case 1:case 3:return"common/email/send";default:return null}}}),methods:{cacnel:function(){-1!==this.timer&&(this.count=0,clearInterval(this.timer),this.timer=-1),this.$httpPost&&this.$httpPost.cancel()},clock:function(){var t=this;this.count=60,this.timer=setInterval(function(){t.count-=1,0===t.count&&(clearInterval(t.timer),t.timer=-1,t.$httpPost.awaken())},1e3)},sendToMobile:function(){if(this.areaCode&&this.mobile&&this.$httpPost.isWait()){this.clock();var t={areaCode:this.areaCode,mobile:this.mobile,type:this.type};2===this.mode&&(t.token=this.user.token),this.$httpPost.request(t)}},sendToEmali:function(){if(this.email&&this.$httpPost.isWait()){this.clock();var t={email:this.email,type:this.type};3===this.mode&&(t.token=this.user.token),this.$httpPost.request(t)}},send:function(){var t=this;switch(this.$emit("send"),this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{sleep:!0},fail:function(e){return t.count>0&&(t.count=0,clearInterval(t.timer),t.timer=-1),!!t.analysisError&&t.analysisError(e)}})),this.mode){case 0:case 2:this.sendToMobile();break;case 1:case 3:this.sendToEmali();break;default:break}}},watch:{mode:function(){this.$httpPost&&(this.$httpPost.setUrl(this.url),this.cacnel())}},beforeDestroy:function(){this.cacnel()}},_s=vs,gs=Object(c["a"])(_s,ps,ms,!1,null,null,null);gs.options.__file="Sms.vue";var bs=gs.exports,Cs="JfasJMsdaya",ws={name:"login",components:{formField:Xi,areaCode:fs,sms:bs},data:function(){var t=window.localStorage.getItem(Cs);return{showMode:"",mode:et.UNKNOWN,requestMode:et.UNKNOWN,signMode:"true"===window.localStorage.getItem("hasLoggedIn")?0:1,areaCode:"",mobile:"",vCode:"",account:"",password:"",user:null,accountErrorInfo:null,pwdErrorInfo:null,clickCount:0,bgStyle:null,isRemeber:!0,osType:0,pwdType:"password",accountCache:t?JSON.parse(_t["Base64"].decode(t)):{last:"parent"}}},computed:{isParentMode:function(){return this.mode===et.PARENT},isStaffMode:function(){return this.mode===et.STAFF},isHomeMode:function(){return this.mode===et.UNKNOWN},usePwd:function(){return 0===this.signMode||this.mode===et.STAFF},toggleTip:function(){return this.usePwd?this.$t("login.useVCode"):this.$t("login.usePwd")},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},isValid:function(){return this.usePwd?(this.isParentMode?this.mobileVal:this.account)&&this.password:this.mobileVal&&this.vCode},accountError:function(){return this.accountErrorInfo?this.$lang.code[this.accountErrorInfo.code]||this.accountErrorInfo.message:""},pwdError:function(){return this.pwdErrorInfo?this.$lang.code[this.pwdErrorInfo.code]||this.pwdErrorInfo.message:""}},methods:Object(Yi["a"])({},Object(K["b"])(["setRuntimeMode","saveUser"]),{refreshMode:function(){var t=this;this.$nextTick(function(){t.showMode=t.isHomeMode?1:2})},setMode:function(t){switch(t){case et.PARENT:this.$httpPost&&this.$httpPost.setUrl("parent/login");break;case et.STAFF:this.$httpPost&&this.$httpPost.setUrl("staff/login");break;default:t=et.UNKNOWN;break}if(this.mode!==t){switch(this.mode){case et.PARENT:this.mobile="",this.vCode="",this.password="";break;case et.STAFF:this.account="",this.password="";break;default:break}switch(this.stopLogin(),this.mode=t,this.mode){case et.PARENT:this.areaCode=this.accountCache.parent&&this.accountCache.parent.areaCode||"",this.mobile=this.accountCache.parent&&this.accountCache.parent.mobile||"";break;case et.STAFF:this.account=this.accountCache.staff||"";break;default:break}}this.refreshMode()},toggleLoginMode:function(){this.usePwd?this.password="":this.vCode="",this.stopLogin(),this.signMode=0===this.signMode?1:0},clearError:function(){this.accountErrorInfo=null,this.pwdErrorInfo=null},stopLogin:function(){this.clearError(),this.$httpPost&&this.$httpPost.cancel(),this.$infoHttpPost&&this.$infoHttpPost.cancel()},changeRuntimmeMode:function(t){this.setRuntimeMode(t)},afterSign:function(t){var e=this.requestMode,i=Object.assign(this.$user,t,{mode:e,account:this.isParentMode?this.mobileVal:this.account});this.isParentMode?this.accountCache.parent={areaCode:this.areaCode,mobile:this.mobile}:this.accountCache.staff=this.account,this.accountCache.last=e,window.localStorage.setItem(Cs,_t["Base64"].encode(JSON.stringify(this.accountCache))),this.$store.dispatch(X,i),0===i.hasPasswordSetted?(this.changeRuntimmeMode("boot"),this.$router.replace({name:"set-pwd",params:{type:this.isRemeber?"remember":"normal"}})):(this.changeRuntimmeMode("normal"),this.isRemeber&&this.saveUser(),this.$router.replace({name:"home",params:{mode:e}}))},updateInfo:function(t){var e=this;this.$infoHttpPost||(this.$infoHttpPost=this.$http.createPost(this.isParentMode?"parent/info":"staff/info",{opts:{lock:!0},success:function(t){e.afterSign(t.data)}})),this.$infoHttpPost.request({token:t})},sign:function(){var t=this;if(this.isValid)switch(this.clearError(),this.requestMode=this.mode,this.$httpPost||(this.$httpPost=this.$http.createPost(this.isParentMode?"parent/login":"staff/login",{opts:{lock:!0},success:function(e){t.$user=e.data,t.updateInfo(e.data.token)},fail:function(e){switch(e.code){case Yt:case Kt:case ie:return t.accountErrorInfo={code:e.code,message:e.message},!0;case zt:case Jt:case Qt:case Xt:case Gt:return t.pwdErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.mode){case et.PARENT:this.$httpPost.request({account:this.mobileVal,passCode:this.usePwd?this.$md5(this.password):this.vCode,type:this.usePwd?1:2,isInvalidToken:this.isRemeber?0:1,terminalType:0===this.osType?null:this.osType});break;case et.STAFF:this.$httpPost.request({account:this.account,password:this.$md5(this.password),isInvalidToken:this.isRemeber?0:1,terminalType:0===this.osType?null:this.osType});break;default:break}},pick:function(t){this.areaCode=t},openBackDoor:function(){this.$cfg.useBackDoor&&(this.clickCount+=1,5===this.clickCount&&this.$router.push({name:"backdoor"}))},changeBg:function(t){this.bgStyle={backgroundImage:"url(".concat(t,")")}},resetAccount:function(){this.account="",this.clearError()},togglePwdType:function(){this.pwdType="password"===this.pwdType?"text":"password"}}),beforeRouteUpdate:function(t,e,i){this.setMode(t.params.mode),this.clickCount=0,i()},created:function(){var t=this;this.$nextTick(function(){t.setMode(t.$route.params.mode)});var e=window.localStorage.getItem("smart_campus__bg");e&&this.changeBg(e),this.$bgHttpPost=this.$http.createPost("banner/loadAll",{opts:{retry:!0,prevent:!0},success:function(e){e.data.length>0&&t.$eventBus.$emit(ht,t.$transformUrl(e.data[0].picAttatchmentId))}}),this.$bgHttpPost.request(),this.$native.getNativeOS().then(function(e){t.osType="android"===e?2:1}),this.$eventBus.$on(ut,this.changeBg)},beforeDestroy:function(){this.$eventBus.$off(ut,this.changeBg),this.stopLogin(),this.$bgHttpPost.cancel()}},ys=ws,$s=(i("6ba9"),Object(c["a"])(ys,Wi,Gi,!1,null,null,null));$s.options.__file="Login.vue";var ks=$s.exports,Ps=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify p-pre-forget-pwd"},[i("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("resetPwd.title")))]),i("div",{staticClass:"p-pre-forget-pwd__nav"},[i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isPhoneMode},on:{click:function(e){t.changeMode(0)}}},[t._v(t._s(t.$t("tab.phone")))]),i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isEmailMode},on:{click:function(e){t.changeMode(1)}}},[t._v(t._s(t.$t("tab.email")))])]),t.isPhoneMode?i("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",error:t.accountError,label:t.$t("sms.phone")},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[i("area-code",{attrs:{areaCode:t.areaCode},on:{change:t.pick}})],1):i("form-field",{staticClass:"c-form-field",attrs:{label:t.$t("sms.email"),error:t.accountError,placeholder:t.$t("sms.email")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode"),error:t.vCodeError},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[i("sms",{attrs:{mode:t.checkMode,type:t.checkType,areaCode:t.areaCode,mobile:t.mobile,email:t.email,analysisError:t.analysisError},on:{send:t.clearError}})],1),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))])],1)},Ss=[],Es={name:"pre-set-pwd",components:{formField:Xi,areaCode:fs,sms:bs},data:function(){return{checkMode:0,areaCode:"",mobile:"",email:"",vCode:"",accountErrorInfo:null,vCodeErrorInfo:null}},computed:{mode:function(){return this.$route.params.mode},isStaff:function(){return"staff"===this.mode},checkType:function(){return this.isStaff?2:1},url:function(){switch(this.checkMode){case 0:return"common/premodify/mobile";case 1:return"common/premodify/email";default:return""}},isPhoneMode:function(){return 0===this.checkMode},isEmailMode:function(){return 1===this.checkMode},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},account:function(){return this.isPhoneMode?this.mobileVal:this.email},isValid:function(){return this.url&&this.account&&this.vCode},accountError:function(){return this.accountErrorInfo?this.$lang.code[this.accountErrorInfo.code]||this.accountErrorInfo.message:""},vCodeError:function(){return this.vCodeErrorInfo?this.$lang.code[this.vCodeErrorInfo.code]||this.vCodeErrorInfo.message:""}},methods:{clearError:function(){this.accountErrorInfo=null,this.vCodeErrorInfo=null},changeMode:function(t){this.checkMode!==t&&(this.clearError(),this.vCode="",this.checkMode=t,this.$httpPost&&this.$httpPost.setUrl(this.url))},pick:function(t){this.areaCode=t},next:function(){var t=this;this.url&&this.isValid&&(this.clearError(),this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(e){t.$router.replace({name:"reset-pwd",params:{mode:t.mode,token:e.data.token}})},fail:function(e){switch(e.code){case Jt:case Qt:return t.vCodeErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request(this.isPhoneMode?{mobile:this.mobileVal,vCode:this.vCode,type:this.checkType}:{email:this.email,vCode:this.vCode,type:this.checkType}))},analysisError:function(t){switch(t.code){case se:case ae:return this.accountErrorInfo={code:t.code,message:t.message},!0;default:return!1}}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Is=Es,As=(i("12ff"),Object(c["a"])(Is,Ps,Ss,!1,null,null,null));As.options.__file="PreSetPwd.vue";var Ts=As.exports,Ds=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify"},[i("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("setPwd.title")))]),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isPwdValid},attrs:{label:t.$t("common.pwd"),tip:t.$t("setPwd.tip"),error:t.passwordErr,value:t.password},on:{blur:t.checkPwdValid,input:t.checkPwdFormatValid}}),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isConfirmPwdValid},attrs:{label:t.$t("common.confirm"),error:t.confirmPasswordErr,value:t.confirmPassword},on:{blur:t.checkConfirmPwdValid,input:t.checkConfirmPwdFormatValid}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.hasValue},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)},Os=[];function xs(t){return t.length<6?{result:!1,reason:"tooShort"}:t.length>18?{result:!1,reason:"tooLong"}:/^[a-zA-Z\d~!@#$%^&*()_+`\-={}:";'<>?,.]+$/.test(t)?/^[a-zA-Z]+$/.test(t)||/^\d+$/.test(t)||/^[~!@#$%^&*()_+`\-={}:";'<>?,.]+$/.test(t)?{result:!1,reason:"simple"}:{result:!0}:{result:!1,reason:"illegal"}}function Ms(t){return/^[a-z0-9A-Z]+[-|a-z0-9A-Z._]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-z]{2,}$/.test(t)}var Ns={name:"reset-pwd",components:{formField:Xi},data:function(){return{password:"",confirmPassword:"",passwordErr:"",confirmPasswordErr:"",isPwdValid:!1,pwdInvalidReason:"",isConfirmPwdValid:!1,isMatch:!1}},computed:{mode:function(){return this.$route.params.mode},isStaff:function(){return"staff"===this.mode},url:function(){return this.isStaff?"staff/password/reset":"parent/password/modify"},token:function(){return this.$route.params.token},hasValue:function(){return!!this.password&&!!this.confirmPassword},isValid:function(){return this.isPwdValid&&this.isConfirmPwdValid&&this.isMatch}},methods:{checkPwdFormatValid:function(t){this.password=t;var e=xs(this.password);this.isPwdValid=e.result,this.pwdInvalidReason=e.reason},checkPwdValid:function(){this.isMatch=this.confirmPassword===this.password,this.isPwdValid?(this.passwordErr="",this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""):(this.passwordErr=this.password.length>0?this.$t("pwdErr.".concat(this.pwdInvalidReason)):"",this.confirmPasswordErr="")},checkConfirmPwdFormatValid:function(t){this.confirmPassword=t;var e=xs(this.confirmPassword);this.isConfirmPwdValid=e.result},checkConfirmPwdValid:function(){this.isMatch=this.confirmPassword===this.password,this.isPwdValid&&this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""},save:function(){var t=this;this.isValid&&(this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.$router.replace({name:"login",params:{mode:t.mode}})}})),this.$httpPost.request({token:this.token,password:this.$md5(this.password)}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Us=Ns,Ls=Object(c["a"])(Us,Ds,Os,!1,null,null,null);Ls.options.__file="ResetPwd.vue";var js=Ls.exports,Hs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",[i("router-view",{staticClass:"l-navigation__content"})],1)},Rs=[],Fs={name:"forget-pwd-wrapper"},Bs=Fs,Vs=Object(c["a"])(Bs,Hs,Rs,!1,null,null,null);Vs.options.__file="ForgetPwdWrapper.vue";var qs=Vs.exports,Ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("router-view",{class:t.modeClass})},Gs=[],Ys={name:"wrapper",computed:Object(Yi["a"])({},Object(K["c"])(["isStaff"]),{modeClass:function(){return this.isStaff?"t-staff":"t-parent"}})},zs=Ys,Zs=Object(c["a"])(zs,Ws,Gs,!1,null,null,null);Zs.options.__file="ThemeWrapper.vue";var Js=Zs.exports,Qs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify"},[i("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("setPwd.title")))]),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isPwdValid},attrs:{label:t.$t("common.pwd"),tip:t.$t("setPwd.tip"),error:t.passwordErr,value:t.password},on:{blur:t.checkPwdValid,input:t.checkPwdFormatValid}}),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isConfirmPwdValid},attrs:{label:t.$t("common.confirm"),error:t.confirmPasswordErr,value:t.confirmPassword},on:{blur:t.checkConfirmPwdValid,input:t.checkConfirmPwdFormatValid}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.hasValue},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)},Ks=[],Xs={name:"set-pwd",components:{formField:Xi},data:function(){return{password:"",confirmPassword:"",passwordErr:"",confirmPasswordErr:"",isPwdValid:!1,pwdInvalidReason:"",isConfirmPwdValid:!1,isMatch:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isParent"]),{url:function(){return this.isParent?"parent/password/modify":"staff/password/reset"},hasValue:function(){return!!this.password&&!!this.confirmPassword},isValid:function(){return this.isPwdValid&&this.isConfirmPwdValid&&this.isMatch},isRemember:function(){return"remember"===this.$route.params.type}}),methods:Object(Yi["a"])({},Object(K["b"])(["saveUser"]),{checkPwdFormatValid:function(t){this.password=t;var e=xs(this.password);this.isPwdValid=e.result,this.pwdInvalidReason=e.reason},checkPwdValid:function(){this.isMatch=this.confirmPassword===this.password,this.isPwdValid?(this.passwordErr="",this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""):(this.passwordErr=this.password.length>0?this.$t("pwdErr.".concat(this.pwdInvalidReason)):"",this.confirmPasswordErr="")},checkConfirmPwdFormatValid:function(t){this.confirmPassword=t;var e=xs(this.confirmPassword);this.isConfirmPwdValid=e.result},checkConfirmPwdValid:function(){var t=xs(this.confirmPassword);this.isConfirmPwdValid=t.result,this.isMatch=this.confirmPassword===this.password,this.isPwdValid&&this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""},save:function(){var t=this;this.isValid&&(this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.isRemember&&t.saveUser(),t.$router.replace({name:"home"})}})),this.$httpPost.request({token:this.user.token,password:this.$md5(this.password)}))}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},ta=Xs,ea=Object(c["a"])(ta,Qs,Ks,!1,null,null,null);ea.options.__file="SetPwd.vue";var ia=ea.exports,sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-bind"},[i("div",{staticClass:"l-operation__title",attrs:{slot:"topbar"},slot:"topbar"},[t._v(t._s(t.$t("bind.title")))]),i("div",{staticClass:"l-operation__header"},[t._v(t._s(t.tip))]),i("div",{staticClass:"l-operation__content u-align-c"},[i("div",{staticClass:"p-bind__img"}),i("div",{staticClass:"p-bind__list"},t._l(t.unbindFigures,function(e,s){return i("div",{key:e.id,staticClass:"p-bind__item_wrapper"},[i("div",{staticClass:"p-bind__item p-bind__item--toggle",class:["Male"===e.gender?"c-solid-avatar--boy":"c-solid-avatar--girl",{"is-active":s===t.index,"has-avatar":!!e.headUrlAttachmentId}],on:{click:function(e){t.toggle(s)}}},[e.headUrlAttachmentId?i("div",{staticClass:"c-solid-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.getHeadUrl(e)+")"}})]):t._e()]),i("div",{staticClass:"p-bind__name"},[t._v(t._s(e.firstName))])])}))]),i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.toBind}},[t._v(t._s(t.$t("bracelet.bind")))])])])},aa=[],na={name:"bind-choosen",data:function(){return{index:-1,state:"bind"}},computed:Object(Yi["a"])({},Object(K["d"])(["user","figures"]),{unbindFigures:function(){return this.figures.filter(function(t){return 0===t.braceletOfBinding})},has:function(){return this.figures.length>0},tip:function(){return"again"===this.$route.params.type?this.$t("bind.again"):this.$t("bind.tip")}}),methods:{toggle:function(t){this.index===t?this.index=-1:this.index=t},cancel:function(){this.$router.replace({name:"home"})},toBind:function(){this.index>=0&&this.$router.replace({name:"scan",params:{id:this.unbindFigures[this.index].id}})},check:function(){return 0===this.unbindFigures.length?(this.cancel(),!0):1===this.figures.length&&(this.index=0,this.toBind(),!0)},getHeadUrl:function(t){return this.$transformHeadUrl(t.headUrlAttachmentId,this.user.token)}},watch:{has:function(t){t&&this.check()}},created:function(){this.has&&this.check()}},oa=na,ra=(i("2b11"),Object(c["a"])(oa,sa,aa,!1,null,null,null));ra.options.__file="BindChoosen.vue";var ca=ra.exports,la=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-bind-success"},[i("div",{staticClass:"l-operation__title",attrs:{slot:"topbar"},slot:"topbar"},[t._v(t._s(t.$t("bind.title")))]),i("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("bind.success")))]),i("div",{staticClass:"l-operation__content u-align-c"},[i("div",{staticClass:"p-bind-success__img"},[i("div",{staticClass:"p-bind-success__avatar",class:[t.avatarClass,{"has-avatar":!!t.headUrl}]},[t.headUrl?i("div",{staticClass:"c-solid-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()]),i("div",{staticClass:"p-bind-success__link"})])]),i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button--full o-button t-adapt-button",on:{click:t.next}},[t._v(t._s(t.$t("common.confirm")))])])])},ha=[],ua={name:"bind-success",data:function(){return{}},computed:Object(Yi["a"])({},Object(K["d"])(["user","figures","runtimmeMode"]),Object(K["c"])(["getFigure","isStaff"]),{id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)},avatarClass:function(){return this.figure?this.isStaff?this.figure.gender===st.MALE?"c-solid-avatar--male":"c-solid-avatar--female":this.figure.gender===st.MALE?"c-solid-avatar--boy":"c-solid-avatar--girl":"c-solid-avatar--male"},headUrl:function(){return this.figure&&this.figure.headUrlAttachmentId?this.$transformHeadUrl(this.figure.headUrlAttachmentId,this.user.token):null}}),methods:{next:function(){switch(this.runtimmeMode){case"boot":1===this.figures.length?this.$router.replace({name:"home"}):this.$router.replace({name:"bind",params:{type:"again"}});break;default:this.$router.back();break}}}},da=ua,fa=(i("7578"),Object(c["a"])(da,la,ha,!1,null,null,null));fa.options.__file="BindSuccess.vue";var pa=fa.exports,ma=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-bind-failure"},[i("div",{staticClass:"l-operation__title",attrs:{slot:"topbar"},slot:"topbar"},[t._v(t._s(t.$t("bind.title")))]),i("div",{staticClass:"l-operation__header p-bind-failure__error"},[t._v("\n    "+t._s(t.$t("bind.failure"))+"\n    "),i("div",{staticClass:"p-bind-failure__tip"},[t._v(t._s(t.failTip))])]),i("div",{staticClass:"l-operation__content u-align-c"},[i("div",{staticClass:"p-bind-failure__img"},[i("div",{staticClass:"p-bind-failure__avatar",class:[t.avatarClass,{"has-avatar":!!t.headUrl}]},[t.headUrl?i("div",{staticClass:"c-solid-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()]),i("div",{staticClass:"p-bind-failure__link"})])]),i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.retry}},[t._v(t._s(t.$t("bracelet.retry")))])])])},va=[],_a=(i("28a5"),{name:"bind-failure",computed:Object(Yi["a"])({},Object(K["d"])(["user","runtimmeMode"]),Object(K["c"])(["isStaff","getFigure"]),{url:function(){return this.isStaff?"staff/bracelet/bind":"parent/bracelet/bind"},id:function(){return Number(this.$route.params.id)},code:function(){return this.$route.params.code?this.$route.params.code:null},figure:function(){return this.getFigure(this.id)},avatarClass:function(){return this.figure?this.isStaff?this.figure.gender===st.MALE?"c-solid-avatar--male":"c-solid-avatar--female":this.figure.gender===st.MALE?"c-solid-avatar--boy":"c-solid-avatar--girl":"c-solid-avatar--male"},failTip:function(){var t;return null!==this.code&&(t=this.$lang.code[this.code]),t||this.$t("bind.failTip")},headUrl:function(){return this.figure&&this.figure.headUrlAttachmentId?this.$transformHeadUrl(this.figure.headUrlAttachmentId,this.user.token):null}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateFigureInfo"]),{cancel:function(){switch(this.runtimmeMode){case"boot":this.$router.replace({name:"home"});break;default:this.$router.back();break}},bind:function(t,e,i){var s=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(t,e){s.updateFigureInfo({id:s.id,info:s.isStaff?{braceletOfBinding:1,macAddress:e.macAddress}:{braceletOfBinding:1,braceletMac:e.macAddress}}),s.$router.replace({name:"bind-success",params:{id:s.id}})},fail:function(t){return s.$router.replace({name:"bind-failure",params:{id:s.id,code:t.code}}),!0}})),this.$httpPost.request(this.isStaff?{token:this.user.token,serialNum:t,macAddress:e,nfcId:i}:{token:this.user.token,idStudent:this.id,serialNum:t,macAddress:e,nfcId:i})},checkQr:function(t){var e=t.split("#");if(3===e.length&&-1===t.indexOf("-")){var i=e[1].split(":")[1];if(i&&12===i.length)return i=i.replace(/[-:]/g,"").toLowerCase(),void this.bind(e[0].split(":")[1],i,e[2].split(":")[1])}this.$router.replace({name:"bind-failure",params:{id:this.id,code:-3e3}})},retry:function(){var t=this;this.$native.scan().then(function(e){1===e.type&&t.checkQr(e.message)})}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}}),ga=_a,ba=(i("de91"),Object(c["a"])(ga,ma,va,!1,null,null,null));ba.options.__file="BindFailure.vue";var Ca=ba.exports,wa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-scan"},[i("div",{staticClass:"l-operation__title",attrs:{slot:"topbar"},slot:"topbar"},[t._v(t._s(t.$t("scan.title")))]),i("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("scan.tip")))]),i("div",{staticClass:"l-operation__content u-align-c"},[i("div",{staticClass:"p-scan__img"})]),i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.toScan}},[t._v(t._s(t.$t("scan.scan")))])])])},ya=[],$a={name:"scan",computed:Object(Yi["a"])({},Object(K["d"])(["user","figures","runtimmeMode"]),Object(K["c"])(["isStaff","getFigure"]),{url:function(){return this.isStaff?"staff/bracelet/bind":"parent/bracelet/bind"},id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateFigureInfo"]),{cancel:function(){switch(this.runtimmeMode){case"boot":1===this.figures.length?this.$router.replace({name:"home"}):this.$router.replace({name:"bind"});break;default:this.$router.back();break}},bind:function(t,e,i){var s=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(t,e){s.updateFigureInfo({id:s.id,info:s.isStaff?{braceletOfBinding:1,macAddress:e.macAddress}:{braceletOfBinding:1,braceletMac:e.macAddress}}),s.$router.replace({name:"bind-success",params:{id:s.id}})},fail:function(t){return s.$router.replace({name:"bind-failure",params:{id:s.id,code:t.code}}),!0}})),this.$httpPost.request(this.isStaff?{token:this.user.token,serialNum:t,macAddress:e,nfcId:i}:{token:this.user.token,idStudent:this.id,serialNum:t,macAddress:e,nfcId:i})},checkQr:function(t){var e=t.split("#");if(3===e.length&&-1===t.indexOf("-")){var i=e[1].split(":")[1];if(i&&12===i.length)return i=i.replace(/[-:]/g,"").toLowerCase(),void this.bind(e[0].split(":")[1],i,e[2].split(":")[1])}this.$router.replace({name:"bind-failure",params:{id:this.id,code:-3e3}})},toScan:function(){var t=this;this.$native.scan().then(function(e){1===e.type&&t.checkQr(e.message)})}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},ka=$a,Pa=(i("e32f"),Object(c["a"])(ka,wa,ya,!1,null,"5846e4cd",null));Pa.options.__file="Scan.vue";var Sa=Pa.exports,Ea=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-unbind"},[i("div",{staticClass:"l-operation__title",attrs:{slot:"topbar"},slot:"topbar"},[t._v(t._s(t.$t("unbind.title")))]),i("div",{staticClass:"l-operation__header"},[t._v(t._s(t.$t("unbind.tip")))]),i("div",{staticClass:"l-operation__content u-align-c"},[i("div",{staticClass:"p-unbind__img"},[i("div",{staticClass:"p-unbind__avatar",class:[t.avatarClass,{"has-avatar":!!t.headUrl}]},[t.headUrl?i("div",{staticClass:"c-solid-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()]),i("div",{staticClass:"p-unbind__link"})])]),i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.cancel}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"l-operation__button o-button o-button--prominent",on:{click:function(e){t.isConfirm=!0}}},[t._v(t._s(t.fail?t.$t("bracelet.retry"):t.$t("bracelet.unbind")))])]),t.isConfirm?i("div",{staticClass:"c-unbind-mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{staticClass:"c-unbind-confirm"},[i("div",{staticClass:"c-unbind-confirm__title"},[t._v(t._s(t.$t("common.tip")))]),i("div",{staticClass:"c-unbind-confirm__content"},[t._v(t._s(t.$t("unbind.confirm")))]),i("div",{staticClass:"c-unbind-confirm__wrapper"},[i("div",{staticClass:"c-unbind-confirm__button--cancel",on:{click:function(e){t.isConfirm=!1}}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"c-unbind-confirm__button--ok t-adapt-text",on:{click:t.unbind}},[t._v(t._s(t.$t("common.confirm")))])])])]):t._e()])},Ia=[],Aa={name:"unbind",data:function(){return{fail:!1,isConfirm:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff","getFigure"]),{url:function(){return this.isStaff?"staff/bracelet/unbind":"parent/bracelet/unbind"},id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)},avatarClass:function(){return this.figure?this.isStaff?this.figure.gender===st.MALE?"c-solid-avatar--male":"c-solid-avatar--female":this.figure.gender===st.MALE?"c-solid-avatar--boy":"c-solid-avatar--girl":"c-solid-avatar--male"},headUrl:function(){return this.figure&&this.figure.headUrlAttachmentId?this.$transformHeadUrl(this.figure.headUrlAttachmentId,this.user.token):null}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateFigureInfo","writeBracelet"]),{cancel:function(){this.$router.back()},unbind:function(){var t=this;this.isConfirm=!1,this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.writeBracelet({key:t.id,state:!1}),t.figure&&t.$native.unbindBracelet(t.isStaff?t.figure.macAddress:t.figure.braceletMac),t.updateFigureInfo({id:t.id,info:t.isStaff?{braceletOfBinding:0,macAddress:"",isBraceletWritten:0}:{braceletOfBinding:0,braceletMac:"",isBraceletWritten:0}}),t.cancel()},fail:function(){t.fail=!0}})),this.$httpPost.request(this.isStaff?{token:this.user.token}:{token:this.user.token,idStudent:this.id})}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Ta=Aa,Da=(i("63bd"),Object(c["a"])(Ta,Ea,Ia,!1,null,null,null));Da.options.__file="Unbind.vue";var Oa=Da.exports,xa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.bracelet")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",t._l(t.figures,function(e){return i("li",{key:e.id,staticClass:"c-bracelet-item"},[i("div",{staticClass:"c-bracelet-item__avatar",class:[t.isStaff?"Male"===e.gender?"c-avatar--male":"c-avatar--female":"Male"===e.gender?"c-avatar--boy":"c-avatar--girl",{"has-avatar":!!e.headUrlAttachmentId}]},[e.headUrlAttachmentId?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.getHeadUrl(e)+")"}})]):t._e()]),i("div",{staticClass:"c-bracelet-item__name"},[t._v(t._s(e.name))]),i("div",{staticClass:"c-bracelet-item__button",class:{"t-adapt-button":0===e.braceletOfBinding,"o-button--prominent":1===e.braceletOfBinding},on:{click:function(i){t.toggle(e)}}},[t._v(t._s(0===e.braceletOfBinding?t.$t("bracelet.bind"):t.$t("bracelet.unbind")))])])}))])])},Ma=[],Na={name:"bracelet",computed:Object(Yi["a"])({},Object(K["d"])(["user","figures"]),Object(K["c"])(["isStaff"]),{has:function(){return this.figures.length>0}}),methods:{toggle:function(t){0===t.braceletOfBinding?this.$router.replace({name:"scan",params:{id:t.id}}):this.$router.replace({name:"unbind",params:{id:t.id}})},check:function(){1===this.figures.length&&this.toggle(this.figures[0])},getHeadUrl:function(t){return this.$transformHeadUrl(t.headUrlAttachmentId,this.user.token)}},watch:{has:function(t){t&&this.check()}},created:function(){this.has&&this.check()}},Ua=Na,La=(i("eb4a"),Object(c["a"])(Ua,xa,Ma,!1,null,null,null));La.options.__file="Bracelet.vue";var ja=La.exports,Ha=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-home",class:{"is-touch":t.side.moving},on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[i("side-menu",{staticClass:"p-home__side",style:t.sideStyle}),i("safe-area-layout",{staticClass:"p-home__main t-adapt-bg",class:{"is-touch":t.side.moving},style:t.mainStyle},[i("template",{slot:"topbar"},[i("div",{staticClass:"p-home__shortcut"},[i("div",{staticClass:"p-home__icon_wrapper",on:{click:t.toggleSide}},[i("i",{staticClass:"p-home__menu"})])])]),i("div",{staticClass:"p-home__content"},[i("div",{staticClass:"p-home__header swiper-container",attrs:{id:"person-swiper"}},[i("div",{staticClass:"swiper-wrapper"},t._l(t.figures,function(e){return i("character-intro",{key:e.id,staticClass:"p-home__person swiper-slide",attrs:{person:e,connected:t.connected,connecting:t.connecting}})})),i("div",{staticClass:"swiper-pagination",attrs:{id:"person-pagination"}})]),t.toast?i("div",{staticClass:"p-home__toast p-home-toast",class:"p-home-toast--"+t.toast,on:{click:t.clickToast}},[t._v("\n        "+t._s(t.$t("home.toast."+t.toast))+"\n        "),i("div",{staticClass:"p-home-toast__icon",on:{click:function(e){return e.stopPropagation(),t.clickToastIcon(e)}}})]):t._e(),i("div",{staticClass:"p-home__section"},[i("div",{staticClass:"p-home-block"},[i("div",{staticClass:"p-home-block__header",on:{click:t.toHistory}},[i("span",{staticClass:"p-home-block__title"},[t._v(t._s(t.$t("common.today")))]),i("span",{staticClass:"p-home-block__tip"},[t._v(t._s(t.today))]),i("i",{staticClass:"p-home-block__arrow"})]),i("div",{staticClass:"p-home-block__content"},[i("div",{staticClass:"c-timeline p-home-timeline"},t._l(t.timeline,function(e,s){return i("div",{key:s,staticClass:"c-timeline__point"},[i("div",{staticClass:"c-timeline__header t-adapt-point",class:{"is-active":0===s&&0!==e.type}}),i("div",{staticClass:"c-timeline__tail"}),i("div",{staticClass:"c-timeline__content",class:"p-home-timeline__level"+s},[i("div",{staticClass:"c-timeline__time"},[t._v(t._s(e.time))]),i("div",{staticClass:"c-timeline__info"},[i("div",{staticClass:"c-timeline__row is-nowrap"},[t._v(t._s(e.label))]),3===e.type||5===e.type?i("div",{staticClass:"c-timeline__row is-nowrap"},[i("div",{staticClass:"p-home-timeline__bus t-adapt-color",on:{click:function(i){t.toBusMap(e)}}},[t._v(t._s(t.$t("record.bus")))])]):t._e()])])])}))])])]),t.canShowAttendance?i(t.attendanceComponent,{tag:"component",staticClass:"p-home__section"}):t._e(),i("div",{staticClass:"p-home__section"},[i("div",{staticClass:"p-home-block"},[i("div",{staticClass:"p-home-block__header",attrs:{tag:"div"},on:{click:t.toMotion}},[i("span",{staticClass:"p-home-block__title"},[t._v(t._s(t.$t("home.motion.title")))]),i("i",{staticClass:"p-home-block__arrow"})]),i("div",{staticClass:"p-home-block__content"},[i("div",{staticClass:"p-home-steps u-clearfix"},[i("i",{staticClass:"p-home-steps__icon"}),i("div",{staticClass:"p-home-steps__tip"},[t._v(t._s(t.$t("home.motion.tip")))]),i("div",{staticClass:"p-home-steps__value"},[t._v(t._s(t.steps)),i("span",{staticClass:"p-home-steps__unit"},[t._v(t._s(t.$t("home.motion.unit")))])])])])])])],1),i("template",{slot:"inde"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.mainX>0,expression:"mainX > 0"}],staticClass:"p-home__mask",style:t.maskStyle,on:{click:function(e){t.showSide&&t.toggleSide()},touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.touchmove(e)}}})])],2)],1)},Ra=[],Fa=i("5720"),Ba=i.n(Fa),Va=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"c-side-menu"},[i("div",{staticClass:"c-side-menu__header",attrs:{slot:"topbar"},slot:"topbar"},[i("div",{class:[t.avatarClass,{"has-avatar":!!t.headUrl}]},[t.headUrl?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()]),i("div",{staticClass:"c-side-menu__name"},[t._v(t._s(t.user.name))]),i("div",{staticClass:"c-side-menu__info"},[i("div",{staticClass:"c-side-menu__phone"},[i("i",{staticClass:"c-side-menu__icon--phone"}),t._v(t._s(t.phoneNumber))]),i("div",{staticClass:"c-side-menu__email"},[i("i",{staticClass:"c-side-menu__icon--email"}),t._v(t._s(t.user.email))])])]),i("div",{staticClass:"c-side-menu__wrapper"},[i("ul",[i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"bracelet"}}},[i("i",{staticClass:"c-side-menu__icon--bracelet"}),t._v(t._s(t.$t("home.menu.bracelet")))]),i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"account"}}},[i("i",{staticClass:"c-side-menu__icon--account"}),t._v(t._s(t.$t("home.menu.account")))]),t.isParent?i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"children"}}},[i("i",{staticClass:"c-side-menu__icon--kids"}),t._v(t._s(t.$t("home.menu.kids")))]):t._e(),i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"pre-modify-pwd"}}},[i("i",{staticClass:"c-side-menu__icon--password"}),t._v(t._s(t.$t("home.menu.password")))]),i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"setting"}}},[i("i",{staticClass:"c-side-menu__icon--setting"}),t._v(t._s(t.$t("home.menu.setting")))]),i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"faq"}}},[i("i",{staticClass:"c-side-menu__icon--faq"}),t._v(t._s(t.$t("home.menu.faq")))]),i("router-link",{staticClass:"c-side-menu__link",attrs:{tag:"li",to:{name:"about"}}},[i("i",{staticClass:"c-side-menu__icon--about"}),t._v(t._s(t.$t("home.menu.about")))])],1)]),i("div",{staticClass:"c-side-menu__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"o-button o-button--unwish",on:{click:t.logout}},[t._v(t._s(t.$t("home.menu.logout")))])])])},qa=[],Wa={name:"side-menu",computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isParent","phoneNumber"]),{avatarClass:function(){return this.user.gender===st.MALE?"c-avatar--male":"c-avatar--female"},headUrl:function(){return this.user.headUrlAttachmentId?this.$transformHeadUrl(this.user.headUrlAttachmentId,this.user.token):null}}),methods:{logout:function(){this.$http.post(this.isParent?"parent/logout":"staff/logout",{token:this.user.token},{ignore:!0}),this.$store.dispatch(tt),this.$router.replace({name:"login",params:{mode:this.isParent?"parent":"staff"}})}}},Ga=Wa,Ya=(i("01cb"),Object(c["a"])(Ga,Va,qa,!1,null,null,null));Ya.options.__file="SideMenu.vue";var za=Ya.exports,Za=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("character-intro",{attrs:{person:t.intro},on:{avatar:t.clickAvatar}},[i("div",{staticClass:"c-bracelet-state"},[i("div",{staticClass:"c-bracelet-state__icon",class:{"has-unbind":0===t.state,"has-unconnected":1===t.state,"has-connected":2===t.state},on:{click:t.check}}),t.energe>=0?i("div",{staticClass:"c-bracelet-state__energe",class:t.energeClass}):t._e(),i("div",{staticClass:"c-bracelet-state__label",class:{"is-bottom":t.energe>=0}},[t._v(t._s(t.stateTip))])])])},Ja=[],Qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-character-intro"},[i("div",{staticClass:"c-character-intro__avatar",class:[t.avatarClass,{"has-avatar":!!t.person&&!!t.person.headUrl}],on:{click:t.clickAvatar}},[t.person&&t.person.headUrl?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.person.headUrl+")"}})]):t._e()]),i("div",{staticClass:"c-character-intro__content"},[t.person&&t.person.name?i("div",[i("div",{staticClass:"c-character-intro__wrapper"},[i("span",{directives:[{name:"overflow",rawName:"v-overflow",value:t.person.name,expression:"person.name"}],staticClass:"c-character-intro__name",class:{"is-kid":t.person.isKid}},[t._v(t._s(t.person.name))])]),t.person.info?i("div",{staticClass:"c-character-intro__info"},[t._v(t._s(t.person.info))]):t._e(),t.person.tag?i("div",{staticClass:"c-character-intro__tag",class:{"is-kid":t.person.isKid}},[t._v(t._s(t.person.tag))]):t._e()]):t._e()]),i("div",{staticClass:"c-character-intro__extend"},[t._t("default")],2)])},Ka=[],Xa={name:"character-intro",props:{person:{type:Object}},computed:{avatarClass:function(){return this.person&&this.person.isKid?this.person.isMale?"c-avatar--boy":"c-avatar--girl":this.person.isMale?"c-avatar--male":"c-avatar--female"}},methods:{clickAvatar:function(){this.$emit("avatar")}}},tn=Xa,en=(i("28a2"),Object(c["a"])(tn,Qa,Ka,!1,null,null,null));en.options.__file="CharacterIntro.vue";var sn=en.exports,an={name:"home-character-Intro",props:["person","connected","connecting"],components:{characterIntro:sn},data:function(){return{energe:-1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{braceletMac:function(){return 1===this.person.braceletOfBinding?this.isStaff?this.person.macAddress:this.person.braceletMac:""},state:function(){switch(!0){case 0===this.person.braceletOfBinding:return 0;case this.connected&&this.connected===this.braceletMac:return 2;case this.connecting&&this.connecting===this.braceletMac:return-1;default:return 1}},stateTip:function(){if(this.energe>=0&&this.energe<=10)return this.$t("state.low");switch(this.state){case 0:return this.$t("state.unbind");case 1:return this.$t("state.unconnected");case 2:return this.$t("state.connected");default:return""}},level:function(){switch(this.person.roles){case 1:case 2:case 3:case 4:return this.$t("staffLevel.admin");case 5:return this.$t("staffLevel.headTeacher");case 6:return this.$t("staffLevel.teacher");case 7:return this.$t("staffLevel.staff");default:return this.$t("staffLevel.unknown")}},intro:function(){var t=this.person.name;return{name:this.isStaff?this.$t("home.staff.name",{name:t}):t,headUrl:this.person.headUrlAttachmentId?this.$transformHeadUrl(this.person.headUrlAttachmentId,this.user.token):null,info:this.isStaff?"":this.$t("common.teacher")+this.person.headTeacherUserName,tag:this.isStaff?this.level:this.$t("format.classInfo2",{gradeLevel:this.person.gradeLevel,classId:this.person.classId}),isKid:!this.isStaff,isMale:this.person.gender===st.MALE}},energeClass:function(){switch(!0){case this.energe>80:return"is-81-100";case this.energe>60:return"is-61-80";case this.energe>40:return"is-41-60";case this.energe>20:return"is-21-40";case this.energe>10:return"is-11-20";default:return"is-low"}}}),watch:{state:{handler:function(){this.checkEnerge()},immediate:!0}},methods:{clickAvatar:function(){this.isStaff?this.$router.push({name:"account"}):this.$router.push({name:"children-info",params:{id:this.person.id}})},check:function(){0===this.state&&this.$router.push({name:"bracelet"})},checkEnerge:function(){if(2===this.state){var t=this.$bracelet.getStateInfo();this.energe=t.energe}else this.energe=-1}},created:function(){this.$eventBus.$on(ft,this.checkEnerge)},beforeDestroy:function(){this.$eventBus.$off(ft,this.checkEnerge)}},nn=an,on=(i("bace"),Object(c["a"])(nn,Za,Ja,!1,null,null,null));on.options.__file="CharacterIntroHome.vue";var rn=on.exports,cn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-home-attendance-admin"},[i("attendance-block",{staticClass:"c-attendance-block--single",attrs:{title:t.$t("attendanceType.teacher"),supplement:t.$t("attendance.supplement"),attendance:t.teacherAttendance},nativeOn:{click:function(e){return t.toTeacherAttendance(e)}}}),i("attendance-block",{staticClass:"c-attendance-block--single",attrs:{title:t.$t("attendanceType.student"),supplement:t.$t("attendance.supplement"),attendance:t.studentAttendance},nativeOn:{click:function(e){return t.toStudentAttendance(e)}}})],1)},ln=[],hn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-attendance-block"},[i("div",{staticClass:"c-attendance-block__wrapper"},[i("div",{staticClass:"c-attendance-block__header"},[i("span",{staticClass:"c-attendance-block__title"},[t._v(t._s(t.title||""))]),i("span",{staticClass:"c-attendance-block__supplement"},[t._v(t._s(t.supplement))])]),i("div",{staticClass:"c-attendance-block__content"},[i("div",{staticClass:"c-attendance-block__tip"},[t._v(t._s(t.$t("attendance.arrived")))]),i("div",{staticClass:"c-attendance-block__percent"},[i("span",{staticClass:"c-attendance-block__arrived"},[t._v(t._s(t.arrived))]),i("span",{staticClass:"c-attendance-block__total"},[t._v("/"+t._s(t.total))])]),i("div",{staticClass:"o-progress"},[i("div",{staticClass:"o-pregress__inner",style:{width:t.precent+"%"}})]),t._t("default")],2)])])},un=[],dn={name:"attendance-block",props:["title","attendance","supplement"],computed:{arrived:function(){return this.attendance?this.attendance.arrived:0},total:function(){return this.attendance?this.attendance.total:0},precent:function(){return this.total>0?this.arrived/this.total*100:0}},methods:{click:function(){this.$emit("click",this.attendance)}}},fn=dn,pn=(i("1812"),Object(c["a"])(fn,hn,un,!1,null,null,null));pn.options.__file="AttendanceBlock.vue";var mn=pn.exports,vn={name:"home-attendance-admin",components:{attendanceBlock:mn},data:function(){return{teacherAttendance:{arrived:0,total:0},studentAttendance:{arrived:0,total:0}}},computed:Object(Yi["a"])({},Object(K["d"])(["user"])),methods:{analysis:function(t){this.teacherAttendance={arrived:t.arrivedStaffTotal,total:t.staffTotal},this.studentAttendance={arrived:t.arrivedStudentTotal,total:t.studentTotal}},toTeacherAttendance:function(){this.$router.push({name:"attendance-school",params:{mode:"teacher"}})},toStudentAttendance:function(){this.$router.push({name:"attendance-school",params:{mode:"student"}})}},created:function(){var t=this;this.$httpPost=this.$http.createPost("admin/dashboard",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},_n=vn,gn=(i("8f81"),Object(c["a"])(_n,cn,ln,!1,null,null,null));gn.options.__file="HomeAttendanceAdmin.vue";var bn=gn.exports,Cn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-home-attendance-teacher",class:{"is-enough":t.attendances.length>=2},on:{click:t.toClassAttendance}},[i("div",{ref:"swiper",staticClass:"swiper-container"},[i("div",{staticClass:"swiper-wrapper"},t._l(t.attendances,function(e,s){return i("attendance-block",{key:s,staticClass:"swiper-slide c-attendance-block--single",attrs:{title:t.$t("attendanceType.student"),supplement:t.$t("attendance.supplement"),attendance:e}},[i("div",{staticClass:"c-home-attendance-teacher__belong"},[t._v(t._s(t.$t("format.classInfo",{gradeLevel:e.gradeLevel,classId:e.classId})))])])})),i("div",{ref:"pagination",staticClass:"swiper-pagination"})])])},wn=[],yn={name:"attendance-block-teacher",components:{attendanceBlock:mn},data:function(){return{attendances:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"])),methods:{analysis:function(t){var e=this;t.forEach(function(t){t.arrived=t.arrivedStudentClassTotal,t.total=t.studentClassTotal}),this.attendances=t,this.$nextTick(function(){e.refreshSwiper()})},refreshSwiper:function(){var t=this.attendances.length;this.$swiper?this.$swiper.slides.length!==t&&(t<=1?(this.$swiper.destroy(),this.$swiper=null):this.$swiper.update()):t>=2&&(this.$swiper=new Ba.a(this.$refs.swiper,{loop:!1,spaceBetween:5,pagination:{el:this.$refs.pagination,dynamicBullets:t>5,longSwipesRatio:.3}}))},toClassAttendance:function(){if(this.attendances.length>0){var t=this.$swiper?this.$swiper.realIndex:0;this.$router.push({name:"attendance-details",params:{mode:"student",id:this.attendances[t].idClass}})}}},created:function(){var t=this;this.$httpPost=this.$http.createPost("teacher/class/studentstat",{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token})},mounted:function(){this.refreshSwiper()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel(),this.$swiper&&this.$swiper.destroy()}},$n=yn,kn=(i("ff01"),Object(c["a"])($n,Cn,wn,!1,null,null,null));kn.options.__file="HomeAttendanceTeacher.vue";var Pn=kn.exports,Sn={name:"home",components:{sideMenu:za,characterIntro:rn,homeAttendanceAdmin:bn,homeAttendanceTeacher:Pn},props:[],data:function(){return{showSide:!1,records:[],index:0,toast:"",date:new Date,steps:0,need:{},connected:null,connecting:null,timer:-1,clockTimer:-1,side:{date:null,lastTouch:0,touch:!1,moving:!1},sideX:-50,mainX:0}},computed:Object(Yi["a"])({},Object(K["d"])(["user","figures","hasWritten"]),Object(K["c"])(["isStaff","isAdmin","isHeadTeacher","getFigure"]),{today:function(){return this.$t("format.date",{week:this.$d(this.date,"week"),month:this.date.getMonth()+1,day:this.date.getDate(),year:this.date.getFullYear()})},timeline:function(){var t,e=this.records.length;switch(!0){case e>3:t=this.records.slice(0,3).map(this.transformRecord);break;case 3===e:t=this.records.map(this.transformRecord);break;default:t=this.records.map(this.transformRecord);for(var i=e;i<3;i++)t.push({type:0,time:"--:--:--"});break}return t},figure:function(){return this.figures.length>0?this.figures[this.index]:null},id:function(){return this.figure?this.figure.id:null},canShowAttendance:function(){return this.isAdmin||this.isHeadTeacher},attendanceComponent:function(){return this.isAdmin?"home-attendance-admin":"home-attendance-teacher"},sideStyle:function(){return{transform:"translateX(".concat(this.sideX,"px)")}},mainStyle:function(){return{transform:"translateX(".concat(this.mainX,"px)")}},maskStyle:function(){return{opacity:this.mainX/295*.4}}}),methods:Object(Yi["a"])({},Object(K["b"])(["setRuntimeMode","writeBracelet"]),{transformRecord:function(t){var e;switch(t.type){case 1:case 2:e=this.$t("record.".concat(t.type),{gate:this.$lang.isChinese()?t.checkinPointName:t.checkinPointNameEn});break;case 3:case 4:case 5:case 6:e=this.$t("record.".concat(t.type),{routeNo:t.routeNo});break;case 12:case 13:case 14:e=this.$t("record.".concat(t.type),{name:"".concat(t.staffFirstName," ").concat(t.staffLastName)});break;default:e=this.$t("record.".concat(t.type));break}return{label:e,type:t.type,time:t.checkTimeStr.split(" ")[1],busId:t.busId,detailId:t.checkDetailId}},checkBluetooth:function(){this.toast&&"bluetooth"!==this.toast||(this.toast=this.$native.bluetooth?null:"bluetooth"),this.checkBracelet(!0)},checkFlag:function(){if(this.figure){this.need[this.id]||(this.need[this.id]={bracelet:!0,bus:!0});var t=this.need[this.id];if(t.bracelet&&0===this.figure.braceletOfBinding)return void(this.toast="bracelet");if(!this.isStaff&&t.bus&&!this.figure.busstudentId)return void(this.toast="bus")}this.$native.bluetooth?this.toast=null:this.toast="bluetooth"},connectBracelet:function(t){this.$bracelet.connect(t)},checkBracelet:function(t){var e=this;if(clearTimeout(this.timer),this.$native.bluetooth&&this.figure&&1===this.figure.braceletOfBinding){var i=this.isStaff?this.figure.macAddress:this.figure.braceletMac;i&&this.connected!==i&&this.connecting!==i&&(t?this.connectBracelet(i):this.timer=setTimeout(function(){e.connectBracelet(i)},2e3))}},refetch:function(t){var e=this;this.checkFlag(),this.figure&&(t&&(this.records=[],this.steps=0,this.$recordsHttpPost&&this.$recordsHttpPost.cancel(),this.$stepHttpPost&&this.$stepHttpPost.cancel()),this.checkBracelet(),this.$recordsHttpPost||(this.$recordsHttpPost=this.$http.createPost(this.isStaff?"staff/signinrecord/today":"parent/child/signinrecord/today",{opts:{cycle:6e4},success:function(t){return e.records=t.data},fail:function(t){switch(t.code){case Ht:case Ft:case Bt:case Rt:case Vt:return!0;default:return!1}}})),this.$recordsHttpPost.request(this.isStaff?{token:this.figure.token}:{token:this.user.token,idStudent:this.figure.id}),this.$stepHttpPost||(this.$stepHttpPost=this.$http.createPost(this.isStaff?"staff/sport":"parent/child/sport",{opts:{retry:!0},success:function(t){return e.steps=t.data.steps||0},fail:function(t){switch(t.code){case Ht:case Ft:case Bt:case Rt:case Vt:return!0;default:return!1}}})),this.$stepHttpPost.request(this.isStaff?{token:this.figure.token}:{token:this.user.token,idStudent:this.figure.id}))},updatePerson:function(){var t=this;if(this.figures.length>1&&!this.$personSwiper){this.$personSwiper=new Ba.a("#person-swiper",{loop:!1,pagination:{el:"#person-pagination",longSwipesRatio:.3},on:{slideChangeTransitionStart:function(){t.$router.replace({name:"home",params:{index:t.$personSwiper.activeIndex}})}}});var e=Math.min(this.index,this.figures.length-1);e>0&&this.$personSwiper.slideTo(e,0,!1)}this.refetch()},scan:function(){this.$native.scan()},clickToast:function(){switch(this.toast){case"bracelet":this.$router.push({name:"scan",params:{id:this.id}});break;case"bus":this.$router.push({name:"modify-bus",params:{id:this.id}});break;case"bluetooth":this.$router.push({name:"bluetooth"});break;default:break}},clickToastIcon:function(){switch(this.toast){case"bracelet":case"bus":this.need[this.id][this.toast]=!1,this.checkFlag();break;case"bluetooth":this.clickToast();break;default:break}},toHistory:function(){this.figure&&this.$router.push({name:"sign-in-history",params:{id:this.id}})},toMotion:function(){this.figure&&this.$router.push({name:"motion",params:{id:this.id}})},toBind:function(){this.$router.push({name:"scan",params:{id:this.id}})},toBusMap:function(t){this.$router.push({name:"bus-map",params:{busId:t.busId,id:t.detailId}})},clock:function(){this.date=new Date},checkStyle:function(){this.mainX=this.showSide?295:0,this.sideX=this.showSide?0:-50},toggleSide:function(){this.showSide=!this.showSide,this.checkStyle()},clearTouchInfo:function(){this.side.touch=!1,this.side.moving=!1,this.side.lastTouch=null,this.side.date=null},touchstart:function(t){this.isWritting||(this.side.touch=!0,this.side.lastTouch=t.touches[0],this.side.date=Date.now())},touchmove:function(t){if(!this.isWritting&&this.side.touch){var e=t.touches[0],i=e.pageX-this.side.lastTouch.pageX;if(!this.side.moving){var s=e.pageY-this.side.lastTouch.pageY;if(Math.abs(s)>Math.abs(i)||this.showSide&&i>0||!this.showSide&&i<0)return void this.clearTouchInfo()}t.preventDefault(),this.side.moving=!0,this.side.lastTouch=e,this.mainX=Math.max(0,Math.min(295,this.mainX+i)),this.sideX=this.mainX/6-50}},touchend:function(){if(this.side.touch&&this.side.moving){var t=Date.now()-this.side.date<200;this.clearTouchInfo(),t?this.toggleSide():this.showSide&&this.mainX<200?this.toggleSide():!this.showSide&&this.mainX>100?this.toggleSide():this.checkStyle()}},isWhiteBracelet:function(t){switch(t){case"E6762E90D410":case"FC69D52DD033":case"C52A53A61A82":return!0;default:return!1}},setConnectedMac:function(t){this.connected!==t&&(this.connected=t)},checkBraceletState:function(){var t=this.$bracelet.getStateInfo();switch(t.state){case ii.CONNECTED:this.setConnectedMac(t.connected),this.connecting=null;break;case ii.CONNECTING:this.connecting=t.connecting;break;case ii.WAITING:this.setConnectedMac(null),this.connecting=null;break;case ii.SYNCING:this.connecting=t.connecting||"syncing";break;default:break}}}),watch:{figures:function(){var t=this;this.$nextTick(function(){t.updatePerson()})}},beforeRouteUpdate:function(t,e,i){var s=t.params.index||0;s!==this.index&&(this.index=Math.min(s,this.figures.length-1),this.refetch(!0),this.$personSwiper&&this.$personSwiper.realIndex!==s&&this.$personSwiper.slideTo(s,0,!1)),i()},created:function(){var t=this;this.setRuntimeMode("normal"),this.index=this.$route.params.index||0,this.$eventBus.$on(_e,this.checkBluetooth),this.$eventBus.$on(dt,this.checkBraceletState),this.checkBraceletState(),this.checkBracelet(!0),this.clockTimer=setInterval(function(){t.clock()},6e4)},mounted:function(){var t=this;this.$nextTick(function(){t.updatePerson()})},beforeDestroy:function(){this.$eventBus.$off(_e,this.checkBluetooth),this.$eventBus.$off(dt,this.checkBraceletState),clearTimeout(this.timer),clearInterval(this.clockTimer),this.$personSwiper&&this.$personSwiper.destroy(),this.$recordsHttpPost&&this.$recordsHttpPost.cancel(),this.$stepHttpPost&&this.$stepHttpPost.cancel()}},En=Sn,In=(i("69fe"),Object(c["a"])(En,Ha,Ra,!1,null,null,null));In.options.__file="Home.vue";var An=In.exports,Tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"p-sign-in-history",attrs:{title:t.$t("history.title")}},[i("div",{staticClass:"l-navigation__placeholder p-sign-in-history__target"},[t._v(t._s(t.name))]),i("div",{ref:"wrapper",staticClass:"l-navigation__content u-overflow-hidden"},[i("div",[i("ul",{ref:"listWrapper"},t._l(t.records,function(e,s){return i("li",{key:s},[t._o(i("div",{staticClass:"p-sign-in-history__time"},[t._v(t._s(e.label))]),0,s),i("div",{staticClass:"p-sign-in-history__timeline"},t._l(e.records,function(s,a){return i("div",{key:a,staticClass:"c-timeline__point"},[i("div",{staticClass:"c-timeline__header t-adapt-point"}),i("div",{staticClass:"c-timeline__tail"}),i("div",{staticClass:"c-timeline__content"},[i("div",{staticClass:"c-timeline__time"},[t._v(t._s(s.time))]),i("div",{staticClass:"c-timeline__info"},[i("div",{staticClass:"c-timeline__row"},[t._v(t._s(s.label))]),!e.isToday||3!==s.type&&5!==s.type?t._e():i("div",{staticClass:"c-timeline__row"},[i("div",{staticClass:"p-sign-in-history__bus t-adapt-color",on:{click:function(e){t.toBusMap(s)}}},[t._v(t._s(t.$t("record.bus")))])])])])])}))])})),t.canPullUp?i("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.pullUpTip))]):t._e()]),i("loading",{attrs:{fetching:t.loading,isError:t.isError,retry:t.fetch}}),t.empty?i("div",{staticClass:"p-sign-in-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1)])},Dn=[];i("3b2b");function On(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var xn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.fetching||t.isError?s("div",{staticClass:"c-loading"},[t.fetching?s("div",{staticClass:"c-loading__tip"},[s("img",{staticClass:"c-loading__icon",attrs:{src:i("88a7")}}),t._v(t._s(t.$t("common.loading")))]):t.isError?s("div",{staticClass:"c-loading__button",on:{click:t.retry}},[t._v(t._s(t.$t("common.retry")))]):t._e()]):t._e()},Mn=[],Nn={name:"loading",props:{fetching:{type:Boolean,default:!1,required:!0},isError:{type:Boolean,default:!1,required:!0},retry:{type:Function,required:!0}}},Un=Nn,Ln=(i("bdca"),Object(c["a"])(Un,xn,Mn,!1,null,"0dbfcc10",null));Ln.options.__file="Loading.vue";var jn=Ln.exports,Hn={name:"sign-in-history",components:{loading:jn},data:function(){return{records:[],httpPost:null,page:1,pageSize:20,isPullUpLoad:!1,error:!1,hasMore:!0,hasFetched:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff","getFigure"]),{url:function(){return this.isStaff?"staff/signinrecord":"parent/child/signinrecord"},id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)},name:function(){return this.figure?this.figure.name:""},fetching:function(){return this.httpPost&&this.httpPost.isRequesting()},loading:function(){return this.fetching&&!this.hasFetched},isError:function(){return this.error&&!this.hasFetched},has:function(){return this.records.length>0},empty:function(){return this.hasFetched&&!this.has},canPullUp:function(){return this.hasFetched&&this.has},pullUpTip:function(){return this.isPullUpLoad?this.$t("pullUp.loading"):this.hasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")}}),methods:{initScroll:function(){var t=this;this.$refs.wrapper&&this.has&&!this.$scroll&&(this.$refs.listWrapper.style.minHeight="".concat(On(this.$refs.wrapper).height+1,"px"),this.$scroll=new as["a"](this.$refs.wrapper,{scrollY:!0,click:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$scroll.on("pullingUp",function(){t.hasMore&&!t.fetching?(t.isPullUpLoad=!0,t.fetch()):t.$scroll.finishPullUp()}))},pullUpFnished:function(){this.isPullUpLoad&&(this.isPullUpLoad=!1,this.$scroll.finishPullUp())},forceUpdate:function(){var t=this;this.$nextTick(function(){t.$scroll?(t.pullUpFnished(),t.$scroll.refresh()):t.initScroll()})},isToday:function(t){return this.isSameDay(new Date,t)},checkDayStr:function(t){if(this.isToday(t))return this.$t("common.today");var e=new Date;return e.setDate(e.getDate()-1),this.isSameDay(e,t)?this.$t("common.yesterday"):this.$t("format.year-month-day",{month:t.getMonth()+1,day:t.getDate(),year:t.getFullYear()})},isSameDay:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},add:function(t){if(this.hasFetched=!0,t.length<this.pageSize&&(this.hasMore=!1),0!==t.length){for(var e,i,s,a=this.records[this.records.length-1],n=0,o=t.length;n<o;n++){switch(e=t[n],i=new Date(e.checkTime),a&&this.isSameDay(a.date,i)||(a={label:this.checkDayStr(i),date:i,records:[],isToday:this.isToday(i)},this.records.push(a)),e.type){case 1:case 2:s=this.$t("record.".concat(e.type),{gate:this.$lang.isChinese()?e.checkinPointName:e.checkinPointNameEn});break;case 3:case 4:case 5:case 6:s=this.$t("record.".concat(e.type),{routeNo:e.routeNo});break;case 12:case 13:case 14:s=this.$t("record.".concat(e.type),{name:"".concat(e.staffFirstName," ").concat(e.staffLastName)});break;default:s=this.$t("record.".concat(e.type));break}a.records.push({label:s,type:e.type,time:e.checkTimeStr.split(" ")[1],busId:e.busId,detailId:e.checkDetailId})}this.page+=1}},fetch:function(){this.httpPost.request(this.isStaff?{token:this.user.token,page:this.page,pageSize:this.pageSize}:{token:this.user.token,idStudent:this.id,page:this.page,pageSize:this.pageSize})},toBusMap:function(t){this.$router.push({name:"bus-map",params:{busId:t.busId,id:t.detailId}})}},watch:{fetching:function(t,e){var i=this;e&&!t&&setTimeout(function(){i.forceUpdate()},20)}},created:function(){var t=this;this.httpPost=this.$http.createPost(this.url,{success:function(e){t.error=!1,t.add(e.data)},fail:function(){t.error=!0}}),this.fetch()},mounted:function(){this.initScroll()},beforeDestroy:function(){this.httpPost&&this.httpPost.cancel(),this.$scroll&&this.$scroll.destroy()}},Rn=Hn,Fn=(i("b1fa"),Object(c["a"])(Rn,Tn,Dn,!1,null,null,null));Fn.options.__file="SignInHistory.vue";var Bn=Fn.exports,Vn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"p-motion",attrs:{title:t.$t("motion.title")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("div",{staticClass:"p-motion__header"},[i("div",{staticClass:"p-motion-today u-clearfix"},[i("div",{staticClass:"p-motion-today__tip"},[t._v("\n          "+t._s(t.$t("common.today"))+"\n          "),i("div",{staticClass:"p-motion-today__time"},[t._v(t._s(t.today))])]),i("div",{staticClass:"p-motion-today__value"},[t._v(t._s(t.todaySteps)),i("span",{staticClass:"p-motion-today__unit"},[t._v(t._s(t.$t("motion.unit")))])])])]),i("div",{staticClass:"p-motion__tab"},[i("div",{staticClass:"o-tab",class:{"is-active":1===t.type},on:{click:function(e){t.changeType(1)}}},[t._v(t._s(t.$t("motion.weekly")))]),i("div",{staticClass:"o-tab",class:{"is-active":2===t.type},on:{click:function(e){t.changeType(2)}}},[t._v(t._s(t.$t("motion.monthly")))])]),i("div",{staticClass:"p-motion__chart"},[i("schart",{attrs:{mode:1,steps:t.steps}})],1)])])},qn=[],Wn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{ref:"el",staticClass:"c-step-chart",on:{click:t.click}})},Gn=[];i("6b54"),i("6c7b");function Yn(t){this.init(t)}Yn.prototype={margin:20,width:0,height:0,isDataLoad:!1,data:null,points:[],fontFamily:"sans-serif,arial",day:null,yAxis:16e3,yAxisIc:4e3,quadRadius:30,headText:"Steps",chartFontSize:30,chartMeanLine:0,rectHead:{x:0,y:0,width:0,height:0},rectChart:{x:0,y:0,width:0,height:0},rectChartCenter:{x:0,y:0,width:0,height:0},value:1,fill:{gradient:[["#21b881",.1],["#0e8fa2",.9]],gradientAngle:-45*Math.PI/180},animation:{duration:400,easing:"wcChart"},animationStartValue:0,animationPoint:null,constructor:Yn,el:null,canvas:null,ctx:null,fillPattern:null,lastFrameValue:0,timer:null,mode:0,init:function(t){Object.assign(this,t),clearInterval(this.timer),this.initWidget(),this.initRect(),this.initFill(),t.data?this.setData(t.data):this.draw()},setData:function(t){this.isDataLoad=!0,clearInterval(this.timer),this.data=t,this.initData(),this.draw()},initWidget:function(){var t=this.el,e=this.canvas=this.canvas||this.el;e.width=this.width=0===this.width?t.offsetWidth:this.width,e.height=this.height=0===this.height?t.offsetHeight:this.height,this.ctx=e.getContext("2d")},initRect:function(){var t=this.margin,e=88;this.rectHead={x:t,y:0,width:this.width-2*t,height:e},this.rectChart={x:t,y:e,width:this.width-2*t,height:this.height-e},this.rectChartCenter={x:this.rectChart.x,y:this.rectChart.y+2.5*this.chartFontSize,width:this.rectChart.width-.8*this.chartFontSize,height:this.rectChart.height-5*this.chartFontSize}},initPointsBySteps:function(t){var e,i=Math.max.apply(Math,t),s=this.rectChartCenter.width/(t.length-1);e=null===this.day?new Date:new Date(this.day.getTime());var a=i<=this.yAxis?this.yAxis:Math.ceil((i-this.yAxis)/this.yAxisIc)*this.yAxisIc+this.yAxis;e.setDate(e.getDate()-t.length+1),this.chartMeanLine=this.rectChartCenter.y+this.rectChartCenter.height-1e4*this.rectChartCenter.height/a,this.points=[];for(var n=0,o=t.length;n<o;n++)this.points[n]={x:this.rectChartCenter.x+s*n,y:this.rectChartCenter.y+this.rectChartCenter.height-t[n]*this.rectChartCenter.height/a,value:t[n],text:0===n?e.getMonth()+1+"/"+e.getDate():e.getDate(),radius:n===o-1?8:6,textAlign:0===n?"left":"center",rect:{x:this.rectChartCenter.x+s*(n-.5),y:this.rectChart.y,width:s,height:this.rectChart.height}},e.setDate(e.getDate()+1);this.animationPoint=t.length-1},initPointsByObj:function(t){var e=Math.max.apply(Math,t.map(function(t){return t.steps})),i=this.rectChartCenter.width/(t.length-1),s=e<=this.yAxis?this.yAxis:Math.ceil((e-this.yAxis)/this.yAxisIc)*this.yAxisIc+this.yAxis;this.chartMeanLine=this.rectChartCenter.y+this.rectChartCenter.height-1e4*this.rectChartCenter.height/s;var a,n,o,r=t.length,c=r>7,l=6,h=(l-r%l)%l;this.points=[];for(var u=0;u<r;u++)a=new Date(t[r-1-u].time),n=0===u?a.getMonth()+1+"/"+a.getDate():u!==r-1&&c&&h!==l-1?"":a.getDate(),o=t[r-1-u].steps,h=(h+1)%l,this.points.push({x:this.rectChartCenter.x+i*u,y:this.rectChartCenter.y+this.rectChartCenter.height-o*this.rectChartCenter.height/s,value:o,text:n,radius:u===r-1?8:6,textAlign:0===u?"left":"center",rect:{x:this.rectChartCenter.x+i*(u-.5),y:this.rectChart.y,width:i,height:this.rectChart.height}});this.animationPoint=t.length-1},initData:function(){this.data&&!1!==this.isDataLoad?0===this.mode?this.initPointsBySteps(this.data):1===this.mode?this.initPointsByObj(this.data):this.points=[]:this.initPointsBySteps([])},initFill:function(){var t=this.fill,e=this.ctx,i=this.width,s=this.height;if(!t)throw Error("The fill is not specified!");if(t.color&&(this.fillPattern=t.color),t.gradient){var a=t.gradient;if(1===a.length)this.fillPattern=a[0];else if(a.length>1){for(var n=t.gradientAngle||0,o=t.gradientDirection||[i/2*(1-Math.cos(n)),s/2*(1+Math.sin(n)),i/2*(1+Math.cos(n)),s/2*(1-Math.sin(n))],r=e.createLinearGradient.apply(e,o),c=0;c<a.length;c++){var l=a[c],h=c/(a.length-1);Array.isArray(l)&&(h=l[1],l=l[0]),r.addColorStop(h,l)}this.fillPattern=r}}},draw:function(){this.animation&&null!==this.animationPoint?this.drawAnimated():this.drawFrame(this.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.fillStyle="white",this.ctx.strokeStyle="white",this.drawBack(),this.drawHead(),this.drawChart(),this.drawStep(t)},drawBack:function(){var t=this.ctx;t.save(),t.fillStyle=this.fillPattern,t.globalAlpha=1,this.roundRect(0,0,this.width,this.height,this.quadRadius,!0,!1),t.restore()},drawHead:function(){var t=30,e=this.ctx;e.save(),e.globalAlpha=.8,e.font=t+"px "+this.fontFamily,e.fillStyle="white",e.fillText(this.headText,this.rectHead.x,this.rectHead.y+t+this.margin+6,this.rectHead.width),e.beginPath(),e.globalAlpha=.8,e.moveTo(this.rectHead.x,this.rectHead.y+this.rectHead.height),e.lineTo(this.rectHead.x+this.rectHead.width,this.rectHead.y+this.rectHead.height),e.stroke(),e.restore()},drawChart:function(){if(!1!==this.isDataLoad&&0!==this.points.length){var t=this.ctx;t.save(),t.fillStyle="white",t.globalAlpha=.6,t.font=this.chartFontSize-8+"px "+this.fontFamily,t.fillText("1W",this.rectChartCenter.x+this.rectChartCenter.width+4,this.chartMeanLine+this.chartFontSize/2.8),t.beginPath(),t.lineWidth=1,this.dashedLineTo(this.rectChartCenter.x,this.chartMeanLine,this.rectChartCenter.x+this.rectChartCenter.width,this.chartMeanLine,[7,4]),t.stroke(),t.font=this.chartFontSize+"px "+this.fontFamily;for(var e=0;e<this.points.length;e++)this.points[e].text&&(t.textAlign=this.points[e].textAlign,t.globalAlpha=e===this.animationPoint?1:.5,t.fillText(this.points[e].text,this.points[e].x,this.rectChartCenter.y+this.rectChartCenter.height+1.5*this.chartFontSize));for(var i=0;i<this.points.length;i++)t.globalAlpha=1,t.beginPath(),t.arc(this.points[i].x,this.points[i].y,this.points[i].radius,0,2*Math.PI),t.fill(),0!==i&&(t.save(),t.beginPath(),t.lineWidth=3,t.moveTo(this.points[i-1].x,this.points[i-1].y),0!==this.points[i-1].value?t.lineTo(this.points[i].x,this.points[i].y):(t.globalAlpha=.5,this.dashedLineTo(this.points[i-1].x,this.points[i-1].y,this.points[i].x,this.points[i].y,7)),t.stroke(),t.restore());t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var s=1;s<this.points.length;s++)t.lineTo(this.points[s].x,this.points[s].y);t.lineTo(this.rectChartCenter.x+this.rectChartCenter.width,this.rectChartCenter.y+this.rectChartCenter.height),t.lineTo(this.rectChartCenter.x,this.rectChartCenter.y+this.rectChartCenter.height),t.lineTo(this.points[0].x,this.points[0].y),t.fillStyle="white",t.globalAlpha=.1,t.fill(),t.restore()}},drawStep:function(t){if(!(null===this.animationPoint||this.animationPoint<0||this.animationPoint>=this.points.length||!1===this.isDataLoad)){var e=this.ctx,i=this.points[this.animationPoint],s=this.rectChartCenter.y-1.3*this.chartFontSize,a=i.y,n=(1-t)*Math.abs(a-s)+s,o=.4,r=.8,c=t*(r-o)+o;e.save(),e.font="bold "+this.chartFontSize+"px "+this.fontFamily,e.textAlign=this.animationPoint===this.points.length-1?"right":i.textAlign,e.fillStyle="white",e.globalAlpha=c,e.fillText(i.value.toString(),i.x,n),e.restore()}},easing:function(t,e,i,s,a){return s*Math.sqrt(1-(e=e/a-1)*e)+i},drawAnimated:function(){var t=this;this.timer&&clearInterval(this.timer);var e=Date.now();this.timer=setInterval(function(){var i=(Date.now()-e)/t.animation.duration;t.drawFrame(t.easing(i,t.animation.duration*i,0,1,t.animation.duration)),i>=1&&clearInterval(t.timer)},0)},clickFuc:function(t){var e={x:t.pageX*this.scaleX,y:t.pageY*this.scaleY};if(this.isPointInRect(this.rectChart,e)&&this.isDataLoad)for(var i=this.points,s=0;s<i.length;s++)if(this.isPointInRect(i[s].rect,e)){this.animationPoint=s,this&&this.draw();break}},isPointInRect:function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},roundRect:function(t,e,i,s,a,n,o){o="undefined"===typeof o||o,o="undefined"===typeof o||o,a="undefined"===typeof a?5:a,this.ctx.beginPath(),this.ctx.moveTo(t+a,e),this.ctx.lineTo(t+i-a,e),this.ctx.quadraticCurveTo(t+i,e,t+i,e+a),this.ctx.lineTo(t+i,e+s-a),this.ctx.quadraticCurveTo(t+i,e+s,t+i-a,e+s),this.ctx.lineTo(t+a,e+s),this.ctx.quadraticCurveTo(t,e+s,t,e+s-a),this.ctx.lineTo(t,e+a),this.ctx.quadraticCurveTo(t,e,t+a,e),this.ctx.closePath(),o&&this.ctx.stroke(),n&&this.ctx.fill()},dashedLineTo:function(t,e,i,s,a){var n=0,o=0;"undefined"===typeof a?(o=5,n=5):a.constructor===Array?(o=a[0],n=a[1]):o=n=a;for(var r=i-t,c=s-e,l=Math.floor(Math.sqrt(r*r+c*c)),h=o+n,u=h<=0?l:Math.floor(l/h),d=c/l*o,f=r/l*o,p=r/l*h,m=c/l*h,v=t,_=e,g=0;g<u;g++)this.ctx.moveTo(v,_),this.ctx.lineTo(v+f,_+d),v+=p,_+=m}};var zn={name:"step-chart",props:["steps","mode"],data:function(){return{wcChart:null}},methods:{click:function(t){this.wcChart&&this.wcChart.clickFuc(t)},refresh:function(){this.wcChart.setData(this.steps)}},watch:{steps:function(){this.refresh()}},mounted:function(){var t=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,i=750,s=375;this.wcChart=new Yn({width:i,height:s,scaleX:i/t,scaleY:s/e,el:this.$refs.el,mode:this.mode||0})},beforeDestroy:function(){this.wcChart&&clearInterval(this.wcChart.timer)}},Zn=zn,Jn=(i("411c"),Object(c["a"])(Zn,Wn,Gn,!1,null,null,null));Jn.options.__file="StepChart.vue";var Qn=Jn.exports,Kn={name:"motion",components:{schart:Qn},data:function(){return{date:new Date,todaySteps:0,type:1,steps:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{today:function(){return this.$t("format.date",{week:this.$d(this.date,"week"),month:this.date.getMonth()+1,day:this.date.getDate(),year:this.date.getFullYear()})},stepUrl:function(){return this.isStaff?"staff/sport":"parent/child/sport"},url:function(){return this.isStaff?"staff/stepsstat":"parent/child/stepstate"},id:function(){return Number(this.$route.params.id)},postData:function(){return this.isStaff?{token:this.user.token,type:this.type}:{token:this.user.token,idStudent:this.id,type:this.type}}}),methods:{back:function(){this.$router.back()},fetchTodaySteps:function(){var t=this;this.$stepHttpPost||(this.$stepHttpPost=this.$http.createPost(this.stepUrl,{success:function(e){return t.todaySteps=e.data.steps||0}})),this.$stepHttpPost.request(this.isStaff?{token:this.user.token}:{token:this.user.token,idStudent:this.id})},fetch:function(){var t=this;this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{success:function(e){return t.steps=e.data.map(function(t){return{time:t.sportDate,steps:t.steps}})}})),this.$httpPost.request(this.isStaff?{token:this.user.token,type:this.type}:{token:this.user.token,idStudent:this.id,type:this.type})},changeType:function(t){this.type!==t&&(this.type=t,this.steps=null,this.fetch())}},beforeRouteUpdate:function(t,e,i){this.date=new Date,this.todaySteps=0,this.steps=null,this.fetchTodaySteps(),this.fetch(),i()},created:function(){this.fetchTodaySteps(),this.fetch()},beforeDestroy:function(){this.$stepHttpPost&&this.$stepHttpPost.cancel(),this.$httpPost&&this.$httpPost.cancel()}},Xn=Kn,to=(i("7874"),Object(c["a"])(Xn,Vn,qn,!1,null,null,null));to.options.__file="Motion.vue";var eo=to.exports,io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.account")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",[i("li",{staticClass:"c-account-info"},[i("div",{staticClass:"c-account-info__name u-more"},[t._v(t._s(t.user.name))]),i("div",{staticClass:"c-account-info__avatar"},[i("div",{class:[t.avatarClass,{"has-avatar":!!t.headUrl}],on:{click:t.upload}},[t.headUrl?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()])])]),t.isStaff?i("li",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.id")))]),i("div",{staticClass:"c-info-item__value"},[t._v(t._s(t.user.legacyId))])]):t._e(),t.isParent?i("li",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.relationship")))]),i("div",{staticClass:"c-info-item__value"},[t._v(t._s(t.relationship))])]):t._e(),i("router-link",{staticClass:"c-info-item",attrs:{tag:"li",to:{name:"modify-mobile-confirm"}}},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.phone")))]),i("div",{staticClass:"c-info-item__value u-more"},[t._v(t._s(t.phoneNumber||t.$t("common.none")))])]),i("router-link",{staticClass:"c-info-item",attrs:{tag:"li",to:{name:"pre-modify-email"}}},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.email")))]),i("div",{staticClass:"c-info-item__value u-more"},[t._v(t._s(t.user.email||t.$t("common.none")))])])],1),i("input",{ref:"fileUpload",staticClass:"u-display-none",attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})])])},so=[],ao={name:"account-info",computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isParent","isStaff","phoneNumber"]),{avatarClass:function(){return this.user.gender===st.MALE?"c-avatar--male":"c-avatar--female"},url:function(){return this.isStaff?"staff/pic/modify":"parent/pic/modify"},relationship:function(){switch(!0){case this.isStaff:return"";case 1===this.user.relationship:return this.$t("relationship.father");case 2===this.user.relationship:return this.$t("relationship.mother");default:return""}},headUrl:function(){return this.user.headUrlAttachmentId?this.$transformHeadUrl(this.user.headUrlAttachmentId,this.user.token):null}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateUserInfo"]),{upload:function(){this.user&&this.url&&this.$refs.fileUpload&&!this.cancelSource&&this.$refs.fileUpload.click()},clear:function(){this.cancelSource=null,this.$refs.fileUpload.value=null},handleFile:function(t){var e=this,i=t.target||t.srcElement,s=i.files[0];if(s){this.$uploadHttpPost||(this.$uploadHttpPost=this.$http.createPost("common/pic/upload",{opts:{headers:{"Content-Type":"multipart/form-data"},origin:!0,lock:!0},success:function(t){e.changeAvatar(t.data.attachmentId)}}));var a=new FormData;a.append("file",s),this.$uploadHttpPost.request(a)}},changeAvatar:function(t){var e=this;this.$log("account head attachmentId: ".concat(t)),this.$avatarHttpPost||(this.$avatarHttpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(t,i){e.updateUserInfo({headUrlAttachmentId:i.attachmentId})}})),this.$avatarHttpPost.request({token:this.user.token,attachmentId:t})}}),beforeDestroy:function(){this.$uploadHttpPost&&this.$uploadHttpPost.cancel(),this.$avatarHttpPost&&this.$avatarHttpPost.cancel()}},no=ao,oo=Object(c["a"])(no,io,so,!1,null,null,null);oo.options.__file="AccountInfo.vue";var ro=oo.exports,co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("safe-area-layout",{staticClass:"l-operation p-bluetooth"},[i("template",{slot:"topbar"},[i("div",{staticClass:"p-bluetooth__back_bg"},[i("div",{staticClass:"p-bluetooth__back_wrapper",on:{click:t.back}},[i("div",{staticClass:"p-bluetooth__back"})])]),i("div",{staticClass:"l-operation__title"},[t._v(t._s(t.$t("bluetooth.title")))])]),i("div",{staticClass:"l-operation__header"},[t._v("\n    "+t._s(t.$t("bluetooth.tip"))+"\n    "),t.isIos?i("div",{staticClass:"ios-bluetooth-tip"},[i("div",[t._v(t._s(t.$t("bluetooth.iosUp")))]),i("div",[t._v(t._s(t.$t("bluetooth.iosDown"))),i("span",{staticClass:"ios-bluetooth-tip__button",class:{"is-active":t.isShow},on:{click:t.toggle}},[t._v(t._s(t.$t("bluetooth.how")))])])]):t._e()]),i("div",{staticClass:"l-operation__content u-align-c",class:{"p-bluetooth__ios":t.isIos}},[t.isAndroid?i("div",{staticClass:"p-bluetooth__img"}):t._e(),t.showPic?i("div",[i("div",[i("div",{staticClass:"p-bluetooth__img--tip",class:{"is-cn":t.isCN}})]),i("div",[i("div",{staticClass:"p-bluetooth__img"})])]):t._e()]),t.isAndroid?i("div",{staticClass:"l-operation__footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"l-operation__button o-border-button o-button--cancel",on:{click:t.back}},[t._v(t._s(t.$t("common.cancel")))]),i("div",{staticClass:"l-operation__button o-button t-adapt-button",on:{click:t.open}},[t._v(t._s(t.$t("common.open")))])]):t._e()],2)},lo=[],ho={name:"wifi",data:function(){return{os:null,isShow:!1}},computed:{isAndroid:function(){return"android"===this.os},isIos:function(){return"ios"===this.os},showPic:function(){return this.isIos&&this.isShow},isCN:function(){return"en"!==this.$i18n.locale}},methods:{toggle:function(){this.isShow=!this.isShow},back:function(){this.$router.back()},open:function(){this.isAndroid&&this.$native.openSysSetting()}},created:function(){var t=this;this.$native.getNativeOS().then(function(e){t.os=e})}},uo=ho,fo=(i("3b56"),Object(c["a"])(uo,co,lo,!1,null,null,null));fo.options.__file="Bluetooth.vue";var po=fo.exports,mo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.setting")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",[i("li",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("setting.notice")))]),i("div",{staticClass:"c-info-item__switch o-switch t-adpat-switch",class:{"is-on":t.notice},on:{click:t.toggleNotice}})]),i("router-link",{staticClass:"c-info-item",attrs:{tag:"li",to:{name:"modify-language"}}},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("setting.language")))]),i("div",{staticClass:"c-info-item__value u-more"},[t._v(t._s(t.langVal))])])],1)])])},vo=[],_o={name:"setting",data:function(){return{voice:!1,lang:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{langVal:function(){return this.lang?this.lang.text:""},notice:function(){return 1===this.user.isReceiveNotify},noticeUrl:function(){return this.isStaff?"staff/notify/receive":"parent/notify/receive"}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateUserInfo"]),{toggleVoice:function(){this.voice=!this.voice},toggleNotice:function(){var t=this;this.$noticeHttpPost||(this.$noticeHttpPost=this.$http.createPost(this.noticeUrl,{opts:{lock:!0},success:function(e,i){t.updateUserInfo({isReceiveNotify:i.isReceiveNotify})}})),this.$noticeHttpPost.request({token:this.user.token,isReceiveNotify:this.notice?0:1})}}),created:function(){var t=this.$lang.key;this.lang=this.$langs.find(function(e){return e.key===t})},beforeDestroy:function(){this.$noticeHttpPost&&this.$noticeHttpPost.cancel()}},go=_o,bo=Object(c["a"])(go,mo,vo,!1,null,null,null);bo.options.__file="Setting.vue";var Co=bo.exports,wo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("setting.language")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",t._l(t.$langs,function(e,s){return i("li",{key:e.key,staticClass:"c-info-item",on:{click:function(e){t.change(s)}}},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(e.text))]),i("div",{staticClass:"c-info-item__radio",class:{"o-radio":t.index===s}})])}))])])},yo=[],$o={name:"",data:function(){return{index:0,defaultIndex:0}},methods:{change:function(t){this.index=t,this.save()},save:function(){this.index!==this.defaultIndex&&Je(this.$langs[this.index].key),this.$router.back()}},created:function(){var t=this.$lang.key;this.index=this.$langs.findIndex(function(e){return e.key===t}),this.defaultIndex=this.index}},ko=$o,Po=Object(c["a"])(ko,wo,yo,!1,null,null,null);Po.options.__file="ModifyLanguage.vue";var So=Po.exports,Eo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{class:t.modeClass},[i("div",{staticClass:"l-navigation__content l-form"},[i("div",{staticClass:"u-align-c"},[i("div",{staticClass:"p-about__logo"})]),i("div",{staticClass:"p-about__app"},[t._v(t._s(t.$t("about.app")))]),i("div",{staticClass:"p-about__version"},[t._v(t._s(t.version))]),i("div",{staticClass:"p-about__content",domProps:{innerHTML:t._s(t.content)}}),i("div",{staticClass:"p-about__tip"},[t._v(t._s(t.$t("about.tip")))]),i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.feedback,expression:"feedback",modifiers:{trim:!0}}],staticClass:"p-about__feedback",attrs:{placeholder:t.$t("about.feedback")},domProps:{value:t.feedback},on:{input:function(e){e.target.composing||(t.feedback=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active",class:{"is-active":t.feedback},on:{click:t.submit}},[t._v(t._s(t.$t("common.submit")))])]),t.isConfirm?i("div",{staticClass:"c-abount-mask",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{staticClass:"c-abount-confirm"},[i("div",{staticClass:"c-abount-confirm__title_wrapper"},[i("div",{staticClass:"c-abount-confirm__title"},[i("i",{class:{"c-abount-confirm__success":!t.msg,"c-abount-confirm__fail":t.msg}}),t._v(t._s(t.title))])]),t.msg?i("div",{staticClass:"c-abount-confirm__content"},[t._v(t._s(t.msg))]):t._e(),i("div",{staticClass:"c-abount-confirm__wrapper"},[i("div",{staticClass:"c-abount-confirm__button t-adapt-text",on:{click:function(e){t.isConfirm=!1}}},[t._v(t._s(t.$t("common.confirm")))])])])]):t._e()])},Io=[],Ao={name:"about",data:function(){return{version:"",content:"",feedback:"",isConfirm:!1,title:"",msg:""}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{modeClass:function(){return this.isStaff?"t-staff":"t-parent"},url:function(){return this.isStaff?"staff/suggestion":"parent/suggestion"}}),methods:{getVersion:function(){var t=this;this.$native.getNativeAPPVer().then(function(e){t.version="".concat(t.$t("about.version")," ").concat(e)})},submit:function(){var t=this;this.feedback&&(this.$submitHttpPost||(this.$submitHttpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.feedback="",t.tip(!0)},fail:function(){return t.tip(!1),!0}})),this.$submitHttpPost.request({token:this.user.token,content:this.feedback}))},tip:function(t){this.isConfirm=!0,this.title=t?this.$t("about.successTitle"):this.$t("about.failTitle"),this.msg=t?"":this.$t("about.fail")}},created:function(){var t=this;this.$eventBus.$on(pe,this.getVersion),this.getVersion(),this.$httpPost=this.$http.createPost("sundry/school/about/fetch",{opts:{retry:!0},success:function(e){t.content=t.$lang.isChinese()?e.data.contentHK:e.data.content}}),this.$httpPost.request({token:this.user.token})},beforeDestroy:function(){this.$eventBus.$off(pe,this.getVersion),this.$httpPost.cancel(),this.$submitHttpPost&&this.$submitHttpPost.cancel()}},To=Ao,Do=(i("6d6d"),Object(c["a"])(To,Eo,Io,!1,null,null,null));Do.options.__file="About.vue";var Oo=Do.exports,xo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"p-faq",attrs:{title:t.title}},[i("div",{staticStyle:{height:"15px"}}),i("div",{ref:"wrapper",staticClass:"l-navigation__content u-overflow-hidden"},[i("div",[i("ul",{ref:"listWrapper"},t._l(t.faqs,function(e,s){return i("li",{key:s,staticClass:"p-faq__item",on:{click:function(i){t.choose(e)}}},[i("div",{staticClass:"p-faq__label u-more"},[t._v(t._s((t.isChinese?e.questionHK:e.question)||" "))])])})),t.canPullUp?i("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.pullUpTip))]):t._e()]),i("loading",{attrs:{fetching:t.loading,isError:t.isError,retry:t.fetch}}),t.empty?i("div",{staticClass:"p-sign-in-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1),i("router-view",{staticClass:"p-faq__question",attrs:{faq:t.faq}})],1)},Mo=[],No={name:"faq",components:{loading:jn},data:function(){return{faqs:[],httpPost:null,page:1,pageSize:20,isPullUpLoad:!1,error:!1,hasMore:!0,hasFetched:!1,faq:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),{isChinese:function(){return this.$lang.isChinese()},title:function(){return"faq"===this.$route.name?this.$t("home.menu.faq"):""},fetching:function(){return this.httpPost&&this.httpPost.isRequesting()},loading:function(){return this.fetching&&!this.hasFetched},isError:function(){return this.error&&!this.hasFetched},has:function(){return this.faqs.length>0},empty:function(){return this.hasFetched&&!this.has},canPullUp:function(){return this.hasFetched&&this.has},pullUpTip:function(){return this.isPullUpLoad?this.$t("pullUp.loading"):this.hasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")}}),methods:{initScroll:function(){var t=this;this.$refs.wrapper&&this.has&&!this.$scroll&&(this.$refs.listWrapper.style.minHeight="".concat(On(this.$refs.wrapper).height+1,"px"),this.$scroll=new as["a"](this.$refs.wrapper,{scrollY:!0,click:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$scroll.on("pullingUp",function(){t.hasMore&&!t.fetching?(t.isPullUpLoad=!0,t.fetch()):t.$scroll.finishPullUp()}))},pullUpFnished:function(){this.isPullUpLoad&&(this.isPullUpLoad=!1,this.$scroll.finishPullUp())},forceUpdate:function(){var t=this;this.$nextTick(function(){t.$scroll?(t.pullUpFnished(),t.$scroll.refresh()):t.initScroll()})},add:function(t){this.hasFetched=!0,t.length<this.pageSize&&(this.hasMore=!1),0!==t.length&&(this.faqs=this.faqs.concat(t),this.page+=1)},fetch:function(){this.httpPost.request({token:this.user.token,page:this.page,pageSize:this.pageSize})},choose:function(t){this.faq=t,this.$router.push({name:"question"})}},watch:{fetching:function(t,e){var i=this;e&&!t&&setTimeout(function(){i.forceUpdate()},20)}},created:function(){var t=this;this.httpPost=this.$http.createPost("sundry/faq/loadAll",{success:function(e){t.error=!1,t.add(e.data)},fail:function(){t.error=!0}}),this.fetch()},mounted:function(){this.initScroll()},beforeDestroy:function(){this.httpPost&&this.httpPost.cancel(),this.$scroll&&this.$scroll.destroy()}},Uo=No,Lo=(i("5374"),Object(c["a"])(Uo,xo,Mo,!1,null,null,null));Lo.options.__file="FAQ.vue";var jo=Lo.exports,Ho=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-question"},[i("div",{staticClass:"p-question__title"},[t._v(t._s((t.isChinese?t.faq.questionHK:t.faq.question)||" "))]),i("div",{staticClass:"p-question__content",domProps:{innerHTML:t._s(t.isChinese?t.faq.contentHK:t.faq.content)}})])},Ro=[],Fo={name:"question",props:["faq"],computed:{isChinese:function(){return this.$lang.isChinese()}},created:function(){this.faq||this.$router.replace({name:"faq"})}},Bo=Fo,Vo=(i("5a05"),Object(c["a"])(Bo,Ho,Ro,!1,null,null,null));Vo.options.__file="Question.vue";var qo=Vo.exports,Wo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.kids")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",t._l(t.figures,function(e){return i("li",{key:e.id,staticClass:"c-children-item",on:{click:function(i){t.choose(e)}}},[i("div",{staticClass:"c-children-item__avatar",class:{"c-avatar--boy":"Male"===e.gender,"c-avatar--girl":"Female"===e.gender,"has-avatar":!!e.headUrlAttachmentId}},[e.headUrlAttachmentId?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.getHeadUrl(e)+")"}})]):t._e()]),i("div",{staticClass:"c-children-item__name u-more"},[t._v(t._s(e.name))])])}))])])},Go=[],Yo={name:"children",computed:Object(Yi["a"])({},Object(K["d"])(["user","figures"])),methods:{choose:function(t){this.$router.push({name:"children-info",params:{id:t.id}})},getHeadUrl:function(t){return this.$transformHeadUrl(t.headUrlAttachmentId,this.user.token)}}},zo=Yo,Zo=(i("2137"),Object(c["a"])(zo,Wo,Go,!1,null,null,null));Zo.options.__file="Children.vue";var Jo=Zo.exports,Qo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.kids")}},[i("div",{staticClass:"l-navigation__content has-padding"},[i("ul",[i("li",{staticClass:"c-account-info"},[i("div",{staticClass:"c-account-info__name u-more"},[t._v(t._s(t.name))]),t.figure?i("div",{staticClass:"c-account-info__avatar"},[i("div",{class:{"c-avatar--boy":"Male"===t.figure.gender,"c-avatar--girl":"Female"===t.figure.gender,"has-avatar":!!t.headUrl},on:{click:t.upload}},[t.headUrl?i("div",{staticClass:"c-avatar__icon"},[i("i",{style:{backgroundImage:"url("+t.headUrl+")"}})]):t._e()])]):t._e()]),i("li",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.relationship")))]),i("div",{staticClass:"c-info-item__value"},[t._v(t._s(t.relationship))])]),i("li",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.student")))]),i("div",{staticClass:"c-info-item__value"},[t._v(t._s(t.studentId))])]),i("li",{staticClass:"c-info-item",on:{click:t.changeBus}},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.$t("account.bus")))]),i("div",{staticClass:"c-info-item__value u-more"},[t._v(t._s(t.bus))])])]),i("input",{ref:"fileUpload",staticClass:"u-display-none",attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}})])])},Ko=[],Xo={name:"children-info",computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["getFigure"]),{id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)},name:function(){return this.figure?this.figure.name:null},relationship:function(){return this.figure?1===this.figure.relationship?this.$t("relationship.son"):this.$t("relationship.daughter"):null},studentId:function(){return this.figure?this.figure.studentId:null},bus:function(){return this.figure?this.figure.busstudentId:this.$t("common.none")},headUrl:function(){return this.figure&&this.figure.headUrlAttachmentId?this.$transformHeadUrl(this.figure.headUrlAttachmentId,this.user.token):null}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateFigureInfo"]),{upload:function(){this.figure&&this.$refs.fileUpload&&!this.cancelSource&&this.$refs.fileUpload.click()},clear:function(){this.cancelSource=null,this.$refs.fileUpload.value=null},handleFile:function(t){var e=this,i=t.target||t.srcElement,s=i.files[0];if(s){this.$uploadHttpPost||(this.$uploadHttpPost=this.$http.createPost("common/pic/upload",{opts:{headers:{"Content-Type":"multipart/form-data"},origin:!0,lock:!0},success:function(t){e.changeAvatar(t.data.attachmentId)}}));var a=new FormData;a.append("file",s),this.$uploadHttpPost.request(a)}},changeAvatar:function(t){var e=this;this.$log("child head attachmentId: ".concat(t)),this.$avatarHttpPost||(this.$avatarHttpPost=this.$http.createPost("parent/child/modifyPic",{opts:{lock:!0},success:function(t,i){e.updateFigureInfo({id:e.id,info:{headUrlAttachmentId:i.attachmentId}})}})),this.$avatarHttpPost.request({token:this.user.token,idStudent:this.id,attachmentId:t})},changeBus:function(){this.figure&&this.$router.push({name:"modify-bus",params:{id:this.figure.id}})}}),beforeDestroy:function(){this.$uploadHttpPost&&this.$uploadHttpPost.cancel(),this.$avatarHttpPost&&this.$avatarHttpPost.cancel()}},tr=Xo,er=Object(c["a"])(tr,Qo,Ko,!1,null,null,null);er.options.__file="ChildrenInfo.vue";var ir=er.exports,sr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"c-modify",attrs:{title:t.$t("account.bus")}},[i("div",{staticClass:"l-navigation__content l-form"},[i("form-field",{attrs:{type:"text",placeholder:t.$t("account.bus"),tip:t.$t("bus.tip")},model:{value:t.busId,callback:function(e){t.busId="string"===typeof e?e.trim():e},expression:"busId"}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)])},ar=[],nr={name:"modify-bus",components:{formField:Xi},data:function(){return{busId:""}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["getFigure"]),{id:function(){return Number(this.$route.params.id)},figure:function(){return this.getFigure(this.id)},isValid:function(){return!!this.busId}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateFigureInfo"]),{save:function(){var t=this;this.isValid&&(this.$httpPost||(this.$httpPost=this.$http.createPost("parent/child/modifyBSSId",{opts:{lock:!0},success:function(e,i){t.updateFigureInfo({id:t.id,info:{busstudentId:i.BSSId}}),t.$router.back()}})),this.$httpPost.request({token:this.user.token,idStudent:this.id,BSSId:this.busId}))}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},or=nr,rr=Object(c["a"])(or,sr,ar,!1,null,null,null);rr.options.__file="ModifyBus.vue";var cr=rr.exports,lr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("mobile.title")}},[i("router-view",{staticClass:"l-navigation__content"})],1)},hr=[],ur={name:"modify-mobile-wrapper"},dr=ur,fr=Object(c["a"])(dr,lr,hr,!1,null,null,null);fr.options.__file="ModifyMobileWrapper.vue";var pr=fr.exports,mr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-modify-mobile-confirm is-form"},[i("div",{staticClass:"p-modify-mobile-confirm__current"},[t._v(t._s(t.$t("mobile.current")))]),i("div",{staticClass:"p-modify-mobile-confirm__mobile"},[t._v(t._s(t.mobile)+" ")]),i("div",{staticClass:"p-modify-mobile-confirm__warning"},[t._v(t._s(t.$t("mobile.warning")))]),i("div",{staticClass:"p-modify-mobile-confirm__tip"},[t._v(t._s(t.$t("mobile.tip")))]),i("router-link",{staticClass:"o-button t-adapt-button",attrs:{tag:"div",to:{name:"pre-modify-mobile"},replace:""}},[t._v(t._s(t.$t("mobile.change")))])],1)},vr=[],_r={name:"modify-mobile-confirm",computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["phoneNumber"]),{mobile:function(){var t=this.phoneNumber;if(t){var e,i,s,a=t.length;return a>5?(e=t.substring(0,2),i=t.substring(2,a-3).replace(/\d/g,"*"),s=t.substring(a-3),e+i+s):a>3?(e=t.substring(0,1),i=t.substring(1,a-1).replace(/\d/g,"*"),s=t.substring(a-1),e+i+s):t.replace(/\d/,"*")}return""}}),created:function(){this.phoneNumber||this.$router.replace({name:"modify-mobile"})}},gr=_r,br=(i("204c"),Object(c["a"])(gr,mr,vr,!1,null,null,null));br.options.__file="ModifyMobileConfirm.vue";var Cr=br.exports,wr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-pre-modify-mobile is-form c-modify"},[i("div",{staticClass:"p-pre-modify-mobile__nav"},[i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isPhoneMode},on:{click:function(e){t.changeMode(2)}}},[t._v(t._s(t.$t("tab.phone")))]),i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isEmailMode},on:{click:function(e){t.changeMode(3)}}},[t._v(t._s(t.$t("tab.email")))])]),t.isPhoneMode?[t.hasMobile?i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.accountError}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.$t("tab.oldPhoneNumber")))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("div",{staticClass:"c-form-field__input u-overflow-cut"},[t._v(t._s("+"+t.areaCode+" "+t.mobile))])]),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.accountError))])]):i("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",label:t.$t("tab.oldPhoneNumber"),error:t.accountError},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[i("area-code",{attrs:{areaCode:t.areaCode},on:{change:t.pick}})],1)]:[t.hasEmali?i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.accountError}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.$t("tab.oldEmail")))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("div",{staticClass:"c-form-field__input u-overflow-cut"},[t._v(t._s(t.email))])]),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.accountError))])]):i("form-field",{staticClass:"c-form-field",attrs:{label:t.$t("tab.oldEmail"),placeholder:t.$t("tab.oldEmail"),error:t.accountError},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],i("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode"),error:t.vCodeError},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[i("sms",{attrs:{mode:t.mode,type:t.checkType,areaCode:t.areaCode,mobile:t.mobile,email:t.email,analysisError:t.analysisError},on:{send:t.clearError}})],1),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))])],2)},yr=[],$r={name:"pre-modify-mobile",components:{formField:Xi,areaCode:fs,sms:bs},data:function(){return{hasMobile:!1,hasEmali:!1,mode:2,areaCode:"",mobile:"",email:"",vCode:"",accountErrorInfo:null,vCodeErrorInfo:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{url:function(){switch(this.mode){case 2:return"staff/mobile/checkvcode";case 3:return"staff/email/checkvcode";default:return""}},isPhoneMode:function(){return 2===this.mode},isEmailMode:function(){return 3===this.mode},checkType:function(){return this.isStaff?2:1},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},account:function(){return this.isPhoneMode?this.mobileVal:this.email},isValid:function(){return this.account&&this.vCode},accountError:function(){return this.accountErrorInfo?this.$lang.code[this.accountErrorInfo.code]||this.accountErrorInfo.message:""},vCodeError:function(){return this.vCodeErrorInfo?this.$lang.code[this.vCodeErrorInfo.code]||this.vCodeErrorInfo.message:""}}),methods:{clearError:function(){this.accountErrorInfo=null,this.vCodeErrorInfo=null},changeMode:function(t){this.mode!==t&&(this.clearError(),this.vCode="",this.mode=t,this.$httpPost&&this.$httpPost.setUrl(this.url))},pick:function(t){this.areaCode=t},next:function(){var t=this;this.isValid&&(this.clearError(),this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.$router.replace({name:"modify-mobile"})},fail:function(e){switch(e.code){case Jt:case Qt:return t.vCodeErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request(this.isPhoneMode?{token:this.user.token,mobile:this.mobileVal,vCode:this.vCode}:{token:this.user.token,email:this.email,vCode:this.vCode}))},analysisError:function(t){switch(t.code){case se:case ae:return this.accountErrorInfo={code:t.code,message:t.message},!0;default:return!1}}},created:function(){this.user.areaCode&&this.user.mobilePhone&&(this.areaCode=this.user.areaCode,this.mobile=this.user.mobilePhone,this.hasMobile=!0),this.user.email&&(this.email=this.user.email,this.hasEmali=!0)},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},kr=$r,Pr=(i("19ee"),Object(c["a"])(kr,wr,yr,!1,null,null,null));Pr.options.__file="ModifyMobileValidate.vue";var Sr=Pr.exports,Er=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify"},[i("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",label:t.$t("mobile.newPhoneNumber")},model:{value:t.mobile,callback:function(e){t.mobile="string"===typeof e?e.trim():e},expression:"mobile"}},[i("area-code",{on:{change:t.pick}})],1),i("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",label:t.$t("common.confirm"),error:t.confirmErr},model:{value:t.confirmMobile,callback:function(e){t.confirmMobile="string"===typeof e?e.trim():e},expression:"confirmMobile"}},[i("area-code",{on:{change:t.confirmPick}})],1),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)},Ir=[],Ar={name:"modify-mobile",components:{formField:Xi,areaCode:fs},data:function(){return{mobile:"",areaCode:"",confirmMobile:"",confirmAreaCode:"",confirmErr:""}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{url:function(){return this.isStaff?"staff/mobile/modify":"parent/mobile/modify"},isValid:function(){return!!(this.mobile&&this.confirmMobile&&this.areaCode&&this.confirmAreaCode)}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateUserInfo"]),{pick:function(t){this.areaCode=t},confirmPick:function(t){this.confirmAreaCode=t},save:function(){var t=this;if(this.isValid){if(this.confirmAreaCode!==this.areaCode||this.confirmMobile!==this.mobile)return void(this.confirmErr=this.$t("mobile.notMatch"));this.confirmErr="",this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.updateUserInfo({areaCode:t.areaCode,mobilePhone:t.mobile}),t.$router.back()}})),this.$httpPost.request({token:this.user.token,mobile:this.areaCode+this.mobile})}}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Tr=Ar,Dr=(i("5080"),Object(c["a"])(Tr,Er,Ir,!1,null,"9dfbc5de",null));Dr.options.__file="ModifyMobile.vue";var Or=Dr.exports,xr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("home.menu.password")}},[i("router-view",{staticClass:"l-navigation__content"})],1)},Mr=[],Nr={name:"modify-pwd-wrapper"},Ur=Nr,Lr=Object(c["a"])(Ur,xr,Mr,!1,null,null,null);Lr.options.__file="ModifyPwdWrapper.vue";var jr=Lr.exports,Hr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-pre-modify-password l-form c-modify"},[i("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("resetPwd.title")))]),i("div",{staticClass:"p-pre-modify-password__nav"},[i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isPhoneMode},on:{click:function(e){t.changeMode(2)}}},[t._v(t._s(t.$t("tab.phone")))]),i("div",{staticClass:"o-fixed-tab",class:{"is-active":t.isEmailMode},on:{click:function(e){t.changeMode(3)}}},[t._v(t._s(t.$t("tab.email")))])]),t.isPhoneMode?[t.hasMobile?i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.accountError}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.$t("sms.phone")))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("div",{staticClass:"c-form-field__input u-overflow-cut"},[t._v(t._s("+"+t.areaCode+" "+t.mobile))])]),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.accountError))])]):i("form-field",{staticClass:"c-form-field--select",attrs:{type:"number",label:t.$t("sms.phone"),error:t.accountError},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}},[i("area-code",{attrs:{areaCode:t.areaCode},on:{change:t.pick}})],1)]:[t.hasEmali?i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.accountError}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.$t("sms.email")))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("div",{staticClass:"c-form-field__input u-overflow-cut"},[t._v(t._s(t.email))])]),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.accountError))])]):i("form-field",{staticClass:"c-form-field",attrs:{label:t.$t("sms.email"),placeholder:t.$t("sms.email"),error:t.accountError},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],i("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode"),error:t.vCodeError},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[i("sms",{attrs:{mode:t.mode,type:t.checkType,areaCode:t.areaCode,mobile:t.mobile,email:t.email,analysisError:t.analysisError},on:{send:t.clearError}})],1),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))])],2)},Rr=[],Fr={name:"pre-modify-password",components:{formField:Xi,areaCode:fs,sms:bs},data:function(){return{hasMobile:!1,hasEmali:!1,mode:2,areaCode:"",mobile:"",email:"",vCode:"",accountErrorInfo:null,vCodeErrorInfo:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{url:function(){switch(this.mode){case 2:return"staff/mobile/checkvcode";case 3:return"staff/email/checkvcode";default:return""}},isPhoneMode:function(){return 2===this.mode},isEmailMode:function(){return 3===this.mode},checkType:function(){return this.isStaff?2:1},mobileVal:function(){return this.areaCode&&this.mobile?this.areaCode+this.mobile:null},account:function(){return this.isPhoneMode?this.mobileVal:this.email},isValid:function(){return this.account&&this.vCode},accountError:function(){return this.accountErrorInfo?this.$lang.code[this.accountErrorInfo.code]||this.accountErrorInfo.message:""},vCodeError:function(){return this.vCodeErrorInfo?this.$lang.code[this.vCodeErrorInfo.code]||this.vCodeErrorInfo.message:""}}),methods:{clearError:function(){this.accountErrorInfo=null,this.vCodeErrorInfo=null},changeMode:function(t){this.mode!==t&&(this.clearError(),this.vCode="",this.mode=t,this.$httpPost&&this.$httpPost.setUrl(this.url))},pick:function(t){this.areaCode=t},next:function(){var t=this;this.isValid&&(this.clearError(),this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.$router.replace({name:"modify-pwd"})},fail:function(e){switch(e.code){case Jt:case Qt:return t.vCodeErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request(this.isPhoneMode?{token:this.user.token,mobile:this.mobileVal,vCode:this.vCode}:{token:this.user.token,email:this.email,vCode:this.vCode}))},analysisError:function(t){switch(t.code){case se:case ae:return this.accountErrorInfo={code:t.code,message:t.message},!0;default:return!1}}},created:function(){this.user.areaCode&&this.user.mobilePhone&&(this.areaCode=this.user.areaCode,this.mobile=this.user.mobilePhone,this.hasMobile=!0),this.user.email&&(this.email=this.user.email,this.hasEmali=!0)},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Br=Fr,Vr=(i("65bf"),Object(c["a"])(Br,Hr,Rr,!1,null,null,null));Vr.options.__file="ModifyPwdPresent.vue";var qr=Vr.exports,Wr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify"},[i("form-field",{attrs:{label:t.$t("setPwd.oldPwd"),error:t.pwdError},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isPwdValid},attrs:{label:t.$t("setPwd.newPwd"),tip:t.$t("setPwd.tip"),error:t.passwordErr,value:t.password},on:{blur:t.checkPwdValid,input:t.checkPwdFormatValid}}),i("form-field",{staticClass:"c-form-field--pwd",class:{"is-valid":t.isConfirmPwdValid},attrs:{label:t.$t("common.confirm"),error:t.confirmPasswordErr,value:t.confirmPassword},on:{blur:t.checkConfirmPwdValid,input:t.checkConfirmPwdFormatValid}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.hasValue},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)},Gr=[],Yr={name:"modify-pwd",components:{formField:Xi},data:function(){return{oldPassword:"",password:"",confirmPassword:"",passwordErr:"",confirmPasswordErr:"",pwdErrorInfo:null,isPwdValid:!1,pwdInvalidReason:"",isConfirmPwdValid:!1,isMatch:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{url:function(){return this.isStaff?"staff/password/modify":"parent/password/reset"},hasValue:function(){return!!this.oldPassword&&!!this.password&&!!this.confirmPassword},isValid:function(){return this.isPwdValid&&this.isConfirmPwdValid&&this.isMatch},pwdError:function(){return this.pwdErrorInfo?this.$lang.code[this.pwdErrorInfo.code]||this.pwdErrorInfo.message:""}}),methods:{checkPwdFormatValid:function(t){this.password=t;var e=xs(this.password);this.isPwdValid=e.result,this.pwdInvalidReason=e.reason},checkPwdValid:function(){this.isMatch=this.confirmPassword===this.password,this.isPwdValid?(this.passwordErr="",this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""):(this.passwordErr=this.password.length>0?this.$t("pwdErr.".concat(this.pwdInvalidReason)):"",this.confirmPasswordErr="")},checkConfirmPwdFormatValid:function(t){this.confirmPassword=t;var e=xs(this.confirmPassword);this.isConfirmPwdValid=e.result},checkConfirmPwdValid:function(){var t=xs(this.confirmPassword);this.isConfirmPwdValid=t.result,this.isMatch=this.confirmPassword===this.password,this.isPwdValid&&this.confirmPassword&&!this.isMatch?this.confirmPasswordErr=this.$t("pwdErr.notMatch"):this.confirmPasswordErr=""},save:function(){var t=this;this.isValid&&(this.pwdErrorInfo=null,this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(){t.$router.back()},fail:function(e){switch(e.code){case Zt:case te:return t.pwdErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request({token:this.user.token,oldPwd:this.$md5(this.oldPassword),newPwd:this.$md5(this.password)}))}},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},zr=Yr,Zr=Object(c["a"])(zr,Wr,Gr,!1,null,null,null);Zr.options.__file="ModifyPwd.vue";var Jr=Zr.exports,Qr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("account.email")}},[i("router-view",{staticClass:"l-navigation__content"})],1)},Kr=[],Xr={name:"modify-email-wrapper"},tc=Xr,ec=Object(c["a"])(tc,Qr,Kr,!1,null,null,null);ec.options.__file="ModifyEmailWrapper.vue";var ic=ec.exports,sc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form c-modify"},[i("div",{staticClass:"l-form__title"},[t._v(t._s(t.$t("resetEmail.title")))]),i("div",{staticClass:"c-form-field",class:{"is-invalid":!!t.accountError}},[i("div",{staticClass:"c-form-field__label"},[t._v(t._s(t.$t("tab.oldEmail")))]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("div",{staticClass:"c-form-field__input u-overflow-cut"},[t._v(t._s(t.user.email))])]),i("div",{staticClass:"c-form-field__tip"},[t._v(t._s(t.accountError))])]),i("form-field",{staticClass:"c-form-field--button",attrs:{label:t.$t("sms.vCode"),error:t.vCodeError},model:{value:t.vCode,callback:function(e){t.vCode=e},expression:"vCode"}},[i("sms",{attrs:{mode:t.mode,type:t.checkType,email:t.user.email}})],1),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.next}},[t._v(t._s(t.$t("common.next")))])],1)},ac=[],nc={name:"pre-set-pwd",components:{formField:Xi,sms:bs},data:function(){return{mode:3,vCode:"",accountErrorInfo:null,vCodeErrorInfo:null}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{isValid:function(){return!!this.vCode},accountError:function(){return this.accountErrorInfo?this.$lang.code[this.accountErrorInfo.code]||this.accountErrorInfo.message:""},vCodeError:function(){return this.vCodeErrorInfo?this.$lang.code[this.vCodeErrorInfo.code]||this.vCodeErrorInfo.message:""},checkType:function(){return this.isStaff?2:1}}),methods:{clearError:function(){this.accountErrorInfo=null,this.vCodeErrorInfo=null},next:function(){var t=this;this.isValid&&(this.clearError(),this.$httpPost||(this.$httpPost=this.$http.createPost("staff/email/checkvcode",{opts:{lock:!0},success:function(){t.$router.replace({name:"modify-email"})},fail:function(e){switch(e.code){case Jt:case Qt:return t.vCodeErrorInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request({token:this.user.token,email:this.user.email,vCode:this.vCode}))},pick:function(t){this.areaCode=t},analysisError:function(t){switch(t.code){case se:case ae:return this.accountErrorInfo={code:t.code,message:t.message},!0;default:return!1}}},created:function(){this.user.email||this.$router.replace({name:"modify-email"})},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},oc=nc,rc=Object(c["a"])(oc,sc,ac,!1,null,null,null);rc.options.__file="ModifyEmailPresent.vue";var cc=rc.exports,lc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-form"},[i("form-field",{attrs:{label:t.$t("email.label"),error:t.emailErrMsg},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),i("form-field",{attrs:{label:t.$t("common.confirm"),error:t.confirmErr},model:{value:t.confirmEmail,callback:function(e){t.confirmEmail=e},expression:"confirmEmail"}}),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit",class:{"is-active":t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)},hc=[],uc={name:"modify-email",components:{formField:Xi},data:function(){return{email:"",emailErr:"",emailErrInfo:null,confirmEmail:"",confirmErr:""}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"]),{url:function(){return this.isStaff?"staff/email/modify":"parent/email/modify"},isValid:function(){return!!this.email&&!!this.confirmEmail},emailErrMsg:function(){return this.emailErr||(this.emailErrInfo?this.$lang.code[this.emailErrInfo.code]||this.emailErrInfo.message:"")}}),methods:Object(Yi["a"])({},Object(K["b"])(["updateUserInfo"]),{save:function(){var t=this;if(this.isValid){if(this.emailErrInfo=null,!Ms(this.email))return this.emailErr=this.$t("email.formatErr"),void(this.confirmErr="");if(this.emailErr="",this.confirmEmail!==this.email)return void(this.confirmErr=this.$t("email.notMatch"));this.confirmErr="",this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{lock:!0},success:function(e,i){t.updateUserInfo({email:i.email}),t.$router.back()},fail:function(e){switch(e.code){case ee:return t.emailErrInfo={code:e.code,message:e.message},!0;default:return!1}}})),this.$httpPost.request({token:this.user.token,email:this.email})}}}),beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},dc=uc,fc=Object(c["a"])(dc,lc,hc,!1,null,null,null);fc.options.__file="ModifyEmail.vue";var pc=fc.exports,mc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("attendance.title")}},[i("weekly-calendar",{staticClass:"l-navigation__placeholder",attrs:{"default-date":t.date},on:{change:t.change,toggle:t.toggle}}),i("router-view",{staticClass:"l-navigation__content",attrs:{date:t.date}}),t.showCalendar?i("div",{staticClass:"c-attendance-calendar",on:{click:function(e){t.showCalendar=!1}}},[i("div",{on:{click:function(t){t.stopPropagation()}}},[i("calendar",{attrs:{weeks:t.weeks,"default-date":t.selectedDate},on:{change:t.change}})],1)]):t._e()],1)},vc=[];function _c(t){return t<10?"0".concat(t):t}function gc(t){return"".concat(t.getFullYear(),"-").concat(_c(t.getMonth()+1),"-").concat(_c(t.getDate()))}var bc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-weekly-calendar"},[i("div",{staticClass:"c-weekly-calendar__date"},[t._v(t._s(t.date))]),i("div",{staticClass:"c-weekly-calendar__wrapper"},[i("div",{ref:"swiper",staticClass:"c-weekly-calendar__slide swiper-container"},[i("div",{staticClass:"swiper-wrapper"},t._l(t.blocks,function(e,s){return i("div",{key:s,staticClass:"c-weekly-calendar__block swiper-slide"},t._l(e.items,function(e,s){return i("div",{key:s,staticClass:"c-weekly-calendar__item",attrs:{id:e.date},on:{click:function(i){t.choose(e.date)}}},[i("div",{staticClass:"c-weekly-calendar__label",class:{"is-active":t.selected===e.date,"is-disabled":e.disabled}},[t._v(t._s(e.label))])])}))}))]),i("div",{staticClass:"c-weekly-calendar__extend"},[i("i",{staticClass:"c-weekly-calendar__icon",on:{click:t.toggle}})])])])},Cc=[],wc={name:"calendar-weekly",props:{defaultDate:{type:String,default:""},range:{type:Boolean,default:!0},rangeStart:{type:String,default:""},rangeEnd:{type:String,default:""}},data:function(){return{startDate:null,endDate:null,minDate:null,maxDate:null,index:1,date:"",blocks:[],selected:null}},methods:{fillZero:function(t){return t<10?"0".concat(t):t},format:function(t){return"".concat(t.getFullYear(),"-").concat(this.fillZero(t.getMonth()+1),"-").concat(this.fillZero(t.getDate()))},isValid:function(t){return!this.range||(!this.minDate||t>=this.minDate)&&t<this.maxDate},createBlock:function(t){for(var e,i=[],s=0;s<7;s++)e=this.offsetDay(t,s),i[s]={label:e.getDate(),date:this.format(e),disabled:!this.isValid(e)};return{label:this.$t("format.year-month",{year:t.getFullYear(),month:this.$d(t,"month")}),items:i}},addPreBlock:function(){return(!this.minDate||this.startDate>this.minDate)&&(this.startDate=this.offsetDay(this.startDate,-7),this.blocks.unshift(this.createBlock(this.startDate)),!0)},addNextBlock:function(){return(!this.maxDate||this.endDate<this.maxDate)&&(this.blocks.push(this.createBlock(this.endDate)),this.endDate=this.offsetDay(this.endDate,7),!0)},refresh:function(){var t=this;this.$swiper&&this.$nextTick(function(){t.$swiper.updateSlides(),t.$swiper.slideTo(t.index,0,!1)})},notify:function(){this.$emit("change",this.selected)},choose:function(t){this.selected!==t&&this.isValid(new Date(t))&&(this.selected=t,this.notify())},toggle:function(){this.$emit("toggle",this.selected)},offsetDay:function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+e)},init:function(){var t=!this.defaultDate;if(this.range){this.rangeStart?this.minDate=new Date(this.rangeStart):this.minDate=null,this.rangeEnd?this.maxDate=new Date(this.rangeEnd):this.maxDate=this.offsetDay(new Date,1),this.minDate>=this.maxDate&&(this.minDate=null);var e=this.defaultDate?new Date(this.defaultDate):new Date;e>=this.maxDate?(e=this.offsetDay(this.maxDate,-1),t=!0):this.minDate&&e<this.minDate&&(e=this.minDate,t=!0),this.selected=this.format(e)}else this.minDate=null,this.maxDate=null,this.selected=this.defaultDate||this.format(new Date);var i=new Date(this.selected),s=i.getDay();this.startDate=s>0?this.offsetDay(i,-s):i,this.endDate=this.offsetDay(this.startDate,7),this.blocks=[this.createBlock(this.startDate)],this.index=0,this.addPreBlock()&&(this.index=1),this.addNextBlock(),t&&this.notify()}},watch:{defaultDate:function(){this.init(),this.refresh()}},created:function(){this.init()},mounted:function(){var t=this;this.$swiper=new Ba.a(this.$refs.swiper,{preventInteractionOnTransition:!0,longSwipesRatio:.3,initialSlide:this.index,on:{slideChangeTransitionEnd:function(){t.$nextTick(function(){t.date=t.blocks[t.$swiper.activeIndex].label,0===t.$swiper.activeIndex?t.addPreBlock()&&t.refresh():t.$swiper.activeIndex===t.blocks.length-1?t.addNextBlock()&&(t.index+=1,t.refresh()):t.index=t.$swiper.activeIndex})}}})},beforeDestroy:function(){this.$swiper&&this.$swiper.destroy()}},yc=wc,$c=(i("59e6"),Object(c["a"])(yc,bc,Cc,!1,null,null,null));$c.options.__file="CalendarWeekly.vue";var kc=$c.exports,Pc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-calendar"},[i("div",{staticClass:"c-calendar__header"},[i("div",{staticClass:"c-calendar__today",on:{click:t.toToday}},[t._v(t._s(t.$t("common.today")))]),i("div",{staticClass:"c-calendar__current"},[t._v(t._s(t.date))])]),i("div",{staticClass:"c-calendar__row"},t._l(t.weeks,function(e,s){return i("div",{key:s,staticClass:"c-calendar__item"},[t._v(t._s(e))])})),i("div",{ref:"swiper",staticClass:"c-calendar__slide swiper-container"},[i("div",{staticClass:"swiper-wrapper"},t._l(t.blocks,function(e,s){return i("div",{key:s,staticClass:"c-calendar__block swiper-slide"},t._l(e.rows,function(e,s){return i("div",{key:s,staticClass:"c-calendar__row"},t._l(e,function(e,s){return i("div",{key:s,staticClass:"c-calendar__item",attrs:{id:e.date},on:{click:function(i){t.choose(e.date)}}},[i("div",{staticClass:"c-calendar__label",class:{"is-active":t.selected===e.date,"is-disabled":e.disabled}},[t._v(t._s(e.label))])])}))}))}))])])},Sc=[],Ec={name:"calendar",props:{weeks:{type:Array,default:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},defaultDate:{type:String,default:""},range:{type:Boolean,default:!0},rangeStart:{type:String,default:""},rangeEnd:{type:String,default:""}},data:function(){return{minDate:null,maxDate:null,index:1,date:"",blocks:[],selected:null}},methods:{fillZero:function(t){return t<10?"0".concat(t):t},formatToYYYYMM:function(t){return"".concat(t.getFullYear(),"-").concat(this.fillZero(t.getMonth()+1))},formatToYYYYMMDD:function(t){return"".concat(t.getFullYear(),"-").concat(this.fillZero(t.getMonth()+1),"-").concat(this.fillZero(t.getDate()))},isValid:function(t){return!this.range||(!this.minDate||t>=this.minDate)&&t<this.maxDate},createItem:function(t,e){return{label:t.getDate(),date:this.formatToYYYYMMDD(t),disabled:!0===e||!this.isValid(t)}},createBlock:function(t){var e,i=t.getFullYear(),s=t.getMonth(),a=new Date(i,s,1).getDay(),n=new Date(i,s+1,0),o=n.getDay(),r=n.getDate(),c=[[]],l=0;if(0!==a)for(var h=a;h>0;h--)c[l].push(this.createItem(new Date(i,s,1-h),!0));for(var u=1;u<=r;u++)e=new Date(i,s,u),c[l].push(this.createItem(e)),6===e.getDay()&&(l+=1,u<r&&(c[l]=[]));if(6!==o)for(var d=0,f=6-o;d<f;d++)c[l].push(this.createItem(new Date(i,s+1,1+d),!0));return{label:this.$t("format.year-month",{year:i,month:this.$d(t,"month")}),date:this.formatToYYYYMM(t),rows:c}},addPreBlock:function(){return(!this.minDate||this.startDate>this.minDate)&&(this.startDate.setMonth(this.startDate.getMonth()-1),this.blocks.unshift(this.createBlock(this.startDate)),!0)},addNextBlock:function(){return(!this.maxDate||this.endDate<this.maxDate)&&(this.blocks.push(this.createBlock(this.endDate)),this.endDate.setMonth(this.endDate.getMonth()+1),!0)},refresh:function(){var t=this;this.$swiper&&this.$nextTick(function(){t.$swiper.updateSlides(),t.$swiper.slideTo(t.index,0,!1)})},notify:function(){this.$emit("change",this.selected)},choose:function(t){this.isValid(new Date(t))&&(this.selected=t,this.notify())},offsetDay:function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+e)},toToday:function(){if(this.$swiper){var t=this.today||new Date;if(t<this.minDate||t>=this.maxDate)this.init(this.formatToYYYYMMDD(t)),this.refresh();else{this.choose(this.formatToYYYYMMDD(t));var e=this.formatToYYYYMM(t);this.index=this.blocks.findIndex(function(t){return t.date===e}),this.$swiper.slideTo(this.index,0,!1)}}},init:function(t){var e=!t;if(this.range){this.rangeStart?this.minDate=new Date(this.rangeStart):this.minDate=null,this.rangeEnd?this.maxDate=new Date(this.rangeEnd):this.maxDate=this.offsetDay(new Date,1),this.minDate>=this.maxDate&&(this.minDate=null);var i=t?new Date(t):new Date;i>=this.maxDate?(i=this.offsetDay(this.maxDate,-1),e=!0):this.minDate&&i<this.minDate&&(i=this.minDate,e=!0),this.selected=this.formatToYYYYMMDD(i),this.today=new Date}else this.minDate=null,this.maxDate=null,this.selected=t||this.formatToYYYYMMDD(new Date);var s=new Date(this.selected),a=s.getFullYear(),n=s.getMonth();this.startDate=new Date(a,n,1),this.endDate=new Date(a,n+1,1),this.blocks=[this.createBlock(this.startDate)],this.index=0,this.addPreBlock()&&(this.index=1),this.addNextBlock(),e&&this.notify()}},watch:{defaultDate:function(){this.init(this.defaultDate),this.refresh()}},created:function(){this.init(this.defaultDate)},mounted:function(){var t=this;this.$swiper=new Ba.a(this.$refs.swiper,{preventInteractionOnTransition:!0,longSwipesRatio:.3,initialSlide:this.index,on:{slideChangeTransitionEnd:function(){t.$nextTick(function(){t.date=t.blocks[t.$swiper.activeIndex].label,0===t.$swiper.activeIndex?t.addPreBlock()&&t.refresh():t.$swiper.activeIndex===t.blocks.length-1?t.addNextBlock()&&(t.index+=1,t.refresh()):t.index=t.$swiper.activeIndex})}}})},beforeDestroy:function(){this.$swiper&&this.$swiper.destroy()}},Ic=Ec,Ac=(i("e611"),Object(c["a"])(Ic,Pc,Sc,!1,null,null,null));Ac.options.__file="Calendar.vue";var Tc=Ac.exports,Dc={name:"attendance-wrapper",components:{weeklyCalendar:kc,calendar:Tc},data:function(){return{date:null,showCalendar:!1,selectedDate:null}},computed:{weeks:function(){return"zh-hk"===this.$i18n.locale?["日","一","二","三","四","五","六"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},beforeRouteUpdate:function(t,e,i){this.showCalendar=!1,t.name===e.name?(this.date=t.params.date||gc(new Date),i()):this.date!==t.params.date?this.$router.replace({name:t.name,params:Object.assign(t.params,{date:this.date})}):i()},methods:{change:function(t){this.date!==t&&(this.date=t,this.$router.replace({params:{date:t}})),this.showCalendar=!1},toggle:function(t){this.selectedDate=t,this.showCalendar=!0}},created:function(){this.date=this.$route.params.date||gc(new Date)}},Oc=Dc,xc=(i("3f8d"),Object(c["a"])(Oc,mc,vc,!1,null,null,null));xc.options.__file="AttendanceWrapper.vue";var Mc=xc.exports,Nc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("attendance-statistics",{attrs:{title:t.$t("attendance."+t.mode),result:t.result,attendances:t.attendances},on:{choose:t.toGradeAttendance}})},Uc=[],Lc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-attendance-statistics"},[i("attendance-block",{staticClass:"c-attendance-statistics__total",attrs:{title:t.title,supplement:t.supplement,attendance:t.result}},[i("div",{staticClass:"c-attendance-statistics__desc"},[t._v(t._s(t.$t("attendance.total")))])]),i("div",{staticClass:"c-attendance-statistics__list"},t._l(t.attendances,function(e,s){return i("attendance-item",{key:s,attrs:{attendance:e},nativeOn:{click:function(i){t.choose(e)}}})}))],1)},jc=[],Hc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-attendance-item"},[i("div",{staticClass:"c-attendance-item__tip"},[t._v(t._s(t.attendance.label))]),i("div",{staticClass:"o-progress c-attendance-item__progress"},[i("div",{staticClass:"o-pregress__inner",style:{width:t.attendance.precent+"%"}})]),i("div",{staticClass:"c-attendance-item__percent u-more"},[i("span",{staticClass:"c-attendance-item__arrived"},[t._v(t._s(t.attendance.arrived))]),t._v("/"+t._s(t.attendance.total))])])},Rc=[],Fc={name:"attendance-item",props:["attendance"]},Bc=Fc,Vc=(i("58ac"),Object(c["a"])(Bc,Hc,Rc,!1,null,null,null));Vc.options.__file="AttendanceItem.vue";var qc=Vc.exports,Wc={name:"attendance-statistics",props:{title:{type:String,default:""},supplement:{type:String,default:""},result:{type:Object,default:function(){return{arrived:0,total:0}}},attendances:{type:Array,default:function(){return[]}}},components:{attendanceBlock:mn,attendanceItem:qc},methods:{choose:function(t){this.$emit("choose",t)}}},Gc=Wc,Yc=(i("9422"),Object(c["a"])(Gc,Lc,jc,!1,null,null,null));Yc.options.__file="AttendanceStatistics.vue";var zc=Yc.exports,Zc={name:"attendance-school",props:["date"],components:{attendanceStatistics:zc},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isAdmin"]),{mode:function(){return this.$route.params.mode},isTeacher:function(){return"teacher"===this.mode},url:function(){return this.isTeacher?"admin/teacher/attendance":"admin/student/schoollevel/attendance"}}),methods:{analysis:function(t){var e={arrived:this.isTeacher?t.arrivedStaffTotal:t.arrivedStudentTotal,total:this.isTeacher?t.staffTotal:t.studentTotal},i=this.$lang.isChinese();this.isTeacher?this.attendances=t.staffStat.map(function(t){return t.label=i?t.schoolLevelHK:t.schoolLevel,t.arrived=t.arrivedStaffSchoolLevelTotal,t.total=t.staffSchoolLevelTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}):this.attendances=t.studentStat.map(function(t){return t.label=i?t.schoolLevelHK:t.schoolLevel,t.arrived=t.arrivedStudentSchoolLevelTotal,t.total=t.studentSchoolLevelTotal,t.proportion=t.studentSchoolLevelTotal>0?t.arrivedStudentSchoolLevelTotal/t.studentSchoolLevelTotal*100:0,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}),this.result=e},toGradeAttendance:function(t){this.isTeacher?this.$router.push({name:"attendance-details",params:{mode:"teacher",id:t.idSchoolLevel,date:this.date}}):this.$router.push({name:"attendance-grade",params:{schoolLevelId:t.idSchoolLevel,date:this.date}})},fetch:function(){var t=this;this.isAdmin&&(this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{success:function(e){return t.analysis(e.data)}})),this.$httpPost.force({token:this.user.token,queryDate:this.date},{cycle:gc(new Date)===this.date?6e4:0}))},reset:function(){this.result={arrived:0,total:0},this.attendances=[],this.fetch()}},watch:{date:function(){this.reset()}},created:function(){this.fetch()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Jc=Zc,Qc=Object(c["a"])(Jc,Nc,Uc,!1,null,null,null);Qc.options.__file="AttendanceSchool.vue";var Kc=Qc.exports,Xc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("attendance-statistics",{attrs:{title:t.$t("attendance.student"),result:t.result,attendances:t.attendances},on:{choose:t.toClassAttendance}})},tl=[],el={name:"attendance-grade",props:["date"],components:{attendanceStatistics:zc},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isAdmin"]),{schoolLevelId:function(){return Number(this.$route.params.schoolLevelId)}}),methods:{analysis:function(t){var e={arrived:t.arrivedStudentSchoolLevelTotal,total:t.studentSchoolLevelTotal};this.attendances=t.gradeStudentStat.map(function(t){return t.label=t.gradeLevel,t.arrived=t.arrivedStudentGradeTotal,t.total=t.studentGradeTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}),this.result=e},toClassAttendance:function(t){this.$router.push({name:"attendance-classes",params:{gradeId:t.idGrade,date:this.date}})},fetch:function(){var t=this;this.isAdmin&&(this.$httpPost||(this.$httpPost=this.$http.createPost("admin/student/grade/attendance",{success:function(e){return t.analysis(e.data)}})),this.$httpPost.force({token:this.user.token,idSchoolLevel:this.schoolLevelId,queryDate:this.date},{cycle:gc(new Date)===this.date?6e4:0}))},reset:function(){this.result={arrived:0,total:0},this.attendances=[],this.fetch()}},watch:{date:function(){this.reset()}},created:function(){this.fetch()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},il=el,sl=Object(c["a"])(il,Xc,tl,!1,null,null,null);sl.options.__file="AttendanceGrade.vue";var al=sl.exports,nl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("attendance-statistics",{attrs:{title:t.$t("attendance.student"),result:t.result,attendances:t.attendances},on:{choose:t.toClassAttendance}})},ol=[],rl={name:"attendance-classes",props:["date"],components:{attendanceStatistics:zc},data:function(){return{result:{arrived:0,total:0},attendances:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isAdmin"]),{gradeId:function(){return Number(this.$route.params.gradeId)}}),methods:{analysis:function(t){var e={arrived:t.arrivedStudentGradeTotal,total:t.studentGradeTotal};this.attendances=t.classStudentStat.map(function(t){return t.label=t.classId,t.arrived=t.arrivedStudentClassTotal,t.total=t.studentClassTotal,t.precent=t.total>0?t.arrived/t.total*100:0,t.proportion=t.total>0&&e.total>0?t.total/e.total*100:0,t}),this.result=e},toClassAttendance:function(t){this.$router.push({name:"attendance-details",params:{mode:"student",id:t.idClass,date:this.date}})},fetch:function(){var t=this;this.isAdmin&&(this.$httpPost||(this.$httpPost=this.$http.createPost("admin/student/class/attendance",{success:function(e){return t.analysis(e.data)}})),this.$httpPost.force({token:this.user.token,idGrade:this.gradeId,queryDate:this.date},{cycle:gc(new Date)===this.date?6e4:0}))},reset:function(){this.result={arrived:0,total:0},this.attendances=[],this.fetch()}},watch:{date:function(){this.reset()}},created:function(){this.fetch()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},cl=rl,ll=Object(c["a"])(cl,nl,ol,!1,null,null,null);ll.options.__file="AttendanceClasses.vue";var hl=ll.exports,ul=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-attendance-details"},[i("percent-circle",{staticClass:"c-attendance-details__percent",attrs:{result:t.result,tip:t.$t("attendance.arrived"),description:t.description}}),i("div",{staticClass:"c-attendance-details__list"},t._l(t.array,function(e,s){return i("div",{key:s,staticClass:"c-attendance-detail",class:{"is-leave":4===e.status,"is-recorded":2===e.status&&1!==e.isManual,"is-manual":2===e.status&&1===e.isManual},on:{click:function(i){t.viewSignInInformation(e)}}},[i("div",{staticClass:"c-attendance-detail__avatar"},[i("div",{class:[{"is-gray":1===e.status||4===e.status,"has-avatar":!!e.headUrl},t.isTeacher?"Female"===e.gender?"c-attendance-avatar--female":"c-attendance-avatar--male":"Female"===e.gender?"c-attendance-avatar--girl":"c-attendance-avatar--boy"]},[e.headUrl?i("div",{staticClass:"c-solid-avatar__icon"},[i("i",{style:{backgroundImage:"url("+e.headUrl+")"}})]):t._e()])]),i("div",{staticClass:"c-attendance-detail__name"},[t._v(t._s(e.firstName+" "+e.lastName))])])}))],1)},dl=[],fl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-percent-circle"},[i("canvas",{ref:"canvas"}),i("div",{staticClass:"c-percent-circle__info"},[i("div",{staticClass:"c-percent-circle__total"},[i("span",{staticClass:"c-percent-circle__arrived"},[t._v(t._s(t.result.arrived))]),t._v("/"+t._s(t.result.total))]),i("div",{staticClass:"c-percent-circle__tip",class:{"is-empty":!t.tip}},[t._v(t._s(t.tip))]),i("div",{staticClass:"c-percent-circle__description",class:{"is-empty":!t.description}},[t._v(t._s(t.description))])])])},pl=[],ml=function(t,e){var i={colorArr:["#4ebafc","#4a85f5"],lineWidth:20,colorBg:"#e6eaed",r:100,startPoint:.7*Math.PI,targetPercent:0,point:{show:!1,color:"#ffffff"}};Object.assign(i,e),this.options=i;var s=t;this.ctx=s.getContext("2d"),this.currentPercent=0,this.targetPercent=this.options.targetPercent,this.exec=!1;var a=this.options.r+this.options.lineWidth,n=this.options.r+this.options.lineWidth;s.width=2*a,s.height=2*n,s.style.width=a+"px",s.style.height=n+"px",this.width=s.width,this.height=s.height,this.draw()};function vl(t){return t.slice(0,2)+","+t.slice(2,4)+","+t.slice(4,6)}function _l(t){var e=t.substring(1,t.length),i=vl(e).split(","),s=[];return i.forEach(function(t){s.push(parseInt(t,16))}),s}function gl(t,e){for(var i=_l(t),s=_l(e),a=[],n=0;n<i.length;n++)i[n]+s[n]?a.push(parseInt((i[n]+s[n])/2)):a.push(0);var o=[];return a.forEach(function(t){t<10&&(t="0"+t),o.push(t.toString(16))}),"#"+o.join("")}ml.prototype.draw=function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height);var e=this.options.r;if(this.ctx.lineWidth=this.options.lineWidth,this.ctx.save(),this.ctx.beginPath(),this.ctx.lineCap="round",this.ctx.strokeStyle=this.options.colorBg,this.ctx.arc(this.width/2,e+this.options.lineWidth,e,this.options.startPoint,Math.PI-this.options.startPoint,!1),this.ctx.stroke(),this.ctx.restore(),this.currentPercent>0){var i=gl(this.options.colorArr[0],this.options.colorArr[1]);this.ctx.save();var s=this.ctx.createLinearGradient(0,this.height,0,this.height/2+30-e);s.addColorStop(0,this.options.colorArr[0]),s.addColorStop(1,i),this.ctx.strokeStyle=s,this.ctx.lineCap="round";var a=-.5;if(this.currentPercent<.5&&(a=(2-2*(this.options.startPoint/Math.PI-.5))*this.currentPercent-(2-this.options.startPoint/Math.PI)),this.ctx.beginPath(),this.ctx.arc(this.width/2,e+this.options.lineWidth,e,this.options.startPoint,a*Math.PI,!1),this.ctx.stroke(),this.ctx.restore(),this.currentPercent>.5){var n=this.ctx.createLinearGradient(this.width/2,this.height,this.width/2,this.height/2+30-e);n.addColorStop(0,i),n.addColorStop(1,this.options.colorArr[1]),this.ctx.save(),this.ctx.strokeStyle=n,this.ctx.lineCap="round";var o=(this.currentPercent-.5)*(2-2*(this.options.startPoint/Math.PI-.5))-.5;this.ctx.beginPath(),this.ctx.arc(this.width/2,e+this.options.lineWidth,e,-.5*Math.PI,o*Math.PI,!1),this.ctx.stroke(),this.ctx.restore()}if(this.options.point.show){var r=(2-2*(this.options.startPoint/Math.PI-.5))*this.currentPercent-(2-this.options.startPoint/Math.PI),c=this.width/2+(this.width/2-this.options.lineWidth)*Math.cos(r*Math.PI),l=this.height/2+(this.width/2-this.options.lineWidth)*Math.sin(r*Math.PI);this.ctx.save(),this.ctx.fillStyle=t.options.point.color,this.ctx.beginPath(),this.ctx.arc(c,l,10,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.restore()}}},ml.prototype.execAnimation=function(){var t=this;this.exec||(this.exec=!0,this.timer=setInterval(function(){t.currentPercent<t.targetPercent?(t.currentPercent+=.02,t.currentPercent>t.targetPercent&&(t.currentPercent=t.targetPercent),t.draw()):t.currentPercent>t.targetPercent&&(t.currentPercent-=.02,t.currentPercent<t.targetPercent&&(t.currentPercent=t.targetPercent),t.draw())},1e3/90))},ml.prototype.stopAnimation=function(){this.exec&&(this.exec=!1,clearInterval(this.timer))};var bl=ml,Cl={name:"percent-circle",props:{result:{type:Object,default:function(){return{arrived:0,total:0,percent:0}}},tip:{type:String,default:""},description:{type:String,default:""}},methods:{refresh:function(){this.$canvas&&(this.$canvas.targetPercent=this.result.percent)}},watch:{result:function(){var t=this;this.$nextTick(function(){t.refresh()})}},mounted:function(){this.$canvas=new bl(this.$refs.canvas,{lineWidth:14,r:180,startPoint:.7*Math.PI,targetPercent:this.result.percent,point:{show:!1,color:"#ffffff"}}),this.$canvas.execAnimation()},beforeDestroy:function(){this.$canvas&&this.$canvas.stopAnimation()}},wl=Cl,yl=(i("0553"),Object(c["a"])(wl,fl,pl,!1,null,null,null));yl.options.__file="PercentCircle.vue";var $l=yl.exports,kl={name:"attendance-details",props:["date"],components:{percentCircle:$l},data:function(){return{result:{arrived:0,total:0,percent:0},description:"",array:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isAdmin","isHeadTeacher"]),{mode:function(){return this.$route.params.mode},isTeacher:function(){return"teacher"===this.mode},isStudent:function(){return"student"===this.mode},id:function(){return Number(this.$route.params.id)},isValid:function(){return this.isAdmin||this.isStudent&&this.isHeadTeacher},url:function(){if(this.isValid){if(this.isStudent)return this.isAdmin?"admin/class/studentattendance":"teacher/class/studentattendance";if(this.isTeacher)return"admin/schoollevel/staff/attendancedetail"}return""}}),methods:{analysisStudent:function(t){this.result={arrived:t.arrivedStudentClassTotal,total:t.studentClassTotal,percent:t.studentClassTotal>0?t.arrivedStudentClassTotal/t.studentClassTotal:0};var e=t.gradeLevel,i=t.classId;this.description=this.$t("format.classInfo",{gradeLevel:e,classId:i}),this.array=t.studentAttendanceInfo},analysisTeacher:function(t){this.result={arrived:t.arrivedStaffSchoolLevelTotal,total:t.staffSchoolLevelTotal,percent:t.staffSchoolLevelTotal>0?t.arrivedStaffSchoolLevelTotal/t.staffSchoolLevelTotal:0},this.description=t.schoolLevelName,this.array=t.staffAttendanceInfoList},analysis:function(t){this.isStudent?this.analysisStudent(t):this.analysisTeacher(t)},viewSignInInformation:function(t){this.$router.push({name:"sign-in-information",params:{mode:this.mode,id:this.isStudent?t.idStudent:t.idStaff,date:this.date},query:{info:encodeURI(this.description),gender:t.gender&&t.gender.toLowerCase()||"male",bracelet:0===t.braceletOfBinding?"unbind":"bind"}})},fetch:function(){var t=this;this.isValid&&(this.$httpPost||(this.$httpPost=this.$http.createPost(this.url,{opts:{cycle:6e4},success:function(e){return t.analysis(e.data)}})),this.$httpPost.force(this.isStudent?{token:this.user.token,idClass:this.id,queryDate:this.date}:{token:this.user.token,idSchoolLevel:this.id,queryDate:this.date},{cycle:gc(new Date)===this.date?6e4:0}))},reset:function(){this.result={arrived:0,total:0,percent:0},this.students=[],this.fetch()}},watch:{date:function(){this.reset()}},created:function(){this.fetch()},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel()}},Pl=kl,Sl=(i("39b3"),Object(c["a"])(Pl,ul,dl,!1,null,null,null));Sl.options.__file="AttendanceDetails.vue";var El=Sl.exports,Il=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"c-sign-in-information",class:{"is-teacher":t.isTeacher,"is-student":t.isStudent},attrs:{title:t.$t("signIn.title")}},[i("div",{staticClass:"l-navigation__content"},[i("div",{staticClass:"c-sign-in-information__wrapper"},[i("character-intro",{staticClass:"c-sign-in-information__intro c-character-intro--black",attrs:{person:t.person}},[i("div",{staticClass:"c-sign-in-information__phone_wrapper"},[i("div",{staticClass:"c-sign-in-information__phone",on:{click:t.ringUp}})])]),t.canManual?i("div",{staticClass:"c-sign-in-information__operation c-sign-in"},[i("div",{staticClass:"c-sign-in__item c-sign-in__status"},[t._v("\n          "+t._s(t.$t("signIn.status"))+"\n          "),t.isUnbind?i("div",{staticClass:"c-sign-in__unbind"},[i("i",{staticClass:"c-sign-in__unbind_icon"}),t._v(t._s(t.$t("signIn.unbind")))]):t._e()]),i("div",{staticClass:"c-sign-in__item c-sign-in__type"},[t._v(t._s(t.$t("signInType.3"))),i("i",{staticClass:"c-sign-in__icon",class:{"c-sign-in__icon--checked":t.isManual},on:{click:function(e){t.toggleSignIn(1)}}})]),i("div",{staticClass:"c-sign-in__item c-sign-in__type"},[t._v(t._s(t.$t("signInType.4"))),i("i",{staticClass:"c-sign-in__icon",class:{"c-sign-in__icon--checked":t.isLeave},on:{click:function(e){t.toggleSignIn(3)}}})]),t.isLeave?i("div",{staticClass:"c-sign-in__reason"},[i("div",{staticClass:"c-sign-in__reason_item",class:{"is-active":1===t.reasonType},on:{click:function(e){t.changeReason(1)}}},[i("i",{staticClass:"c-sign-in__reason_radio"}),t._v(t._s(t.$t("reason.sick"))+"\n          ")]),i("div",{staticClass:"c-sign-in__reason_item",class:{"is-active":3===t.reasonType},on:{click:function(e){t.changeReason(3)}}},[i("i",{staticClass:"c-sign-in__reason_radio"}),t._v(t._s(t.$t("reason.personal"))+"\n          ")]),i("div",{staticClass:"c-sign-in__reason_item",class:{"is-active":2===t.reasonType},on:{click:function(e){t.changeReason(2)}}},[i("i",{staticClass:"c-sign-in__reason_radio"}),t._v(t._s(t.$t("reason.pd"))+"\n          ")]),i("div",{staticClass:"c-sign-in__reason_item",class:{"is-active":4===t.reasonType},on:{click:function(e){t.changeReason(4)}}},[i("i",{staticClass:"c-sign-in__reason_radio"}),t._v(t._s(t.$t("reason.other"))+"\n          ")])]):t._e()]):t._e(),i("div",{staticClass:"c-sign-in-information__data"},[i("div",{staticClass:"c-sign-in-data",on:{click:function(e){t.toHistory("normal")}}},[i("div",{staticClass:"c-sign-in-data__count"},[t._v(t._s(t.normal))]),t._m(0)]),i("div",{staticClass:"c-sign-in-data",on:{click:function(e){t.toHistory("abnormal")}}},[i("div",{staticClass:"c-sign-in-data__count c-sign-in-data__count--prominent"},[t._v(t._s(t.abnormal))]),t._m(1)])])],1)])])},Al=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-sign-in-data__label"},[t._v(t._s(t.$t("signIn.normal")))])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-sign-in-data__label"},[t._v(t._s(t.$t("signIn.abnormal")))])}],Tl={name:"sign-in-infomation",components:{characterIntro:sn},data:function(){return{person:null,phoneNumber:null,normal:0,abnormal:0,signInType:0,submitType:0,reasonType:1,submitReasonType:1,today:gc(new Date),hasValue:!1,preventToggle:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isAdmin","isHeadTeacher"]),{mode:function(){return this.$route.params.mode},isTeacher:function(){return"teacher"===this.mode},isStudent:function(){return"student"===this.mode},id:function(){return Number(this.$route.params.id)},info:function(){return decodeURI(this.$route.query.info||"")},isMale:function(){return this.$route.query.gender!==st.FEMALE.toLowerCase()},isValid:function(){return this.isAdmin||this.isStudent&&this.isHeadTeacher},isToday:function(){var t=this.$route.params.date;return!t||t===this.today},canManual:function(){return this.hasValue&&this.isToday&&(this.isStudent&&(this.isHeadTeacher||this.isAdmin)||this.isTeacher&&this.isAdmin)&&!this.preventToggle},isManual:function(){return 1===this.signInType},isLeave:function(){return 3===this.signInType},isUnbind:function(){return"unbind"===this.$route.query.bracelet}}),methods:{analysis:function(t){this.hasValue=!0,this.person={id:this.id,name:t.firstName+(t.lastName?" ".concat(t.lastName):""),headUrl:t.headUrl,info:this.isStudent?t.parentEmail:t.email,tag:this.info,isKid:this.isStudent,isMale:this.isMale},this.phoneNumber=this.isStudent?t.areaCode+t.parentMobile:null,this.normal=t.accReachCount,this.abnormal=t.accAbsenceCount,1===t.status&&(0===t.isManual?this.preventToggle=!0:1===t.manualType?(this.signInType=1,this.submitType=1):3===t.manualType&&(this.signInType=3,this.submitType=3,this.reasonType=t.reasonType,this.submitReasonType=t.reasonType))},submit:function(){var t=this;this.$siginInHttpPost||(this.$siginInHttpPost=this.$http.createPost(this.isStudent?"teacher/student/signin":"admin/staff/signin",{opts:{lock:!0},success:function(){switch(t.signInType){case 1:t.normal=Math.max(0,t.normal-1);break;case 3:t.abnormal=Math.max(0,t.abnormal-1);break;default:break}switch(t.signInType=t.submitType,t.signInType){case 1:t.normal+=1,t.submitReasonType=1;break;case 3:t.abnormal+=1;break;default:t.submitReasonType=1;break}t.reasonType=t.submitReasonType},fail:function(){t.submitType=t.signInType,t.submitReasonType=t.reasonType}}));var e={token:this.user.token,type:this.submitType,signDate:this.today};this.isStudent?e.idStudent=this.id:e.idStaff=this.id,3===this.submitType&&(e.reasonType=this.submitReasonType),this.$siginInHttpPost.force(e)},signIn:function(t){!this.preventToggle&&this.hasValue&&t!==this.submitType&&(this.submitType=t,this.submit())},changeReason:function(t){!this.preventToggle&&this.hasValue&&t!==this.submitReasonType&&(this.submitType=3,this.submitReasonType=t,this.submit())},toggleSignIn:function(t){this.signInType===t?this.signIn(0):this.signIn(t)},toHistory:function(t){this.hasValue&&this.$router.push({name:"attendance-history",params:{mode:this.mode,id:this.id,type:t}})},ringUp:function(){this.hasValue&&(this.phoneNumber?this.$native.ringUp(this.phoneNumber):this.$eventBus.$emit(at,{code:-1,message:this.$t("error.nomobile")}))}},created:function(){var t=this;this.isStudent&&(this.person={isKid:!0,isMale:this.isMale}),this.person={isKid:this.isStudent,isMale:this.isMale},this.isValid&&(this.$httpPost=this.$http.createPost(this.isStudent?"teacher/student/info":"admin/staff/info",{opts:{lock:!0},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request(this.isStudent?{token:this.user.token,idStudent:this.id}:{token:this.user.token,idStaff:this.id}))},beforeDestroy:function(){this.$httpPost&&this.$httpPost.cancel(),this.$siginInHttpPost&&this.$siginInHttpPost.cancel()}},Dl=Tl,Ol=(i("9aa5"),Object(c["a"])(Dl,Il,Al,!1,null,null,null));Ol.options.__file="SignInInformation.vue";var xl=Ol.exports,Ml=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{staticClass:"p-attendance-history",attrs:{title:t.$t("attendance.history")}},[i("div",{staticClass:"l-navigation__placeholder c-attendance-type"},[i("router-link",{staticClass:"o-tab c-attendance-type__tab",class:{"is-active":t.isAll},attrs:{to:{params:{type:"all"}},replace:""}},[t._v(t._s(t.$t("signIn.all")))]),i("router-link",{staticClass:"o-tab c-attendance-type__tab",class:{"is-active":t.isNormal},attrs:{to:{params:{type:"normal"}},replace:""}},[t._v(t._s(t.$t("signIn.normal")))]),i("router-link",{staticClass:"o-tab c-attendance-type__tab",class:{"is-active":t.isAbnormal},attrs:{to:{params:{type:"abnormal"}},replace:""}},[t._v(t._s(t.$t("signIn.abnormal")))])],1),i("div",{staticClass:"l-navigation__content u-overflow-hidden"},[i("div",{ref:"wrapper",staticClass:"p-attendance-history__content",class:{"p-attendance-history__content--current":t.isNormal}},[i("div",[i("ul",{ref:"listWrapper"},t._l(t.normalAttendances,function(e,s){return i("li",{key:s},[t._o(i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(e.label))]),0,s),i("div",{staticClass:"p-attendance-history__list"},t._l(e.attendances,function(e,s){return i("div",{key:s,staticClass:"c-attendance-history-item"},[i("div",{staticClass:"c-attendance-history-item__info u-clearfix"},[i("div",{staticClass:"c-attendance-history-item__date"},[t._v(t._s(e.date))]),i("div",{staticClass:"c-attendance-history-item__state"},[t._v(t._s(1===e.isManual?t.$t("signInType.3"):t.$t("signInType."+e.type)))])]),i("div",{staticClass:"c-attendance-history-item__time"},[t._v(t._s(e.time))])])}))])})),t.normalCanPullUp?i("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.normalPullUpTip))]):t._e()]),i("loading",{attrs:{fetching:t.normalLoading,isError:t.normalIsError,retry:t.fetchNormal}}),t.normalEmpty?i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1),i("div",{ref:"wrapper2",staticClass:"p-attendance-history__content",class:{"p-attendance-history__content--current":t.isAbnormal}},[i("div",[i("ul",{ref:"listWrapper2"},t._l(t.abnormalAttendances,function(e,s){return i("li",{key:s},[t._o(i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(e.label))]),1,s),i("div",{staticClass:"p-attendance-history__list"},t._l(e.attendances,function(e,s){return i("div",{key:s,staticClass:"c-attendance-history-item"},[i("div",{staticClass:"c-attendance-history-item__info u-clearfix"},[i("div",{staticClass:"c-attendance-history-item__date"},[t._v(t._s(e.date))]),i("div",{staticClass:"c-attendance-history-item__state c-attendance-history-item__state--error"},[t._v(t._s(t.$t("signInType.4")))])]),i("div",{staticClass:"c-attendance-history-item__time"},[t._v(t._s(e.time))])])}))])})),t.abnormalCanPullUp?i("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.abnormalPullUpTip))]):t._e()]),i("loading",{attrs:{fetching:t.abnormalLoading,isError:t.abnormalIsError,retry:t.fetchAbnormal}}),t.abnormalEmpty?i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1),i("div",{ref:"wrapper3",staticClass:"p-attendance-history__content t-parent",class:{"p-attendance-history__content--current":t.isAll}},[i("div",[i("ul",{ref:"listWrapper3"},t._l(t.records,function(e,s){return i("li",{key:s},[t._o(i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(e.label))]),2,s),i("div",{staticClass:"p-attendance-history__timeline"},t._l(e.records,function(e,s){return i("div",{key:s,staticClass:"c-timeline__point"},[i("div",{staticClass:"c-timeline__header t-adapt-point"}),i("div",{staticClass:"c-timeline__tail"}),i("div",{staticClass:"c-timeline__content"},[i("div",{staticClass:"c-timeline__time"},[t._v(t._s(e.time))]),i("div",{staticClass:"c-timeline__info"},[i("div",{staticClass:"c-timeline__row"},[t._v(t._s(e.label))])])])])}))])})),t.allCanPullUp?i("div",{staticClass:"p-sign-in-history__pullup"},[t._v(t._s(t.allPullUpTip))]):t._e()]),i("loading",{attrs:{fetching:t.allLoading,isError:t.allIsError,retry:t.fetchAll}}),t.allEmpty?i("div",{staticClass:"p-attendance-history__time"},[t._v(t._s(t.$t("common.empty")))]):t._e()],1)])])},Nl=[],Ul={name:"attendance-history",components:{loading:jn},data:function(){return{currentType:null,normalHttpPost:null,normalPage:1,normalPageSize:20,normalIsPullUpLoad:!1,normalError:!1,normalHasMore:!0,normalHasFetched:!1,normalAttendances:[],abnormalHttpPost:null,abnormalPage:1,abnormalPageSize:20,abnormalIsPullUpLoad:!1,abnormalError:!1,abnormalHasMore:!0,abnormalHasFetched:!1,abnormalAttendances:[],allHttpPost:null,allPage:1,allPageSize:20,allIsPullUpLoad:!1,allError:!1,allHasMore:!0,allHasFetched:!1,records:[]}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),{mode:function(){return this.$route.params.mode},isTeacher:function(){return"teacher"===this.mode},isStudent:function(){return"student"===this.mode},url:function(){return this.isTeacher?"admin/staff/history/attendance":"teacher/student/history/attendance"},recordUrl:function(){return this.isTeacher?"teacher/staff/signinrecord":"teacher/student/signinrecord"},id:function(){return Number(this.$route.params.id)},normalFetching:function(){return!!this.normalHttpPost&&this.normalHttpPost.isRequesting()},normalLoading:function(){return this.normalFetching&&!this.normalHasFetched},normalIsError:function(){return this.normalError&&!this.normalHasFetched},normalHas:function(){return this.normalAttendances.length>0},normalEmpty:function(){return this.normalHasFetched&&!this.normalHas},normalCanPullUp:function(){return this.normalHasFetched&&this.normalHas},normalPullUpTip:function(){return this.normalIsPullUpLoad?this.$t("pullUp.loading"):this.normalHasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")},abnormalFetching:function(){return!!this.abnormalHttpPost&&this.abnormalHttpPost.isRequesting()},abnormalLoading:function(){return this.abnormalFetching&&!this.abnormalHasFetched},abnormalIsError:function(){return this.abnormalError&&!this.abnormalHasFetched},abnormalHas:function(){return this.abnormalAttendances.length>0},abnormalEmpty:function(){return this.abnormalHasFetched&&!this.abnormalHas},abnormalCanPullUp:function(){return this.abnormalHasFetched&&this.abnormalHas},abnormalPullUpTip:function(){return this.abnormalIsPullUpLoad?this.$t("pullUp.loading"):this.abnormalHasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")},allFetching:function(){return!!this.allHttpPost&&this.allHttpPost.isRequesting()},allLoading:function(){return this.allFetching&&!this.allHasFetched},allIsError:function(){return this.allError&&!this.allHasFetched},allHas:function(){return this.records.length>0},allEmpty:function(){return this.allHasFetched&&!this.allHas},allCanPullUp:function(){return this.allHasFetched&&this.allHas},allPullUpTip:function(){return this.allIsPullUpLoad?this.$t("pullUp.loading"):this.allHasMore?this.$t("pullUp.more"):this.$t("pullUp.finished")},isNormal:function(){return"normal"===this.currentType},isAbnormal:function(){return"abnormal"===this.currentType},isAll:function(){return"all"===this.currentType}}),methods:{isSameMonth:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()},isSameDay:function(t,e){return this.isSameMonth(t,e)&&t.getDate()===e.getDate()},checkDateStr:function(t){var e=new Date;return this.isSameDay(e,t)?this.$t("common.today"):(e.setDate(e.getDate()-1),this.isSameDay(e,t)?this.$t("common.yesterday"):this.$t("format.month-day",{month:this.$d(t,"month"),day:t.getDate()}))},addData:function(t,e){var i=e[e.length-1],s=new Date(t.checkTime);i&&this.isSameMonth(i.date,s)||(i={label:this.$t("format.year-month",{year:s.getFullYear(),month:this.$d(s,"month")}),date:s,attendances:[]},e.push(i)),i.attendances.push({date:this.checkDateStr(s),time:t.checkTimeStr.split(" ")[1],isManual:t.isManual,type:t.type})},initNormalScroll:function(){var t=this;this.$refs.wrapper&&this.normalHas&&!this.$normalScroll&&(this.$refs.listWrapper.style.minHeight="".concat(On(this.$refs.wrapper).height+1,"px"),this.$normalScroll=new as["a"](this.$refs.wrapper,{scrollY:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$normalScroll.on("pullingUp",function(){t.normalHasMore&&!t.normalFetching?(t.normalIsPullUpLoad=!0,t.fetchNormal()):t.$normalScroll.finishPullUp()}))},normalPullUpFnished:function(){this.normalIsPullUpLoad&&(this.normalIsPullUpLoad=!1,this.$normalScroll.finishPullUp())},normalForceUpdate:function(){var t=this;this.$nextTick(function(){t.$normalScroll?(t.normalPullUpFnished(),t.$normalScroll.refresh()):t.initNormalScroll()})},addNormal:function(t){if(this.normalHasFetched=!0,t.length<this.normalPageSize&&(this.normalHasMore=!1),0!==t.length){for(var e=0,i=t.length;e<i;e++)this.addData(t[e],this.normalAttendances);this.normalPage+=1}},fetchNormal:function(){this.normalHttpPost.request(this.isStudent?{token:this.user.token,idStudent:this.id,checkType:1,page:this.normalPage,pageSize:this.normalPageSize}:{token:this.user.token,idStaff:this.id,checkType:1,page:this.normalPage,pageSize:this.normalPageSize})},initNormal:function(){var t=this;this.normalHttpPost||(this.normalHttpPost=this.$http.createPost(this.url,{success:function(e){t.normalError=!1,t.addNormal(e.data)},fail:function(){t.normalError=!0}})),this.normalHasFetched||this.fetchNormal()},initAbnormalScroll:function(){var t=this;this.$refs.wrapper2&&this.abnormalHas&&!this.$abnormalScroll&&(this.$refs.listWrapper2.style.minHeight="".concat(On(this.$refs.wrapper).height+1,"px"),this.$abnormalScroll=new as["a"](this.$refs.wrapper2,{scrollY:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$abnormalScroll.on("pullingUp",function(){t.abnormalHasMore&&!t.abnormalFetching?(t.abnormalIsPullUpLoad=!0,t.fetchAbnormal()):t.$abnormalScroll.finishPullUp()}))},abnormalPullUpFnished:function(){this.abnormalIsPullUpLoad&&(this.abnormalIsPullUpLoad=!1,this.$abnormalScroll.finishPullUp())},addAbnormal:function(t){if(this.abnormalHasFetched=!0,t.length<this.abnormalPageSize&&(this.abnormalHasMore=!1),0!==t.length){for(var e=0,i=t.length;e<i;e++)this.addData(t[e],this.abnormalAttendances);this.abnormalPage+=1}},fetchAbnormal:function(){this.abnormalHttpPost.request(this.isStudent?{token:this.user.token,idStudent:this.id,checkType:3,page:this.abnormalPage,pageSize:this.abnormalPageSize}:{token:this.user.token,idStaff:this.id,checkType:3,page:this.abnormalPage,pageSize:this.abnormalPageSize})},abnormalForceUpdate:function(){var t=this;this.$nextTick(function(){t.$abnormalScroll?(t.abnormalPullUpFnished(),t.$abnormalScroll.refresh()):t.initAbnormalScroll()})},initAbnormal:function(){var t=this;this.abnormalHttpPost||(this.abnormalHttpPost=this.$http.createPost(this.url,{success:function(e){t.abnormalError=!1,t.addAbnormal(e.data)},fail:function(){t.abnormalError=!0}})),this.abnormalHasFetched||this.fetchAbnormal()},initAllScroll:function(){var t=this;this.$refs.wrapper3&&this.allHas&&!this.$allScroll&&(this.$refs.listWrapper3.style.minHeight="".concat(On(this.$refs.wrapper).height+1,"px"),this.$allScroll=new as["a"](this.$refs.wrapper3,{scrollY:!0,probeType:2,pullUpLoad:{threshold:10}}),this.$allScroll.on("pullingUp",function(){t.allHasMore&&!t.allFetching?(t.allIsPullUpLoad=!0,t.fetchAll()):t.$allScroll.finishPullUp()}))},allPullUpFnished:function(){this.allIsPullUpLoad&&(this.allIsPullUpLoad=!1,this.$allScroll.finishPullUp())},isToday:function(t){return this.isSameDay(new Date,t)},checkDayStr:function(t){if(this.isToday(t))return this.$t("common.today");var e=new Date;return e.setDate(e.getDate()-1),this.isSameDay(e,t)?this.$t("common.yesterday"):this.$t("format.year-month-day",{month:t.getMonth()+1,day:t.getDate(),year:t.getFullYear()})},addAll:function(t){if(this.allHasFetched=!0,t.length<this.allPageSize&&(this.allHasMore=!1),0!==t.length){for(var e,i,s,a=this.records[this.records.length-1],n=0,o=t.length;n<o;n++){switch(e=t[n],i=new Date(e.checkTime),a&&this.isSameDay(a.date,i)||(a={label:this.checkDayStr(i),date:i,records:[]},this.records.push(a)),e.type){case 1:case 2:s=this.$t("record.".concat(e.type),{gate:this.$lang.isChinese()?e.checkinPointName:e.checkinPointNameEn});break;case 3:case 4:case 5:case 6:s=this.$t("record.".concat(e.type),{routeNo:e.routeNo});break;case 12:case 13:case 14:s=this.$t("record.".concat(e.type),{name:"".concat(e.staffFirstName," ").concat(e.staffLastName)});break;default:s=this.$t("record.".concat(e.type));break}a.records.push({label:s,type:e.type,time:e.checkTimeStr.split(" ")[1],busId:e.busId,detailId:e.checkDetailId})}this.allPage+=1}},fetchAll:function(){this.allHttpPost.request(this.isStudent?{token:this.user.token,idStudent:this.id,page:this.allPage,pageSize:this.allPageSize}:{token:this.user.token,idStaff:this.id,page:this.allPage,pageSize:this.allPageSize})},allForceUpdate:function(){var t=this;this.$nextTick(function(){t.$allScroll?(t.allPullUpFnished(),t.$allScroll.refresh()):t.initAllScroll()})},initAll:function(){var t=this;this.allHttpPost||(this.allHttpPost=this.$http.createPost(this.recordUrl,{success:function(e){t.allError=!1,t.addAll(e.data)},fail:function(){t.allError=!0}})),this.allHasFetched||this.fetchAll()},updateAttendances:function(t){if(this.currentType!==t)switch(this.currentType=t,this.currentType){case"all":this.initAll();break;case"normal":this.initNormal();break;case"abnormal":this.initAbnormal();break;default:break}}},watch:{normalFetching:function(t,e){var i=this;e&&!t&&setTimeout(function(){i.normalForceUpdate()},20)},abnormalFetching:function(t,e){var i=this;e&&!t&&setTimeout(function(){i.abnormalForceUpdate()},20)},allFetching:function(t,e){var i=this;e&&!t&&setTimeout(function(){i.allForceUpdate()},20)}},beforeRouteUpdate:function(t,e,i){this.updateAttendances(t.params.type),i()},created:function(){this.updateAttendances(this.$route.params.type)},mounted:function(){switch(this.currentType){case"all":this.initAllScroll();break;case"normal":this.initNormalScroll();break;case"abnormal":this.initAbnormalScroll();break;default:break}},beforeDestroy:function(){this.normalHttpPost&&this.normalHttpPost.cancel(),this.$normalScroll&&this.$normalScroll.destroy(),this.abnormalHttpPost&&this.abnormalHttpPost.cancel(),this.$abnormalScroll&&this.$abnormalScroll.destroy(),this.allHttpPost&&this.allHttpPost.cancel(),this.$allScroll&&this.$allScroll.destroy()}},Ll=Ul,jl=(i("1d13"),Object(c["a"])(Ll,Ml,Nl,!1,null,null,null));jl.options.__file="AttendanceHistory.vue";var Hl=jl.exports,Rl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",{attrs:{title:t.$t("busMap.title")}},[i("div",{ref:"map",staticClass:"l-navigation__content c-bus-map"}),i("div",{staticClass:"c-bus"},[i("div",{staticClass:"c-bus-info c-bus__info"},[i("div",{staticClass:"c-bus-info__logo c-bus-logo"},[i("div",{staticClass:"c-bus-logo__icon"})]),i("div",{staticClass:"c-bus-info__no"},[t._v("No.")]),t.routeNo?i("div",{staticClass:"c-bus-info__route"},[t._v(t._s(t.routeNo))]):t._e()]),i("div",{staticClass:"c-bus__time"},[i("div",{staticClass:"c-bus-time"},[i("div",{staticClass:"c-bus-time__label"},[t._v(t._s(t.$t("busMap.boarding")))]),i("div",{staticClass:"c-bus-time__value"},[t._v(t._s(t.boarding))])]),i("div",{staticClass:"c-bus-time"},[i("div",{staticClass:"c-bus-time__label"},[t._v(t._s(t.$t("busMap.unloading")))]),i("div",{staticClass:"c-bus-time__value"},[t._v(t._s(t.unloading))])]),i("div",{staticClass:"c-bus__phone",on:{click:t.ringUp}})])])])},Fl=[],Bl=!1,Vl=null,ql=null;function Wl(t){Bl||Vl||(Vl=document.createElement("script"),Vl.type="text/javascript",Vl.src="http://ditu.google.cn/maps/api/js?&key=AIzaSyBU7s-e3nAYl12Tu0o4DykAiSz3d6AekPQ",document.body.appendChild(Vl),Vl.onload=function(){R("load google-map success"),Bl=!0,Vl=null,ql&&ql()},Vl.onerror=function(){R("load google-map error"),Bl=!1,document.body.removeChild(Vl),Vl=null}),Bl?t():ql=t}function Gl(){ql=null,Vl&&Vl.abort&&Vl.abort()}var Yl={name:"bus-map",data:function(){return{map:null,loaded:!1,googleMapLoaded:!1,icon:"./wz.png",routeNo:"",boarding:"",unloading:"",gaps:[],useDefault:!1}},computed:Object(Yi["a"])({},Object(K["d"])(["user"]),Object(K["c"])(["isStaff"])),methods:{analysis:function(t){this.loaded=!0,this.routeNo=t.routeNo,this.boarding=t.boardingTimeStr,this.unloading=t.unloadingTimeStr;var e=t.tripGps.map(function(t){return{lat:Number(t.latitude),lng:Number(t.longitude)}});e.length>this.gaps.length?(this.useDefault=!1,this.gaps=e,this.draw()):0!==this.gaps.length||this.useDefault||(this.useDefault=!0,this.draw())},draw:function(){var t=this;if(this.$refs.map&&this.loaded&&(0!==this.gaps.length||this.useDefault))if(this.googleMapLoaded)if(this.useDefault){var e={lat:22.242655,lng:114.167177},i=new google.maps.Map(this.$refs.map,{zoom:18,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!0});new google.maps.Marker({position:e,icon:{url:"./wz.png",anchor:new google.maps.Point(37.5,37.5)},map:i})}else if(this.$map)this.$marker.setPosition(this.gaps[this.gaps.length-1]),this.$polyline.setPath(this.gaps);else{var s=new google.maps.LatLngBounds;this.gaps.forEach(function(t){return s.extend(t),t});var a=s.getCenter();this.$map=new google.maps.Map(this.$refs.map,{zoom:18,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!0}),this.$marker=new google.maps.Marker({position:this.gaps[this.gaps.length-1],icon:{url:"./wz.png",anchor:new google.maps.Point(37.5,37.5)},map:this.$map}),this.$polyline=new google.maps.Polyline({path:this.gaps,geodesic:!0,strokeColor:"#47bc53",strokeWeight:8,icons:[{icon:{path:google.maps.SymbolPath.FORWARD_OPEN_ARROW,strokeColor:"#fff",strokeWeight:2,scale:.8},repeat:"20px"}],map:this.$map}),this.gaps.length>1&&this.$map.fitBounds(s)}else Wl(function(){t.googleMapLoaded=!0,t.draw()})},ringUp:function(){this.$native.ringUp("85229798798")}},created:function(){var t=this;this.$httpPost=this.$http.createPost(this.isStaff?"staff/bustrip":"parent/child/bustrip",{opts:{cycle:3e4},success:function(e){return t.analysis(e.data)}}),this.$httpPost.request({token:this.user.token,idBus:this.$route.params.busId,checkDetailId:this.$route.params.id})},mounted:function(){this.draw()},beforeDestroy:function(){Gl(),this.$httpPost&&this.$httpPost.cancel()}},zl=Yl,Zl=(i("d1f9"),Object(c["a"])(zl,Rl,Fl,!1,null,null,null));Zl.options.__file="BusMap.vue";var Jl=Zl.exports,Ql=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("navigation-wrapper",[i("div",{staticClass:"l-form c-modify",staticStyle:{"padding-top":"20px"}},[i("div",{staticClass:"l-form__title"},[t._v("设置")]),i("div",{staticClass:"c-form-field c-form-field--button",class:{"is-active":t.isFocused}},[i("div",{staticClass:"c-form-field__label"},[t._v("服务器地址")]),i("div",{staticClass:"c-form-field__input_wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.serveUrl,expression:"serveUrl"}],staticClass:"c-form-field__input",staticStyle:{"font-size":"16px"},attrs:{type:"text"},domProps:{value:t.serveUrl},on:{focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},input:function(e){e.target.composing||(t.serveUrl=e.target.value)}}}),i("div",{staticClass:"c-form-field__button",on:{click:t.reset}},[t._v("恢复默认")])])]),i("div",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v("开启打印")]),i("div",{staticClass:"c-info-item__switch o-switch t-adpat-switch",class:{"is-on":t.useLog},on:{click:t.toggle}})]),i("div",{staticClass:"c-info-item"},[i("div",{staticClass:"c-info-item__label"},[t._v(t._s(t.h5Version))])]),i("div",{staticClass:"o-button o-button--submit t-adapt-button--active c-modify__submit is-active",on:{click:t.save}},[t._v("保存")])])])},Kl=[],Xl=i("eb32"),th={name:"backdoor",data:function(){return{isFocused:!1,useLog:B(),defaultServelUrl:S.a.defaults.baseURL,serveUrl:S.a.defaults.baseURL}},computed:{h5Version:function(){return Xl.version}},methods:{save:function(){this.serveUrl!==this.defaultServelUrl&&(O(this.serveUrl),S.a.defaults.baseURL=this.serveUrl,window.localStorage.setItem("smart_campus__base_url",this.serveUrl),Qe()),F(this.useLog),window.localStorage.setItem("smart_campus__debug",this.useLog?"true":"false"),this.$router.back()},toggle:function(){this.useLog=!this.useLog},reset:function(){this.serveUrl=this.$cfg.base_url}}},eh=th,ih=Object(c["a"])(eh,Ql,Kl,!1,null,null,null);ih.options.__file="BackDoor.vue";var sh=ih.exports;s["a"].use(qi["a"]);var ah=new qi["a"]({routes:[{path:"/login/:mode(parent|staff)?",name:"login",component:ks,meta:{type:"login"}},{path:"/forget/:mode(parent|staff)",component:qs,children:[{path:"pwd",name:"pre-reset-pwd",component:Ts},{path:"pwd/:token",name:"reset-pwd",component:js}]},{path:"/user",component:Js,children:[{path:"boot/pwd/:type?",name:"set-pwd",component:ia,meta:{login:!0,mode:!0}},{path:"bind/:type?",name:"bind",component:ca,meta:{login:!0,mode:!0}},{path:"scan/:id",name:"scan",component:Sa,meta:{login:!0,mode:!0}},{path:"bind/success/:id",name:"bind-success",component:pa,meta:{login:!0,mode:!0}},{path:"bind/failure/:id/:code?",name:"bind-failure",component:Ca,meta:{login:!0,mode:!0}},{path:"unbind/:id",name:"unbind",component:Oa,meta:{login:!0,mode:!0}},{path:"home/:index(\\d+)?",name:"home",component:An,meta:{login:!0,mode:!0}},{path:"history/:id",name:"sign-in-history",component:Bn,meta:{login:!0,mode:!0}},{path:"motion/:id",name:"motion",component:eo,meta:{login:!0,mode:!0}},{path:"bracelet",name:"bracelet",component:ja,meta:{login:!0,mode:!0}},{path:"account",name:"account",component:ro,meta:{login:!0,mode:!0}},{path:"pwd",component:jr,children:[{path:"preset",name:"pre-modify-pwd",component:qr,meta:{login:!0,mode:!0}},{path:"modify",name:"modify-pwd",component:Jr,meta:{login:!0,mode:!0}}],meta:{login:!0,mode:!0}},{path:"email",component:ic,children:[{path:"preset",name:"pre-modify-email",component:cc,meta:{login:!0,mode:!0}},{path:"modify",name:"modify-email",component:pc,meta:{login:!0,mode:!0}}],meta:{login:!0,mode:!0}},{path:"mobile",component:pr,children:[{path:"confirm",name:"modify-mobile-confirm",component:Cr,meta:{login:!0,mode:!0}},{path:"validate",name:"pre-modify-mobile",component:Sr,meta:{login:!0,mode:!0}},{path:"modify",name:"modify-mobile",component:Or,meta:{login:!0,mode:!0}}],meta:{login:!0,mode:!0}},{path:"bluetooth",name:"bluetooth",component:po,meta:{login:!0,mode:!0}},{path:"setting",name:"setting",component:Co,meta:{login:!0}},{path:"setting/language",name:"modify-language",component:So,meta:{login:!0}}]},{path:"/children",name:"children",component:Jo,meta:{login:!0,mode:"parent"}},{path:"/children/:id",name:"children-info",component:ir,meta:{login:!0,mode:"parent"}},{path:"/children/:id/bus",name:"modify-bus",component:cr,meta:{login:!0,mode:"parent"}},{path:"/attendance",component:Mc,children:[{path:":mode(teacher|student)/school/:date?",name:"attendance-school",component:Kc,meta:{login:!0,mode:"staff"}},{path:"student/grade/:schoolLevelId/:date?",name:"attendance-grade",component:al,meta:{login:!0,mode:"staff"}},{path:"student/classes/:gradeId/:date?",name:"attendance-classes",component:hl,meta:{login:!0,mode:"staff"}},{path:":mode(teacher|student)/details/:id/:date?",name:"attendance-details",component:El,meta:{login:!0,mode:"staff"}}],meta:{login:!0,mode:"staff"}},{path:"/signin/:mode(teacher|student)/:id/:date?",name:"sign-in-information",component:xl,meta:{login:!0}},{path:"/attendance/:mode(teacher|student)/history/:id/:type(all|normal|abnormal)",name:"attendance-history",component:Hl,meta:{login:!0}},{path:"/map/bus/:busId/:id?",name:"bus-map",component:Jl,meta:{login:!0}},{path:"/about",name:"about",component:Oo,meta:{login:!0}},{path:"/faq",name:"faq",component:jo,children:[{path:"question",name:"question",component:qo,meta:{login:!0}}],meta:{login:!0}},{path:"/backdoor",name:"backdoor",component:sh},{path:"*",redirect:"/login"}]});ah.beforeEach(function(t,e,i){if(Lt.getters.isLogined)if("login"===t.meta.type)i({name:"home",params:{mode:Lt.state.user.mode},replace:!0});else{var s=Lt.state.user.mode;t.meta.mode&&t.meta.mode!==s?!0===t.meta.mode?t.params.mode&&t.params.mode!==s?i({name:t.name,params:Object.assign({},t.params,{mode:s}),replace:!0}):i():i({name:"home",params:{mode:Lt.state.user.mode},replace:!0}):i()}else t.meta.login?i({name:"login",replace:!0}):i()});var nh=ah;Promise.all([Pi(),jt()]).then(function(){new s["a"]({store:Lt,router:nh,i18n:Ye,render:function(t){return t(Vi)}}).$mount("#app")})},"58ac":function(t,e,i){"use strict";var s=i("4b84"),a=i.n(s);a.a},"59e6":function(t,e,i){"use strict";var s=i("ab95"),a=i.n(s);a.a},"5a05":function(t,e,i){"use strict";var s=i("6f98"),a=i.n(s);a.a},"5c0b":function(t,e,i){"use strict";var s=i("5e27"),a=i.n(s);a.a},"5e27":function(t,e,i){},"60ba":function(t,e,i){},6217:function(t,e,i){},"63bd":function(t,e,i){"use strict";var s=i("9f57"),a=i.n(s);a.a},"65bf":function(t,e,i){"use strict";var s=i("9b9d"),a=i.n(s);a.a},6617:function(t,e,i){"use strict";var s=i("44bf"),a=i.n(s);a.a},6863:function(t,e,i){"use strict";var s=i("f10b"),a=i.n(s);a.a},"69fe":function(t,e,i){"use strict";var s=i("1641"),a=i.n(s);a.a},"6ba9":function(t,e,i){"use strict";var s=i("cabc"),a=i.n(s);a.a},"6d6d":function(t,e,i){"use strict";var s=i("c02a"),a=i.n(s);a.a},"6f98":function(t,e,i){},"718c":function(t,e,i){},7578:function(t,e,i){"use strict";var s=i("6217"),a=i.n(s);a.a},7874:function(t,e,i){"use strict";var s=i("9df6"),a=i.n(s);a.a},8310:function(t,e,i){},8594:function(t,e,i){},8853:function(t,e,i){},"88a7":function(t,e){t.exports="data:image/gif;base64,R0lGODlhZABkAKIEAN7e3rq6uv///5mZmQAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBRjA4RUZDMDI3MjA2ODExODA4M0Y1OTQyMzVDRDM3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMzE0Rjk3NDdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMzE0Rjk3MzdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVBMTZDQjczOTIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUYwOEVGQzAyNzIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFAAAEACwAAAAAZABkAAAD/0i63P4wykmrvTjrzbv/YCiOZGme6CasbOqObPvOXRzTeGbLeT/tK18KQLwABZeBUlghOgGVY0VJHTAlT2cUOK0ur4+s9sedeKngsBhK3lHO3zRjXZRIJfC4fEFv28xwew50bBB3EHlWgg2EEYcOiYtqYo5lD3mSk5QPjwyRmYNrhpYNmKChog6dCp+njKkNqwSmrq+wDG6QtD4BvRiNsX+lu296Hb3IARd9qjyegRZnH8nUTbfR0IDZG9TdFJsa0trEGd3eE08eVcWJihzm5ovt6x7w8WDz9CD25z35aCT4Vcvxz9gIgchwFJyBUOG8HvwckqNhT6K4K/1oXJST0P8HwFogQ4ocSbKkyVoFP8pJaRARS31MXsJ0KdNdzJo2L+FsqXFnzmE7r/j8CVRmmqDjXh7F2UXpSqMno0qdSrWq1ZNENWby4m/mzY0uJvYUa6JdV7NjW4XNZ1Ft2X9nH5ZIKYSuiIX44ILAu5StOr8RvGIQ/EwuB8OBuW4Aq9NtBseNCbOTXJjx4G14MDdVPJny5qyROS9gDJkmzxkTLZM95ZhcaVCQU6+WJ1v17D2lxb4WRLa3Zkmvff/mPZxV8VnH8x5fvfur5cqem3tMjvw5dJW4qd++HRe7ac/GRWcX/9176NNCwYcn//3qevXuz6OPn9g6/czw7xedrz9x//8KAAYo4IAEFthAAgAh+QQFAAAEACwLAAUAPwAjAAADxUi63P4QyAmrvfhNmrvP2/aNJBNyZdqdkvoFsMcCnmCTcB6AbGb/gpcuhpn5gLfOMFfsXZA/z5JoMT6hQeV0V3VWsEnt8mL9YkdbbsT7AGeF00rZ4U5t5ewGWJVenyB1fHEaeQt7Ln0Oc4aHiIMNiwqNjo8mIW2TCwObcGOQl3qZCpukA1KVCyJ0Zw6lrhl3I6IErrUYniRQELW2FzouQBW8vC7FDcPExsrIvcouzK/OxdCk0sbU1svI2drJ3NfR387V4hgJACH5BAUAAAQALBoABQA/ACMAAAPFSLrcHjC6Sau9L0LMu1ea9o0kE0pl6p2b6g3wynpATcL4wLEBV/+ATw63m2GAv9cwduEdkbbOkmlxXqBRzpRKsVawWe20afxiR1tdxTsBB9HbddnhTsW78wZYlcafKHV8YxNsDHsufRl/dIeIgw2FCo2OjyYhbZOUS4oohpkXAqEVd5CdnlAeoaoCFKQ0Zxirsq1DKaigsrO0XCRAsbm6LsIKwMDDwsXGxynJucsqzcHPI9Gq09DR1y7N2sjF3cPO4MfWHQkAIfkEBQAABAAsLgAFADEAMAAAA71Is0z+MMpJJ2s1a33v/qDTYWFJjYupSugQBvAKtR9sB7KI1ncs05qeLQfMCH2rIuWIVCknzJxiV2HiiFRoVPqEbLnZiFWqGy2P5HJHi053CV/3WjJOq1Pi+AbAz3jobR98gwAyehSEiYY9e4mKi02Ijo92kpOUlRCXk5kRm46dnp+EoZqjfaWmn6kSq6ytl6+Wg7IZtLW4ubq7vL2dAsDBwsPApcTHyL/Iy8GZzM/FdtDPztPHytbDodnCDgkAIfkEBQAABAAsOwAKACQAPwAAA69IujzOMMpJnB0062u1h1z3jeEzeqV5Zum6te6UYrFc1vaNR/De9D4FMDgLLoqngDLHSSqfkuHkSV3ympqqlunRbndeLy4sjpG/5jN1rLayz0a4kUCeL9B2BTTP7/v/gIERAISFhoeELoiLjCeMj4YjkJOJHpSTkpeLjpqIK52RgqKjpKUjAoECqqp+q66oea+vdrKyRrW2Qbi5O7u8OL6uusGsw8Fzx7S4fMt9sxEJACH5BAUAAAQALDsAGQAkAD8AAAOtSLrcziO+SV+8o2qL8f5d+GmhOHJldzZpuS6t+RKxOtO1dCv5DrU+VirokBGFmaNyyWw6n8yAdEqtSl/WrPak7VJH3vB1Iw6Dy1ku2rpaf6HwuHzuBMQBePwzz7cz+31LgIBHg4REhoc+iYo7jHyIj3oTApUCGpJ+DZaWG48PnJ2ehg6hoqONCqanqJOlq02rlbGyTLKXtrW5prSwu6G9vL/Aw6xHusW4yU/EOwkAIfkEBQAABAAsLgAtADEAMQAAA7lIutz+ZMhJq4Q4L8u7/k0nUmA5nlepoaf6sZ67wpb80pOt73zv/8CgcLgLEGWBZPIIUjqNTMzzGX1Mp1XGFZtVbLnZL7gqdnYJZWUPwAZo0lBbu/0p7+b0+laHz+vHCwKCgw59fn9LD4OEhYZCi4uNjkCQjA2GbJSVAg+Ybj+bnJ2YoJsYpD6hp6g8qqt9qaavsK2ys3i1lR+sNq4ZvDK+v7Q6wreZO8a3PcpdzVnP0JBnitPU1dcOCQAh+QQFAAAEACwaADoAPwAkAAADyEi63P4wkiGrvXhojbu3W0h9ZCmKZZqdqOo+7PnOTCzTs33jrh7yL99GIigKXIFkoCIcOYzGlFIJ0j2g0dKUWmVdsUXSltttMcBZBmDNdozJZecZ/WC33W8cOtyw2/F5L3tHDn53DW9Jgnt1hgAPiUsqgxCOj5CJk3SVjhGZJZSchp6fH4wRlhKlHaGifqqrFq2uf7CBF6cSqRWxRJu6nby3smAXu8JbrMUWx7ZTHlgYzc6SQIXB1jPT2Snb3CWj39qv4jRr5QwJACH5BAUAAAQALAsAOgA/ACQAAAPHSLrcJC7KSesUGNvNu8og5I3kE4Jlap2n6kZs+86xPKu1fZc5uuM9zS8VFE0ASIBrwBxccpZkMtVsSmob6bRUtTpiHO3W0/V+fVkx0hFoux1l80ytZLvbkbjzRq8z7ndwenN0EYBvgnEvfYaHAXmDKoyNhxJ6eyWFEo6PloqZmpSAE5egYhScFJEek5uOqqtpahWpsJ+yWha1tl0doRO7pLdRp7qvFsMVs8aVyGWsUhzBvJhDDdPWKtjZJdvcJM3fL+Hi450qCQAh+QQFAAAEACwFAC0AMQAxAAADukgq3P5MyUmrlTDryzvRoOONU2hG5HiaKblurfpCsTs3da7vfO//wKBwCAQQa4Bk8jhSOo1My/MZpUynVckVW91ymd7vMezMkpXmsyfADvDIo3Z75yXJ57pt6o7PUfd8bBUDhIVDgW6DhYRCiIkTi4tAjhaRhj+UipaYiBeWjD6dnp+hopWkPaanmzyZo6w6rq+RrYEjnwO1fLeosbu8sDm2wLS6giS4WavFypC9zQrJ0M6S09SX1s4SCQAh+QQFAAAEACwFABkAJAA/AAADrki6Ks4wytmcpRjb/bJfXPh5oThSZXlOqbpGrfmC8TZD9XUz+Q63vp8riOMQUZ2jcslsOp8MgHRKrUpf1qz2pO1SR97w1SMOg8tZLtq6Wn+h8Lh8Tj8F4oF83qnv35V+fkeBgUSEhTuHiDOKiy+NfT6QepKTGQOYAxOQHpmZEoofnp8RhyOjpBCCp6iYTK2aS7CxR7OvsLK4uai3rb2jv8BKtrvCxZ5Nvsm8TsYRCQAh+QQFAAAEACwFAAoAJAA/AAADrki63K4ivklnvKJqi+X+S3eBoOiRmnmilMqm7tvG8kPXjZrhzs1Dvl+Qp6MAjqii48gEkILN6AcalcIwj2p1g81qt7yv9icG18pWHJr5I6zbijI8/p0vzHa6M8/v+/+AGgGDhIWGgyyHioski46FII+SiBuTkpGWio2ZhyickIGhoqOkogOAA6mpfKqtp3Curm2xsT+0tTW3uC+6uyy9rTjAqsLDtr2wt3bKebI/CQA7"},"8afe":function(t,e,i){"use strict";var s=i("ce1a"),a=i.n(s);a.a},"8f81":function(t,e,i){"use strict";var s=i("3a5b"),a=i.n(s);a.a},9422:function(t,e,i){"use strict";var s=i("60ba"),a=i.n(s);a.a},"972c":function(t,e,i){"use strict";var s=i("296f"),a=i.n(s);a.a},"9aa5":function(t,e,i){"use strict";var s=i("9cec"),a=i.n(s);a.a},"9abc":function(t,e,i){},"9b9d":function(t,e,i){},"9cec":function(t,e,i){},"9df6":function(t,e,i){},"9f57":function(t,e,i){},ab95:function(t,e,i){},ac30:function(t,e,i){"use strict";var s=i("8853"),a=i.n(s);a.a},add2:function(t,e,i){},b1fa:function(t,e,i){"use strict";var s=i("ca48"),a=i.n(s);a.a},b235:function(t,e,i){},b46e:function(t,e,i){},b5f7:function(t,e,i){"use strict";var s=i("cd2d"),a=i.n(s);a.a},bace:function(t,e,i){"use strict";var s=i("e795"),a=i.n(s);a.a},bdca:function(t,e,i){"use strict";var s=i("c7f8"),a=i.n(s);a.a},c02a:function(t,e,i){},c23c:function(t,e,i){},c58e:function(t,e,i){},c7f8:function(t,e,i){},ca0c:function(t,e,i){},ca48:function(t,e,i){},ca86:function(t,e,i){},cabc:function(t,e,i){},cd2d:function(t,e,i){},ce1a:function(t,e,i){},d1f9:function(t,e,i){"use strict";var s=i("8310"),a=i.n(s);a.a},d7c1:function(t,e,i){},dbc7:function(t,e,i){},dd4a:function(t,e,i){},de91:function(t,e,i){"use strict";var s=i("add2"),a=i.n(s);a.a},e2c3:function(t,e,i){},e32f:function(t,e,i){"use strict";var s=i("ca0c"),a=i.n(s);a.a},e611:function(t,e,i){"use strict";var s=i("dbc7"),a=i.n(s);a.a},e795:function(t,e,i){},eb32:function(t){t.exports={version:"20190605.01"}},eb4a:function(t,e,i){"use strict";var s=i("b46e"),a=i.n(s);a.a},f10b:function(t,e,i){},f874:function(t,e,i){},fd23:function(t,e,i){},fd2b:function(t,e,i){},ff01:function(t,e,i){"use strict";var s=i("b235"),a=i.n(s);a.a}},[[0,"runtime","chunk-vendors"]]]);
//# sourceMappingURL=app.73024882.js.map